{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#documentation","title":"Select your Device!","text":"Sonar 3D-15 DVL A125 DVL A50 Modem M16 Underwater GPS G2 Locator-A1 Locator-U1 Locator-D1 Receiver-D1"},{"location":"master-d1/","title":"Master-D1 Electronics","text":""},{"location":"master-d1/#description","title":"Description","text":"<p>The Master-D1 is a digital acoustic position computing board. It calculates the position of any Locator relative to the position of the Receivers, as well as global position through use of the integrated GPS and an IMU. The board supports up to 7 independent D1 devices, 1 A1 device or 1 U1 device. It is accessed through a network interface. The Master-D1 is running its own webserver which exposes an API and a GUI. With its small physical footprint, the board is easily integrated into a topside housing.</p>"},{"location":"master-d1/#benefits","title":"Benefits","text":"<ul> <li> <p>Extremely small footprint enabling easy integration with other equipment.</p> </li> <li> <p>Highly robust operation in areas with reflections (shallow water, around installations etc.)</p> </li> </ul>"},{"location":"master-d1/#wiring-interface","title":"Wiring interface","text":"<p>Make sure the LED is ON for all D1 interfaces that are connected. The digital D1 interfaces all have a separate LED to show if the communication link is in lock. When a Receiver-D1 or Locator-D1 cable is connected to the master board, the corresponding LED should be continuously ON. The silkscreen marking of the channel LEDs on the PCB are 0-indexed. The channel labels on the housing are 1-index. We thus get following LED channel mapping:</p> Interface LED Receiver, channel 1 0 Receiver, channel 2 1 Receiver, channel 3 2 Receiver, channel 4 3 Locator-D1 6 <p>The LED on the Locator-A1 interface is not in use.</p>"},{"location":"master-d1/#dimensions","title":"Dimensions","text":"<p>The diagrams below shows the mechanical dimensions of the Master-D1 electronics.</p> <p></p> <p></p>"},{"location":"master-d1/#setup","title":"Setup","text":""},{"location":"master-d1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"dvl/axes/","title":"Axes","text":"<p>For both the DVL-A50 and the DVL-A125.</p> <p>Velocities and dead reckoning output uses the vehicle frame. By default the vehicle frame is the same as the body frame, but can be adjusted to allow flexible mounting on the vehicle.</p> <p> Body frame x (Forward) y (Right) z (Down) Vehicle frame x (Vehicle) y (Vehicle) x (Body) y (Body) \u03b8 <p></p>"},{"location":"dvl/axes/#body-frame","title":"Body frame","text":"<p>The body frame axes of the DVL are as follows:</p> <ul> <li>X axis is pointing forward (LED is forward, cable backward)</li> <li>Y axis is pointing right</li> <li>Z axis is pointing down (mounting holes are up, transducers are down)</li> <li>Origin is the center of the DVL and 25mm/30mm from the backplate. See A125 and A50 for their dimensions. </li> </ul> <p>By default, the body frame and vehicle frame is the same and align with the DVL's frame for dead reckoning.</p>"},{"location":"dvl/axes/#vehicle-frame","title":"Vehicle frame","text":"<p>The DVL can be mounted at an angle to the forward direction of a vehicle to which it is attached.</p> <p>To be precise, the clockwise angle \u03b8 in degrees around the Z axis (i.e. in the X-Y plane) from the forward axis of the vehicle to the forward axis of the DVL can be entered as a 'mounting rotation offset' in the GUI, or via the TCP or serial protocols.</p> <p>The DVL will then output data in the vehicle frame obtained by rotating the DVL body frame anti-clockwise around the Z-axis by \u03b8  degrees: the X-axis of the velocities outputted by the DVL will be aligned with the forward axis of the vehicle, and, at time zero, the X-axis of the DVL's frame for dead reckoning will be aligned with the forward axis of the vehicle.</p> <p>For example:</p> <ul> <li> <p>If the DVL is mounted back-to-front (cable aligned with the forward axis of the vehicle), the mounting rotation offset should be set to 180 degrees.</p> </li> <li> <p>If the DVL is mounted with the LED at 90 degrees clockwise from the forward axis of the vehicle, the mounting rotation offset should be set to 90 degrees.</p> </li> </ul>"},{"location":"dvl/bluerov-integration-dvl-ugps/","title":"DVL with UGPS for BlueROV2","text":""},{"location":"dvl/bluerov-integration-dvl-ugps/#optimizing-performance-when-concurrently-using-our-dvl-and-ugps-systems","title":"Optimizing Performance when concurrently using our DVL and UGPS Systems","text":""},{"location":"dvl/bluerov-integration-dvl-ugps/#capabilities-of-the-dvl-as-a-standalone-system","title":"Capabilities of the DVL as a Standalone System","text":"<p>The Water Linked DVL can provide accurate velocities relative to the seabed. It has a relatively high update rate and dynamic. For the calculation of an absolute position, the velocities have to be integrated over time with the help of inertial measurement unit (IMU) data. Furthermore, the user has to specify a starting position of this dead-reckoning-algorithm. Alternatively a normal GPS can be used to initialize the position prior to a dive.</p> <p>One advantage of using a DVL only is that no infrastructure outside the ROV (such as antennas, beacons, etc.) is needed. As a downside, small errors in sensor values accumulate over time and the position estimate drifts from the actual position. A typical use case for the DVL is station keeping even in water currents. It also helps to track the approximate ROV position on a map and enables simple autonomous missions.</p>"},{"location":"dvl/bluerov-integration-dvl-ugps/#capabilities-of-the-underwater-gps-as-a-standalone-system","title":"Capabilities of the Underwater GPS as a Standalone System","text":"<p>The Water Linked Underwater GPS is able to provide an absolute position below water. It is based on the combination of a standard GPS to measure the Topside position and the Short Baseline (SBL) acoustic positioning to determine the ROV/locator position relative to the Topside.</p> <p>The characteristic of this combined position estimate is that it is global, with little to no drift over time under the right conditions. The update rate is in general lower compared to the DVL. A typical use case for using the Underwater GPS by itself is to visualize the ROV position on a map for manual control and finding a specific geolocation below water.</p>"},{"location":"dvl/bluerov-integration-dvl-ugps/#enhanced-functionality-with-combined-dvl-and-ugps-integration","title":"Enhanced Functionality with Combined DVL and UGPS Integration","text":"<p>When both sensor types are combined in a good manner they can compensate each other's weak sides. For instance the UGPS helps to compensate for the position drift of the DVL over time. The DVL on the other hand increases the update rate of the position, which is necessary for better control. This is particularly useful if you want to use the positioning not only for visualization during manual operation or position holding but longer autonomous missions (e.g. waypoint navigation). Below section \"Mode DVL+UGPS\" describes how to enable this in the BlueROV control system.</p>"},{"location":"dvl/bluerov-integration-dvl-ugps/#mode-dvlugps-fusing-the-data-of-underwater-gps-and-dvl-for-a-position-estimate-of-the-bluerov","title":"Mode \"DVL+UGPS\": Fusing the data of Underwater GPS and DVL for a position estimate of the BlueROV","text":"<p>The BlueROV uses a highly-customizable autopilot Ardusub. One part of that autopilot is an Extended Kalman filter, which is able to combine inputs from all types of sensors (gyroscope, accelerometer, compass, pressure sensor, GPS, DVL, etc.) to calculate a position estimate. This is then used to either simply show the position on a map in manual mode or as part of a feedback loop to actively control the ROV. This data fusion algorithm is not part of a Water Linked product but is executed in the BlueROV control system. So the user is in full control of the parameters and used algorithm.</p> <p>Before successful sensor fusion of Underwater GPS and DVL the following conditions must be met:</p> <ul> <li>A BlueROV running BlueOS with a version 1.1.0 (stable) or newer.</li> <li>The DVL is installed, configured and tested successfully. Guides can be found here and on the Blue Robotics website</li> <li>Make sure you are running version 1.0.7 or newer of the BlueOS Water Linked DVL extension.   The extension version can be checked / updated in BlueOS by going to Extensions &gt; Installed. The version is shown next to the extension name, see below figure.</li> </ul> <p></p> <ul> <li>The Underwater GPS is installed, configured and tested successfully. The latest UGPS integration-guide can be found here.</li> <li>Make sure you are running version 1.0.7 or newer of the BlueOS Water Linked UGPS extension.</li> <li>The accelerometer, gyroscope, compass and pressure sensor must be calibrated: Calibration of all sensors can be performed from QGroundControl. Detailed steps are described in the BlueROV Software Setup</li> <li>Make sure that the compass calibration was successful by comparing the ROV orientation shown in the map in QGroundControl to the actual ROV orientation. Land-marks like a coast-line or an analogue compass can help.</li> </ul> <p>Note</p> <p>When you want to use the position estimate for control of the ROV and the UGPS Topside is on land, it is highly recommended setting up the Underwater GPS to use static position and static heading mode.  Alternatively when the UGPS Topside position is not static (on a boat or similar) you need to input heading and position data from an external GPS compass. Details can be found here.</p> <p>If you don't follow this advice, the position provided by the Underwater GPS will have more noise (\"jump\" too much) and also drift over time. This might cause the position hold mode to not work properly.</p> <p>The Underwater GPS together with the BlueOS UGPS extension provide a standard deviation of the global position to the autopilot and the Kalman filter. The Kalman filter uses this standard deviation to weight the provided position in relation to other sensor inputs. The standard deviation is currently optimized for static position and static heading mode.</p> <p>The steps to enable sensor fusion are:</p> <ul> <li>To enable fusion of Underwater GPS and DVL, enable both the \"Water Linked DVL\"-extension and \"Water Linked UGPS\"-extension in the extensions manager. You see that they are running when an uptime is shown.</li> </ul> <p></p> <ul> <li>Open the interface of the DVL extension and click the button \"Load parameters for DVL+UGPS\". This will set parameters for the Kalman filter to consider both sensors. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV.</li> </ul> <p></p> <ul> <li>Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS.</li> </ul> <p></p> <ul> <li>If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension.</li> </ul> <p>Now both sensors should be considered for the position estimate of the ROV. You can test this in a simple way by switching the ROV to position hold mode around close (e.g. 3 m) to the UGPS-antenna and in sight. The ROV should stand still. When you now slowly turn the UGPS antenna, the ROV should follow your rotation.</p>"},{"location":"dvl/bluerov-integration-dvl-ugps/#alternative-mode-dvl-only-how-to-base-the-rov-position-estimate-only-on-the-dvl-while-the-underwater-gps-is-running","title":"Alternative mode \"DVL only\": How to base the ROV position estimate only on the DVL while the Underwater GPS is running","text":"<p>This mode can be useful when you experience issues with sensor fusion (Mode \"DVL+UGPS\" above) or not all the described conditions in above section are met. Otherwise, we recommend using Mode \"DVL+UGPS\".</p> <p>In this configuration the BlueROV will base its position estimate updates on velocity input from the DVL as well as accelerometer, gyroscope, compass and pressure sensor but not the Underwater GPS. Although the Underwater GPS is connected and running it will only be used to initialize the global ROV position at the beginning. QGroundControl (or the new Cockpit) will show the ROV position estimate based on the DVL only while the Underwater GPS GUI will show the position based on the Underwater GPS.</p> <p>Note</p> <p>The setup procedure below is very similar to when you only use the DVL without a running Underwater GPS. That case is described here.</p> <ul> <li>Enable both the \"Water Linked DVL\"-extension and \"Water Linked UGPS\"-extension in the extensions manager. You see that they are running when an uptime is shown. Make sure you use the latest versions of both extensions.</li> </ul> <p></p> <ul> <li>Open the interface of the DVL-extension and click the button \"Load parameters for DVL\". This will set parameters for the Kalman filter to ignore the Underwater GPS input. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV.</li> </ul> <p></p> <ul> <li>Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS.</li> </ul> <p></p> <ul> <li>If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension.</li> </ul>"},{"location":"dvl/bluerov-integration-dvl-ugps/#faq-for-sensor-fusion-of-underwater-gps-and-dvl","title":"FAQ for sensor fusion of Underwater GPS and DVL","text":""},{"location":"dvl/bluerov-integration-dvl-ugps/#how-do-i-start-an-autonomous-mission","title":"How do I start an autonomous mission?","text":"<p>Blue Robotics wrote a guide on how to start an autonomous mission with the DVL only. The steps are the same when you use DVL and Underwater GPS together after you followed above guide for Mode \"DVL+UGPS\".</p> <p>At the time of writing (November 2024) QGroundControl is still more suited for advanced usage like missions compared to the new Cockpit.</p>"},{"location":"dvl/bluerov-integration-dvl-ugps/#which-mode-am-i-currently-using-is-underwater-gps-input-enabled-for-sensor-fusion-or-not","title":"Which mode am I currently using? Is Underwater GPS input enabled for sensor fusion or not?","text":"<p>You can check if the correct parameters are set by navigating to \"Autopilot Parameters\" in BlueOS. It shows a searchable list of all currently set parameters.</p> <p>Below table lists both default values of the parameters for two Ardusub versions and which values the DVL extension sets when you click on the respective buttons. The parameter set by the Underwater GPS extension is listed, too.</p> <p>Parameters can be \"not set\" which is shown as an empty cell in the table.</p> Parameter Ardusub 4.5.0 default Ardusub 4.1.2 default DVL Extension, Mode \"DVL+UGPS\" DVL Extension, Mode \"DVL only\" UGPS extension AHRS_EKF_TYPE 3 ekf3 3 ekf3 3 ekf3 3 ekf3 EK2_ENABLE 0 disabled 0 disabled 0 disabled EK3_ENABLE 1 enabled 1 enabled 1 enabled 1 enabled VISO_TYPE 1 mavlink 0 none 1 mavlink 1 mavlink RNGFND1_TYPE 10 mavlink 10 mavlink 10 mavlink 10 mavlink EK3_GPS_TYPE 0 v=3d-pos=2d 3 no-gps EK3_SRC1_POSXY 3 gps 3 gps 3 gps 6 external-nav EK3_SRC1_VELXY 3 gps 3 gps 6 external-nav 6 external-nav EK3_SRC1_POSZ 1 baro 1 baro 1 baro 1 baro GPS_TYPE 1 auto 1 auto 14 mavlink <p>Documentation for Ardusub parameters can be found here.</p> <p>Some parameters in Ardusub require a reboot of the autopilot to take effect while others take effect immediately. If in doubt, reboot the autopilot.</p>"},{"location":"dvl/bluerov-integration-dvl-ugps/#the-rov-moves-back-and-forth-in-position-hold-mode-what-is-wrong","title":"The ROV moves back and forth in position hold mode. What is wrong?","text":"<p>When the ROV holds its position well in mode \"DVL only\" and starts moving back and forth in mode \"DVL+UGPS\" this is due to more than expected noise of the UGPS position. Make sure to use static position and heading of the Underwater GPS Topside for best results.</p>"},{"location":"dvl/bluerov-integration-dvl-ugps/#how-does-the-sensor-fusion-work","title":"How does the sensor fusion work?","text":"<p>This section is for advanced users and developers who try to understand what happens behind the scenes. It contains links to documentation of the relevant open source projects and describes how Water Linked products interact.</p> <ul> <li>The DVL and UGPS extensions are sending messages following the mavlink-protocol to the autopilot, e.g. the message GPS_INPUT.</li> <li>The ROV-specific autopilot is called Ardusub, which is part of a larger project Ardupilot</li> <li>The extended Kalman filter is described in the Ardupilot documentation. The EKF3 implementation is used by default.</li> <li>In the current version of Ardusub together with the navigator flight controller only one EKF-lane is used.</li> </ul>"},{"location":"dvl/bluerov-integration-dvl-ugps/#how-the-blueos-water-linked-dvl-extension-interacts-with-the-autopilot","title":"How the BlueOS Water Linked DVL extension interacts with the autopilot","text":"<ul> <li>This figure illustrates which events trigger which function calls and which mavlink messages:</li> </ul> <ul> <li> <p>When the user sets the vehicle location on the extension map the first time, the origin of the autopilot global position estimate is set (SET_GPS_GLOBAL_ORIGIN). When the latter is already set, the position estimate is updated with GLOBAL_VISION_POSITION_ESTIMATE.</p> </li> <li> <p>The main input from the DVL to the autopilot is the mavlink message VISION_POSITION_DELTA. It contains the change of position and attitude since the last message in body frame of the ROV together with the time interval since the last measurement. This corresponds directly to velocities and angular rates. The figure of merit (FOM) provided by the DVL is scaled to a confidence value in percent.</p> </li> <li> <p>The DVL-internal dead-reckoning exposed through the position_local-TCP-packet is currently not used on a BlueROV. A function in the extension is implemented, but it is disabled. So GLOBAL_VISION_POSITION_ESTIMATE messages are sent based on DVL-measurements.</p> </li> <li> <p>The attitude measured by the DVL-IMU (current_attitude) is sent in the VISION_POSITION_DELTA-message. The attitude values sent in VISION_POSITION_DELTA are currently not considered by the Ardusub autopilot.</p> </li> <li> <p>More details can be found in the source code in the GitHub repository.</p> </li> </ul>"},{"location":"dvl/bluerov-integration-dvl-ugps/#how-the-blueos-water-linked-ugps-extension-interacts-with-the-autopilot","title":"How the BlueOS Water Linked UGPS extension interacts with the autopilot","text":"<p>This is an overview figure of the sent mavlink messages:</p> <p></p> <ul> <li>The main input from the Underwater GPS to the autopilot is the mavlink message GPS_INPUT.</li> <li>The GitHub README provides more details.</li> </ul>"},{"location":"dvl/bluerov-integration/","title":"DVL for BlueROV2","text":""},{"location":"dvl/bluerov-integration/#introduction","title":"Introduction","text":"<p>The Water Linked DVLs are designed to integrate with most ROVs and AUVs through ethernet and/or a serial interface (UART). To minimize the time between receipt of a DVL and having it up and running, the DVLs are shipped with an attached I/O interface, providing ease of connectivity with power, ethernet and serial. However, for most ROVs and AUVs, the DVL has to be integrated with the on-board electronics through a penetrator or a subsea connector.</p> <p>This guide details how the DVL-A50 can be integrated with the BlueROV2. Exactly the same procedure can be carried out for the DVL-A125.</p>"},{"location":"dvl/bluerov-integration/#parts-and-tools","title":"Parts and tools","text":"<p>What parts and tools needed depends on whether you intend to permanently attach the DVL-A50 to the BlueROV2, have it semi-permanently attached, or use a subsea connector for quick installation/removal.</p> <p>This guide details how to permanently attach the DVL-A50 to a BlueROV2.</p>"},{"location":"dvl/bluerov-integration/#you-will-need","title":"You will need","text":"<ul> <li>DVL-A50</li> </ul> <ul> <li>BlueROV2</li> </ul> <ul> <li>Small ethernet switch. The one pictured here is from BlueRobotics, and ideal for use in the BlueROV2.</li> </ul> <ul> <li>DVL-A50 Bracket. This is optional, but protects the DVL-A50 and allows for down to 0 cm minimum altitude.</li> </ul> <p>You will also need:</p> <ul> <li>Hex Key Set from Blue Robotics</li> <li>Bulkhead Wrench from Blue Robotics</li> <li>Plug Wrench from Blue Robotics</li> <li>(Optional) Cable Jacket Stripper from Blue Robotics</li> <li>M10-7.5mm-HC WetLink Penetrator from Blue Robotics</li> <li>Silicone grease</li> <li>5 mm universal drill bit</li> <li>2 x M5x12 mm stainless steel pan head screws (included with BlueROV2 mounting bracket)</li> <li>4 x M3x4 mm stainless steel countersunk flat head screws (included with BlueROV2 mounting bracket)</li> <li>Soldering iron</li> <li>Solder wire</li> <li>Wire cutter</li> <li>Tweezers or nose pliers</li> <li>Solder wick and/or desoldering pump</li> <li>Utility knife</li> <li>Wire stripping tool</li> <li>Zip ties</li> <li>4 x 30 cm (12\") wires (options discussed under Connect DVL-A50 and BlueROV2). If possible, use 2 x red and 2 x black wires.</li> <li>15 cm (6\") ethernet cable</li> </ul>"},{"location":"dvl/bluerov-integration/#preparation","title":"Preparation","text":""},{"location":"dvl/bluerov-integration/#separate-io-interface-from-dvl-a50","title":"Separate I/O Interface from DVL-A50","text":"<p>The first thing you will have to do before going about any of the installation options is to cut the DVL-A50 cable, separating the I/O Interface board. We recommend you do so near the end where the I/O Interface board is to begin with.</p> <p></p> <p>Warning</p> <p>The DVL-A50 cable is permanently attached and non-replaceable inside the DVL-A50. If you cut the cable too short you will either have to splice the cable with another cable, or order a new DVL-A50. Measure twice, cut once!</p>"},{"location":"dvl/bluerov-integration/#attaching-the-bluerov2-mounting-bracket","title":"Attaching the BlueROV2 mounting bracket","text":"<ul> <li>Attach the BlueROV2 mounting bracket to the DVL-A50 using the 4 x M3x6 screws provided with the DVL-A50 BlueROV2 Integration Kit.</li> </ul> <p>The BlueROV2 mounting bracket can be attached to the BlueROV2 in one of the 2 places indicated in the image below (standard BlueROV2).</p> <p>Note</p> <p>In this configuration the DVL-A50 is pointing backwards meaning both the x-direction and the y-direction are flipped. Multiplying the velocity data in x- and y-direction with -1 will flip coordinates back again to the same perspective frame of the BlueROV2.</p> <p></p> <p>If your BlueROV2 has the Heavy Configuration upgrade, the BlueROV2 mounting bracket can be attached such that the DVL-A50 is within the BlueROV2 frame. This allows for a minimum working distance of 0 cm for the DVL-A50.</p> <p></p> <ul> <li>Mark 2 hole positions on the BlueROV2 frame for attaching the BlueROV2 mounting bracket and drill through the frame using a 5 mm universal drill bit.</li> </ul> <p> </p> <p>Check that the BlueROV2 mounting bracket will attach properly to the BlueROV2 frame using 2 x M5x16 mm screws. No need to secure the bracket in place as more work must be done on the cable end.</p> <p></p>"},{"location":"dvl/bluerov-integration/#final-cable-lenght","title":"Final cable lenght","text":"<p>With the DVL-A50 now attached to the BlueROV2 frame, find the appropriate cable length needed by leading the cable back to the penetrator end cap of the BlueROV2 and add the length of the electronics enclosure (30 cm) to the cable. This is the minimum required cable length.</p> <p></p> <p>Tip</p> <p>We recommend adding at least another 30 cm to the cable to provide enough service loop in case the penetrator fails or the leads get damaged.</p> <p>Cut the cable to the final length.</p> <p></p>"},{"location":"dvl/bluerov-integration/#installation","title":"Installation","text":"<p>The DVL-A50 will be permanently installed on the BlueROV2 with the I/O Interface board (supplied with the DVL-A50).</p>"},{"location":"dvl/bluerov-integration/#io-interface-preparation","title":"I/O Interface preparation","text":"<p>To prepare the I/O Interface Board you will need:</p> <ul> <li>Soldering iron</li> <li>Wire cutter</li> <li>Tweezers or nose pliers</li> <li>Solder wick and/or desoldering pump</li> </ul> <p>Cut off the zip tie holding the cable onto the I/O Interface board.</p> <p></p> <p>Cut off the individual wires soldered onto the I/O Interface board. Leave enough wire to grab onto with tweezers or nose pliers.</p> <p></p> <p>Desolder all the cut wires. Use solder wick and/or a desoldering pump to remove any excess solder from the now desoldered through hole pads.</p> <p></p> <p>Warning</p> <p>Using too much force or heat may delaminate the I/O Interface PCB, rendering the I/O Interface board useless.</p>"},{"location":"dvl/bluerov-integration/#adding-a-penetrator","title":"Adding a penetrator","text":"<p>To add a penetrator to the cable you will need:</p> <ul> <li>Plug Wrench from Blue Robotics</li> <li>M10-7.5mm-HC WetLink Penetrator from Blue Robotics</li> <li>(Optional) Cable Jacket Stripper from Blue Robotics</li> <li>Utility knife</li> </ul> <p>Strip off 25-30 cm of the cable jacket using a cable jacket stripper, a utility knife or a sharp blade. Take care not to cut into the leads inside the cable. Blue Robotics has a great guide on cable stripping here.</p> <p></p> <p>Follow the WetLink Penetrator Assembly Guide by BlueRobotics to add a penetrator on the DVL-A50 cable.</p>"},{"location":"dvl/bluerov-integration/#removing-a-blank-penetrator","title":"Removing a blank penetrator","text":"<p>To remove a blank penetrator from your BlueROV2, you will need the following tools:</p> <ul> <li>2.5 mm hex driver</li> <li>Bulkhead Wrench from Blue Robotics</li> </ul> <p>To ensure your ROV is completely powered off, please remove the battery completely from the 3\u201d enclosure and place to the side.</p> <p></p> <p>(Optional) Remove the fairings and buoyancy blocks by removing the self-tapping screws that hold the fairings to the frame.</p> <p></p> <p>Remove the 4\u201d electronics enclosure from the ROV by removing the M3x16 screws that mount the enclosure to the ROV cradle.</p> <p></p> <p>Remove the Vent Plug from the Vent Penetrator Bolt on the electronics enclosure. Remove the 4\u2033 tube and forward dome assembly from the rear end cap.</p> <p></p> <p>Remove a blank penetrator, sush as the one pictured below, from the 4\u201d End Cap with the penetrator wrench.</p> <p></p>"},{"location":"dvl/bluerov-integration/#install-dvl-a50-penetrator","title":"Install DVL-A50 penetrator","text":"<p>Note</p> <p>The following images shows the old penetrator from BlueRobotics. The procedure is the same with the new WetLink penetrators.</p> <p>To install DVL-A50 into the end cap, you will need the following parts and tools:</p> <ul> <li>DVL-A50 with installed cable penetrator</li> <li>Penetrator O-ring (included with M10-7.5mm-HC WetLink Penetrator from Blue Robotics)</li> <li>Bulkhead Wrench from Blue Robotics</li> <li>Silicone Grease</li> <li>Isopropyl Alcohol Wipe</li> </ul> <p>Wipe the exterior surface of the electronics enclosure end cap clean with isopropyl alcohol or isopropyl alcohol wipes, and make sure it is free of any particles in the areas where the penetrator O-ring will sit.</p> <p>Remove the O-ring from the bag</p> <p>Install the O-ring onto the DVL-A50 cable penetrator and apply silicone grease to it.</p> <p> </p> <p>Push the wires throught the hole in the end cap where you previously removed a blank penetrator from.</p> <p></p> <p>Tip</p> <p>Since the penetrator has to be screwed on, adding a bit of tape around the end of the wires helps them stay untangles while turning. Also twisting the DVL-A50 cable in a clock-wise direction will aid in screwing on the penetrator.</p> <p>Screw on the DVL-A50 cable penetrator to the end cap. Tighten to finger tight, then use the penetrator wrench to tighten it an additional ~1/16 of a turn. If you can\u2019t loosen it with your fingers, it is tight enough.</p> <p> </p>"},{"location":"dvl/bluerov-integration/#reinstall-io-interface-board","title":"Reinstall I/O Interface Board","text":"<p>To reinstall the I/O Interface Board onto the DVL-A50 cable you will need:</p> <ul> <li>Wire stripping tool</li> <li>Soldering iron</li> <li>Solder wire</li> <li>Zip tie</li> </ul> <p>With the DVL-A50 penetrator now through the 4\" End Cap, strip off 2-3 mm of the ends of all the wires. Wire sizes are detailed in the table below. The blue pair can be removed as it is not used for the DVL-A50.</p> <p></p> <p>Warning</p> <p>The two wires of a twisted wire pair are fully colored and fully white (the table below shows the white wires having a stripe of the complementing color, this is not the reality and only for reference). Keep track of which white wire is paired with which colored wire! Also note that the wiring in the images below differ from that of the table below. Please follow the table!</p> <p>Re-solder the leads of the DVL-A50 cable to the I/O Interface board following the table below:</p> DVL-A50 cable I/O Interface pad Function Diameter (mm) AWG# GND Power ground 0.6 mm 22 VIN Power in 0.6 mm 22 TD+ Ethernet TX+ 0.6 mm 22 TD- Ethernet TX- 0.4 mm 26 RD+ Ethernet RX+ 0.4 mm 26 RD- Ethernet RX- 0.4 mm 26 TX Serial UART TX 0.4 mm 26 RX Serial UART RX 0.4 mm 26 <p> </p> <p>Zip tie the soldered wires to the I/O Interface board to protect the solder joints.</p> <p></p>"},{"location":"dvl/bluerov-integration/#connect-to-bluerov2","title":"Connect to BlueROV2","text":"<p>To connect the DVL-A50 to the BlueROV2 you will need:</p> <ul> <li>2 x 30 cm (12\") wires for power to the DVL-A50</li> <li>BlueRobotics ethernet switch</li> <li>6\" ethernet cable</li> <li>Zip ties</li> </ul> <p>To provide power to the DVL-A50 you can either use (A) a 2-pin Molex MicroFit3.0 cable assembly, (B) solder on a W\u00fcrth screw terminal, or (C) directly solder on 2 wires to the power pads.</p> <p></p> <ul> <li>Connect VIN to the positive Power Terminal Block inside the BlueROV2 by either stripping off 6-8 mm of the wire and screw it in place, or add a spade terminal for a # 6 screw (M3.5) and screw in place.</li> </ul> <p></p> <ul> <li>Connect GND to the negative Power Terminal Block by either stripping off 6-8 mm of the wire and screw it in place, or add a spade terminal for a # 6 screw (M3.5) and screw in place.</li> </ul> <p></p> <p>Warning</p> <p>The Power Terminal Blocks are unregulated and directly connected to the battery. Any short may generate several amps which will fry most circuits. Check that the wires are secured properly in both ends.</p> <p>Install the BlueRobotics ethernet switch following the Ethernet Switch Installation Guide for the BlueROV2 by BlueRobotics.</p> <p>With power and ethernet switch now sorted, connect a 6\" ethernet cable from the ethernet switch to the IO Interface board.</p> <p>Tip</p> <p>Some thick double-sided sticky tape and zip ties can be used to secure the I/O Interface to the electronics frame inside the BlueROV2.</p>"},{"location":"dvl/bluerov-integration/#reassemble-bluerov2-electronics-enclosure","title":"Reassemble BlueROV2 electronics enclosure","text":"<p>To reassemble your BlueROV2 Electronics Enclosure, you will need the following parts and tools:</p> <ul> <li>4 x M3x16 screws that were placed off to the side during disassembly</li> <li>Silicone Grease</li> <li>2.5 mm hex driver</li> </ul> <p>Reinstall 4\u201d Watertight Enclosure onto ROV with the following steps:</p> <ul> <li>Apply silicone grease to the two radial O-rings on the O-Ring Flange (4\u201d Series) that is attached to the Electronics Tray.</li> <li>Install the Watertight Enclosure (4\u201d Series) with installed Dome End Cap to the O-Ring Flange (4\u201d Series).</li> </ul> <p>Warning</p> <p>Use caution when sliding the 4\" Watertight Enclosure over the electronics as space may be tight (collides with electronics) and wires can get trapped between the 4\" tube and the 4\" end cap.</p> <p>Mount the Electronics Enclosure to the frame using the M3x16 screws so that the dome is on the same side as the front center panels (the center panels without the 3 large holes). Install the M3x16 screws through the clips and into the Enclosure Cradle (4\u201d Series). It is easier to install these screws if the clips are not fully tightened until all screws are through the clips and threading into the Enclosure Cradle (4\u201d Series). This allows clips to rotate so you can find the threaded hole in the Enclosure Cradle (4\u201d Series) easily.</p> <p></p>"},{"location":"dvl/bluerov-integration/#attach-dvl-a50-to-bluerov2","title":"Attach DVL-A50 to BlueROV2","text":"<p>Note</p> <p>The following images show the old version of the DVL-A50 with steel housing. The new housing has the same dimensions as the old.</p> <p>Attach the DVL-A50 to the BlueROV2 using the 2 x M5x16 screws provided with the DVL-A50 BlueROV2 Integration Kit through the two holes you've made previously.</p> <p></p> <p>Excess cable can be bundled together and attached to the BlueROV2 frame using zip ties.</p> <p></p>"},{"location":"dvl/bluerov-integration/#software","title":"Software","text":"<p>The DVL-A50 requires an extension in BlueOS to be able to communicate with the autopilot (Pixhawk or Navigator flight controller). BlueOS has to be updated to BlueOS 1.1.0 or newer to assure that extensions are supported sufficiently.</p> <ul> <li>After the update install the latest BlueOS-Water-Linked-DVL extension from the BlueOS extension manager. It is best to disable the BlueOS \"Water Linked UGPS\"-extension if you have that installed.</li> </ul> <p>Note</p> <p>If you want to use both DVL and UGPS you can find a detailed guide here</p> <p></p> <ul> <li>Open the interface of the DVL-extension and click the button \"Load parameters for DVL\". Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV.</li> </ul> <p></p> <ul> <li>Restart the autopilot for the parameter changes to take effect. It is not necessary to restart BlueOS.</li> </ul> <p></p> <ul> <li>Set the global vehicle position in the DVL extension every time you start the ROV.</li> </ul> <p>Note</p> <p>There is a known bug where the I2C address of the pressure sensor is set wrong, and so depth is not received properly. This can be fixed by setting the parameter <code>BARO_PROBE_EXT</code> to <code>768</code> and then reboot the ROV.</p>"},{"location":"dvl/dead-reckoning/","title":"Dead reckoning","text":""},{"location":"dvl/dead-reckoning/#introduction","title":"Introduction","text":"<p>The DVL-A50 and DVL-A125 run a dead reckoning algorithm which estimates the orientation and position of the DVL. This uses both the velocities which the DVL calculates and its integrated IMU (Inertial Measurement Unit).</p>"},{"location":"dvl/dead-reckoning/#starting-dead-reckoning","title":"Starting dead reckoning","text":"<ol> <li>Calibrate the gyroscope by pressing More -&gt; Calibrate gyro in the GUI whilst the DVL is stationary.</li> <li>Click the 'Reset' button  in the GUI, or send a reset command over the TCP or serial protocol.</li> </ol> <p>Failure to perform gyro calibration will result in less accurate dead reckoning.</p>"},{"location":"dvl/dead-reckoning/#frame","title":"Frame","text":"<p>The position, speed, and roll, pitch, and yaw angles outputted by the dead reckoning algorithm are with respect to the frame defined at time zero (the time of the last reset, or else at start up) by the axes of the vehicle frame.</p>"},{"location":"dvl/dead-reckoning/#speed-and-position","title":"Speed and position","text":"<p>The speed and position of the DVL are calculated by integration of its acceleration, corrected by the velocity it calculates by means of its acoustic signal processing. A Kalman filter is used; the roll, pitch, and yaw angles outputted by the DVL are also part of the input.</p> <p>When the DVL fails in its determination of velocity, speed and position are predicted only by acceleration. This will result in large errors, indicated by an increase in the figure of merit (FOM), which is an estimated standard deviation of the position in the X-Y plane.</p> <p>Note</p> <p>When the DVL is powered on in the air, its position will drift significantly. This should be ignored, and dead reckoning should be started in water when ready.</p> <p>The position of the DVL can be viewed in the GUI dashboard or be fetched by API.</p>"},{"location":"dvl/dead-reckoning/#orientation","title":"Orientation","text":"<p>The calculation of the orientation of the DVL is based upon the accelerometer and gyroscope measurements of its IMU. The orientation is represented by roll, pitch, and yaw angles, and can be viewed in the GUI dashboard or be fetched by API.</p> <ul> <li>Roll is a rotation around the X axis of the DVL</li> <li>Pitch is a rotation around the Y axis of the DVL</li> <li>Yaw is a rotation around the Z axis of the DVL</li> </ul> <p>For orientation to function correctly, the DVL must be deployed in accordance with its axis conventions.</p> <p>Note</p> <p>A small tilt in the DVL mounting, though it will result in almost no position error with respect to the X and Y axes, may lead a significant error with respect to the Z axis. This change will be a projection of the true horizontal position onto the Z axis. For example, when the DVL is mounted with 5\u00b0 tilt and the horizontal displacement of the DVL is 100m since last reset, the total displayed distance in the X, Y plane will be 99.6 m, and the Z position will be \u00b19 m.</p> <p>When dead reckoning is reset, the roll, pitch, and yaw angles are set to zero.</p>"},{"location":"dvl/dead-reckoning/#yaw-drift","title":"Yaw drift","text":"<p>Note</p> <p>The yaw angle may experience drift. This drift can be decreased to 0.1-0.3\u00b0 per minute by calibration of the gyroscope.</p>"},{"location":"dvl/dvl-a125/","title":"DVL-A125","text":"<p>Buy DVL-A125 here!</p> <p></p>"},{"location":"dvl/dvl-a125/#description","title":"Description","text":"<p>The DVL-A125 is the next step up from the DVL-A50, providing even better performance at greater distances while still keeping a small form factor relative to competing DVLs.</p> <p>The DVL-A125 builds on the already impressive feats of the DVL-A50 with its increased performance, small 4 beam setup, open interface protocol and mid-to-low cost.</p> <p>The DVL estimates velocity relative to the sea bottom by sending acoustic waves from the four angled transducers and then measure the frequency shift (doppler effect) from the received echo. By combining the measurements of all four transducers and the time between each acoustic pulse, it is possible to very accurately estimate the speed and direction of movement.</p> <p>Tip</p> <p>Keep the DVL-A125 in a bucket of water to ensure sufficient cooling when using the DVL on a workbench.</p>"},{"location":"dvl/dvl-a125/#dimensions","title":"Dimensions","text":""},{"location":"dvl/dvl-a125/#cable-dimensions","title":"Cable dimensions","text":"<p>Delivered cable length: 3.0m</p> <p>Cable diameter: 7.8mm +/- 0.2mm</p>"},{"location":"dvl/dvl-a125/#mounting-holes","title":"Mounting Holes","text":""},{"location":"dvl/dvl-a125/#transducer-numbering","title":"Transducer numbering","text":""},{"location":"dvl/dvl-a125/#transducer-beam-width","title":"Transducer beam width","text":"<p>Half-power beam width is 4.1\u00b0</p>"},{"location":"dvl/dvl-a125/#line-of-sight","title":"Line of sight","text":""},{"location":"dvl/dvl-a125/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"dvl/dvl-a50/","title":"DVL-A50","text":"<p>Buy DVL-A50 here!</p> <p></p>"},{"location":"dvl/dvl-a50/#description","title":"Description","text":"<p>The DVL-A50 is \u2013 by far \u2013 the world\u2019s smallest commercially available Doppler Velocity Log.</p> <p>The A50 is establishing a new market standard with its high performance, ultra-small 4 beam setup, open interface protocol and low cost.</p> <p>The DVL estimates velocity relative to the sea bottom by sending acoustic waves from the four angled transducers and then measure the frequency shift (doppler effect) from the received echo. By combining the measurements of all four transducers and the time between each acoustic pulse, it is possible to very accurately estimate the speed and direction of movement.</p> <p>Note</p> <p>The DVL-A50 uses a constant speed of sound equal to 1500 m/s (Release 1.3.1). This is configurable for the Performance edition.</p> <p>Tip</p> <p>Keep the DVL-A50 in a bucket of water to ensure sufficient cooling when using the DVL on a workbench.</p>"},{"location":"dvl/dvl-a50/#dimensions","title":"Dimensions","text":""},{"location":"dvl/dvl-a50/#cable-dimensions","title":"Cable dimensions","text":"<p>Delivered cable length: 3.0m</p> <p>Cable diameter:  6.8mm +/- 0.2mm </p>"},{"location":"dvl/dvl-a50/#mounting-holes","title":"Mounting Holes","text":""},{"location":"dvl/dvl-a50/#transducer-numbering","title":"Transducer numbering","text":""},{"location":"dvl/dvl-a50/#transducer-beam-width","title":"Transducer beam width","text":"<p>Half-power beam width is 4.4\u00b0</p>"},{"location":"dvl/dvl-a50/#line-of-sight","title":"Line of sight","text":""},{"location":"dvl/dvl-a50/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"dvl/dvl-protocol/","title":"Protocol","text":""},{"location":"dvl/dvl-protocol/#water-linked-dvl-protocol","title":"Water Linked DVL protocol","text":"<p>Describes the Water Linked DVL protocols (serial and ethernet).</p>"},{"location":"dvl/dvl-protocol/#terminology","title":"Terminology","text":"<ul> <li>DVL - Doppler Velocity Log - Uses hydro-acoustic beams to measure the velocity at which the DVL is moving across a surface (typically an unmoving one such as the sea bottom), and the distance to this surface.</li> <li>ACK - Acknowledgement. The command issued was successful.</li> <li>NAK - Negative acknowledgement. The command issued failed.</li> <li>Ping - A pulse of sound sent by the DVL</li> <li>Time of validity - Timestamp of the surface reflection ('center of ping')</li> <li>Time of transmission - Timestamp taken directly before sending data over the serial or TCP protocols. The difference between time of transmission and time of validity includes both the time for the acoustic wave to travel from the surface from which it was reflected back to the DVL, and the decoding and processing of this signal internally in the DVL.</li> </ul>"},{"location":"dvl/dvl-protocol/#version","title":"Version","text":"<p>This document describes serial protocol version <code>2.6.x</code> (major.minor.patch) and JSON protocol <code>json_v3.1</code> (major.minor):</p> <ul> <li>MAJOR version increments represent incompatible API changes</li> <li>MINOR version increments represent additional backwards-compatible functionality</li> <li>PATCH version increments represent backwards-compatible bug fixes</li> </ul>"},{"location":"dvl/dvl-protocol/#version-history-overview","title":"Version history overview","text":"Software release Serial protocol version Ethernet protocol version Main protocol improvements 2.6.1 2.6.0 json_v3.1 Serial baud rate configurable. Add PD4 protocol support in serial 'wcp' command. Some serial protocol names changed. 2.5.2 2.5.0 json_v3.1 Add PD4 protocol support (experimental) 2.4.4 2.5.0 json_v3.1 Change gyro calibration to store persistently. Note: gyro calibration commands now takes up to 15 seconds. 2.4.0 2.5.0 json_v3.1 Add ability to trigger pings (JSON/Serial), add configuration for periodic cycling (JSON/Serial) 2.2.1 2.4.0 json_v3 Add serial output protocol configuration, range mode configuration and calibrate gyro command, Fix missing line ending in configuration (JSON), fix dark mode enabled naming inconsistency (JSON), change speed of sound and mounting rotation offset from integer to float 2.1.0 2.3.0 json_v3 Add configuration, add time_of_validity/time_of_transmission, add covariance (JSON) 2.0.8 2.2.0 json_v2 Add position estimation, Add output of orientation angles 1.6.0 2.1.0 - Initial (velocity only)"},{"location":"dvl/dvl-protocol/#json-protocol-tcp","title":"JSON protocol (TCP)","text":""},{"location":"dvl/dvl-protocol/#overview","title":"Overview","text":"<p>The DVL supports sending velocity, transducer, and position updates using the Transmission Control Protocol (TCP). The DVL runs a TCP server on port 16171.</p> <p>The format of each packet is JSON.</p>"},{"location":"dvl/dvl-protocol/#velocity-and-transducer-report","title":"Velocity-and-transducer report","text":"<p>A velocity-and-transducer report is sent for each velocity calculation of the DVL. The rate depends on the altitude of the DVL (distance to the sea bottom or other reflecting surface), but will be in the range 2-15 Hz.</p> <p>The X, Y, and Z axes are with respect to body frame of the DVL, or the vehicle frame if the DVL is mounted on a vehicle at an angle, specified as a 'mounting rotation offset', from the forward axis of the vehicle.</p> <p>The messages are delimited by newline.</p> Variable Description time Milliseconds since last velocity report (ms) vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) fom Figure of merit, a measure of the accuracy of the velocities (m/s) covariance Covariance matrix for the velocities. The figure of merit is calculated from this (entries in (m/s)^2) altitude Distance to the reflecting surface along the Z axis (m) transducers Is a list containing information from each transducer: [id, velocity (m/s), distance (m), rssi (dBm), nsd (dBm), beam_valid (True/False)] velocity_valid If true, the DVL has a lock on the reflecting surface, and the altitude and velocities are valid (True/False) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. time_of_validity Timestamp of the surface reflection, aka 'center of ping' (Unix timestamp in microseconds) time_of_transmission Timestamp from immediately before sending of the report over TCP (Unix timestamp in microseconds) format Format type and version for this report: <code>json_v3.1</code> type Report type: <code>velocity</code> <p>Example of TCP report (indented for legibility)</p> <pre><code>{\n  \"time\": 106.3935775756836,\n  \"vx\": -3.713480691658333e-05,\n  \"vy\": 5.703703573090024e-05,\n  \"vz\": 2.4990416932269e-05,\n  \"fom\": 0.00016016385052353144,\n  \"covariance\": [\n    [\n      2.4471841442164077e-08,\n      -3.3937477272871774e-09,\n      -1.6659699175747278e-09\n    ],\n    [\n      -3.3937477272871774e-09,\n      1.4654466085062268e-08,\n      4.0409570134514183e-10\n    ],\n    [\n      -1.6659699175747278e-09,\n      4.0409570134514183e-10,\n      1.5971971523143225e-09\n    ]\n  ],\n  \"altitude\": 0.4949815273284912,\n  \"transducers\": [\n    {\n      \"id\": 0,\n      \"velocity\": 0.00010825289791682735,\n      \"distance\": 0.5568000078201294,\n      \"rssi\": -30.494251251220703,\n      \"nsd\": -88.73271179199219,\n      \"beam_valid\": true\n    },\n    {\n      \"id\": 1,\n      \"velocity\": -1.4719001228513662e-05,\n      \"distance\": 0.5663999915122986,\n      \"rssi\": -31.095735549926758,\n      \"nsd\": -89.5116958618164,\n      \"beam_valid\": true\n    },\n    {\n      \"id\": 2,\n      \"velocity\": 2.7863150535267778e-05,\n      \"distance\": 0.537600040435791,\n      \"rssi\": -27.180519104003906,\n      \"nsd\": -96.98075103759766,\n      \"beam_valid\": true\n    },\n    {\n      \"id\": 3,\n      \"velocity\": 1.9419496311456896e-05,\n      \"distance\": 0.5472000241279602,\n      \"rssi\": -28.006759643554688,\n      \"nsd\": -88.32147216796875,\n      \"beam_valid\": true\n    }\n  ],\n  \"velocity_valid\": true,\n  \"status\": 0,\n  \"format\": \"json_v3.1\",\n  \"type\": \"velocity\",\n  \"time_of_validity\": 1638191471563017,\n  \"time_of_transmission\": 1638191471752336\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#dead-reckoning-report","title":"Dead reckoning report","text":"<p>A dead reckoning report outputs the current speed, position, and orientation of the DVL as calculated by dead reckoning, with respect to a frame defined by the axes of the DVL's body frame, or vehicle frame if a mounting rotation offset is set, at the start of the dead reckoning run. The expected update rate is 5 Hz.</p> Variable Description ts Time stamp of report (Unix timestamp in seconds) x Distance in X direction (m) y Distance in Y direction (m) z Distance in downward direction (m) std Standard deviation (figure of merit) for position (m) roll Rotation around X axis (degrees) pitch Rotation around Y axis (degrees) yaw Rotation around Z axis, i.e. heading (degrees) type Report type: <code>position_local</code> status Reports if there are any issues with the DVL (0 if no errors, 1 otherwise) format Format type and version for this report: <code>json_v3</code> <p>Example of a dead reckoning report.</p> <pre><code>{\n  \"ts\": 49056.809,\n  \"x\": 12.43563613697886467,\n  \"y\": 64.617631152402609587,\n  \"z\": 1.767641898933798075,\n  \"std\": 0.001959984190762043,\n  \"roll\": 0.6173566579818726,\n  \"pitch\": 0.6173566579818726,\n  \"yaw\": 0.6173566579818726,\n  \"type\": \"position_local\",\n  \"status\": 0,\n  \"format\": \"json_v3.1\"\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#reset-dead-reckoning","title":"Reset dead reckoning","text":"<p>Dead reckoning can be reset by issuing the <code>reset_dead_reckoning</code> command:</p> <pre><code>{\"command\": \"reset_dead_reckoning\"}\n</code></pre> <p>If the request is successfully received the response will have 'success' set to 'true'. The dead reckoning will have a delay of approximately 50ms until the positioning values being zeroed out. If the response is unsuccessful, the 'success' will be 'false' and a non-empty describing text will be returned in 'error_message'.</p> <pre><code>{\n  \"response_to\":\"reset_dead_reckoning\",\n  \"success\": true,\n  \"error_message\": \"\",\n  \"result\": null,\n  \"format\": \"json_v3.1\",\n  \"type\": \"response\"\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#calibrate-gyro","title":"Calibrate gyro","text":"<p>The gyro can be calibrated by issuing the <code>calibrate_gyro</code> command:</p> <pre><code>{\"command\":\"calibrate_gyro\"}\n</code></pre> <p>The response will be as follows if the calibration is successful. If unsuccessful, <code>success</code> will be <code>false</code>, and a non-empty <code>error_message</code> will be provided.</p> <pre><code>{\n  \"response_to\": \"calibrate_gyro\",\n  \"success\": true,\n  \"error_message\": \"\",\n  \"result\": null,\n  \"format\": \"json_v3.1\",\n  \"type\": \"response\"\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#trigger-ping","title":"Trigger ping","text":"<p>In setups where multiple acoustic sensors are used it can be useful to control the pinging of each acoustic sensor individually. By setting the configuration <code>acoustic_enabled = false</code> the pinging of the DVL can be externally controlled. Up to 15 external trigger commands can be queued by issuing the <code>trigger_ping</code> command. The DVL will execute each ping in quick succession until no more commands are in the queue.</p> <pre><code>{\"command\":\"trigger_ping\"}\n</code></pre> <p>The response will be as follows if the calibration is successful. If queue is full, <code>success</code> will be <code>false</code>, and a non-empty <code>error_message</code> will be provided.</p> <pre><code>{\n  \"response_to\": \"trigger_ping\",\n  \"success\": true,\n  \"error_message\": \"\",\n  \"result\": null,\n  \"format\": \"json_v3.1\",\n  \"type\": \"response\"\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#configuration-over-json","title":"Configuration over JSON","text":""},{"location":"dvl/dvl-protocol/#configuration-parameters","title":"Configuration parameters","text":"Variable Description speed_of_sound Speed of sound (1000-2000 m/s). Integer mounting_rotation_offset See the definition of the vehicle frame of the DVL. Typically 0, but can be set to be non-zero if the forward axis of the DVL is not aligned with the forward axis of a vehicle on which it is mounted (0-360 degrees). Integer acoustic_enabled <code>true</code> for normal operation of the DVL,<code>false</code> when the sending of acoustic waves from the DVL is disabled (e.g. to save power or slow down its heating up in air) dark_mode_enabled <code>false</code> when the LED operates as normal, <code>true</code> for no blinking of the LED (e.g. if the LED is interfering with a camera) range_mode <code>auto</code> when operating as normal, otherwise see range mode configuration periodic_cycling_enabled <code>true</code> for normal operation where the DVL periodically searches for bottom lock shorter than the existing bottom lock, <code>false</code> if periodic cycling is disabled"},{"location":"dvl/dvl-protocol/#fetching-current-configuration","title":"Fetching current configuration","text":"<p>The current configuration of the DVL can be obtained by issuing the <code>get_config</code> command:</p> <pre><code>{\"command\": \"get_config\"}\n</code></pre> <p>If the configuration is successfully fetched, the response will be in the following format. If not, <code>success</code> will be false, a non-empty <code>error_message</code> string will be provided, and <code>result</code> will be <code>null</code>.</p> <pre><code>{\n  \"response_to\":\"get_config\",\n  \"success\":true,\n  \"error_message\":\"\",\n  \"result\":{\n    \"speed_of_sound\":1475.00,\n    \"acoustic_enabled\":true,\n    \"dark_mode_enabled\":false,\n    \"mounting_rotation_offset\":20.00,\n    \"range_mode\":\"auto\",\n    \"periodic_cycling_enabled\":true\n  },\n  \"format\":\"json_v3.1\",\n  \"type\":\"response\"\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#setting-configuration-parameters","title":"Setting configuration parameters","text":"<p>Setting of configuration parameters can be carried out by issuing a <code>set_config</code> in the following format, including those parameters which are to be set:</p> <pre><code>{\"command\":\"set_config\",\"parameters\":{\"speed_of_sound\":1480}}\n</code></pre> <p>If the parameters are successfully set, the response will be in the following format. If not, <code>success</code> will be false, and a non-empty <code>error_message</code> string will be provided.</p> <pre><code>{\n  \"response_to\": \"set_config\",\n  \"success\": true,\n  \"error_message\": \"\",\n  \"result\" :null,\n  \"format\": \"json_v3.1\",\n  \"type\": \"response\"\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#serial-protocol","title":"Serial Protocol","text":""},{"location":"dvl/dvl-protocol/#overview_1","title":"Overview","text":"<p>The default serial communication format is 115200 8-N-1 (no hardware flow control). Release 2.6.1 and later allow different baud rates through GUI configuration.</p> <p>Packets sent to and received from the DVL start with a <code>w</code> and end with LF, CR+LF, or CR. The packet format is:</p> Start byte Direction Command Options (0 to many) Checksum End byte <code>w</code> <code>c</code> or <code>r</code> <code>x</code> <code>,[option]</code> <code>*xx</code> <code>\\n</code>, <code>\\r\\n</code>, or <code>\\r</code> <p><code>Direction</code> is <code>c</code> (short for 'command') for packets sent to the DVL, and <code>r</code> (short for 'response') for packets sent from the DVL. The commands can be sent from a terminal program that supports sending a full line at a time. The timeout between characters is approximately 10 ms.</p> <p>Note</p> <p>Please verify the baud rate configuration in the GUI if you are unable to communicate with the default baud rate.</p> <p>Note</p> <p>The checksum is optional when sending commands to the DVL. The DVL always returns a checksum. The checksum algorithm is CRC-8 and it is formatted as a hexadecimal number using 2 lower-case characters (ex: <code>*c3</code>). See below for details.</p>"},{"location":"dvl/dvl-protocol/#command-overview","title":"Command overview","text":"<p>The commands in the table are shown without the checksum and without the mandatory line ending (any of <code>\\n</code>, <code>\\r\\n</code>, or <code>\\r</code>) for readability. In all cases, the response to a submitted command may be <code>wrn</code>, <code>wr?</code>, or <code>wr!</code> (see below for details), but only the format of a successful response is listed.</p> Command Description Response Description <code>wcv</code> Get protocol version <code>wrv,</code>[major],[minor],[patch] Protocol version. eg: <code>wrv,2.5.0</code> <code>wcw</code> Get product detail <code>wrw,</code>[name],[version],[chipID],[IP address] Where type is dvl, name is product name, version is software version, chip ID is the chip ID and optionally the IP address if connected to DHCP server: eg: <code>wrw,dvl-a50,2.2.1,0xfedcba98765432</code> or <code>wrw,dvl-a50,2.2.1,0xfedcba98765432,10.11.12.140</code> <code>wcs,</code>[configuration parameters] Set configuration parameters <code>wra</code> Successfully set the specified configuration parameters. See Configuration for details <code>wcc</code> Get current configuration <code>wrc,</code>[configuration parameters] Entire current configuration. See Configuration for details <code>wcr</code> Reset dead reckoning <code>wra</code> Successfully started a new dead reckoning run <code>wcx</code> Trigger ping <code>wra</code> Successfully queued a ping <code>wcg</code> Calibrate gyro <code>wra</code> Successfully calibrated gyro <code>wcp</code> Change serial output protocol <code>wra</code> Successfully changed output protocol <code>wrz,</code>[details below] Velocities calculated <code>wru,</code>[details below] Transducer information <code>wrp,</code>[details below] Dead reckoning report <code>wrx,</code>[details below] DEPRECATED: Velocities calculated (old format) <code>wrt,</code>[details below] DEPRECATED: Transducer information (old format) <code>wr?</code> Malformed request: packet cannot be understood or no newline received before timeout <code>wr!</code> Malformed request: packet does not match the given checksum <code>wrn</code> Not acknowledged (nack): an error occurred when handling the packet"},{"location":"dvl/dvl-protocol/#velocity-report-wrz","title":"Velocity report (wrz)","text":"<p>A velocity report is outputted for each velocity calculation of the DVL. The rate depends on the altitude of the DVL (distance to the sea bottom or other reflecting surface), but will be in the range 2-15 Hz.</p> <p>The X, Y, and Z axes are with respect to body frame of the DVL, or the vehicle frame if the DVL is mounted on a vehicle at an angle, specified as a 'mounting rotation offset', from the forward axis of the vehicle.</p> <p>The report has the following format: <code>wrz,</code>[vx],[vy],[vz],[valid],[altitude],[fom],[covariance],[time_of_validity],[time_of_transmission],[time],[status]</p> Variable Description vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) valid If <code>y</code>, the DVL has a lock on the reflecting surface, and the altitude and velocities are valid (y/n) altitude Measured altitude to the bottom (m) fom Figure of merit, a measure of the accuracy of the velocities (m/s) covariance Covariance matrix for the velocities. The figure of merit is calculated from this. 9 entries ((m/s)^2) separated by ; time_of_validity Timestamp of the surface reflection, aka 'center of ping' (Unix timestamp in microseconds) time_of_transmission Timestamp from immediately before sending of the report over TCP (Unix timestamp in microseconds) time Milliseconds since last velocity report (ms) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. <p>Example where all velocities are valid:</p> <pre><code>wrz,0.120,-0.400,2.000,y,1.30,1.855,1e-07;0;1.4;0;1.2;0;0.2;0;1e+09,7,14,123.00,1*50\n</code></pre>"},{"location":"dvl/dvl-protocol/#transducer-report-wru","title":"Transducer report (wru)","text":"<p>A transducer report is outputted for each of the four transducers of the DVL for each velocity calculation of the DVL. The rate will be the same as that of the velocity report. If the transducer did not receive a signal which could be successfully decoded, <code>distance</code> will be set to -1, and <code>velocity</code> will be set to 0. RSSI and NSD will be outputted in all cases.</p> <p>The report has the following format: <code>wru,</code>[id],[velocity],[distance],[rssi],[nsd]</p> Variable Description id Transducer number velocity Velocity in the direction of the transducer (m/s) distance Distance (parallel to the transducer beam, i.e. not the vertical distance) to the reflecting surface from this transducer (m) rssi Received signal strength indicator: strength of the signal received by this transducer (dBm) nsd Noise spectral density: strength of the background noise received by this transducer (dBm) <p>Example where all data is valid:</p> <pre><code>wru,0,0.070,1.10,-40,-95*9c\nwru,1,-0.500,1.25,-62,-104*f0\nwru,2,2.200,1.40,-56,-98*18\nwru,3,1.800,1.35,-58,-96*a3\n</code></pre>"},{"location":"dvl/dvl-protocol/#dead-reckoning-report-wrp","title":"Dead reckoning report (wrp)","text":"<p>A dead reckoning report outputs the current speed, position, and orientation of the DVL as calculated by dead reckoning, with respect to a frame defined by the axes of the DVL's body frame, or vehicle frame if a mounting rotation offset is set, at the start of the dead reckoning run. The expected update rate is 5 Hz.</p> <p>The format is: <code>wrp,</code>[time_stamp],[x],[y],[z],[pos_std],[roll],[pitch],[yaw],[status]</p> Variable Description time_stamp Time stamp of report (Unix timestamp in seconds) x Distance in X direction (m) y Distance in Y direction (m) z Distance in downward direction (m) pos_std Standard deviation (Figure of merit) for position (m) roll Rotation around X axis (degrees) pitch Rotation around Y axis (degrees) yaw Rotation around Z axis, i.e. heading (degrees) status Reports if there are any issues with the DVL (0 if no errors, 1 otherwise) <p>Example:</p> <pre><code>wrp,49056.809,0.41,0.15,1.23,0.4,53.9,13.0,19.3,0*de\nwrp,49057.269,0.39,0.18,1.23,0.4,53.9,13.0,19.3,0*e2\n</code></pre>"},{"location":"dvl/dvl-protocol/#reset-dead-reckoning-wcr","title":"Reset dead reckoning (wcr)","text":"<p>Dead reckoning can be reset by issuing the <code>wcr</code> command. The reply will be an ack (<code>wra</code>) if the reset is successful, and a nak (<code>wrn</code>) if not.</p>"},{"location":"dvl/dvl-protocol/#calibrate-gyro-wcg","title":"Calibrate gyro (wcg)","text":"<p>The gyro can be calibrated by issuing the <code>wcg</code> command.  The reply will be an ack (<code>wra</code>) if the reset is successful, and a nak (<code>wrn</code>) if not.</p>"},{"location":"dvl/dvl-protocol/#trigger-ping-wcx","title":"Trigger ping (wcx)","text":"<p>In setups where multiple acoustic sensors are used it can be useful to control the pinging of each acoustic sensor individually. By setting the configuration <code>acoustic_enabled = n</code> the pinging of the DVL can be externally controlled. Up to 15 external trigger commands can be queued by issuing the <code>wcx</code> command. The DVL will execute each ping in quick succession until no more commands are in the queue.</p> <p>The reply will be an ack (<code>wra</code>) if the command is successful, and a nak (<code>wrn</code>) if queue is full.</p>"},{"location":"dvl/dvl-protocol/#change-serial-output-protocol-wcp","title":"Change serial output protocol (wcp)","text":"<p>The serial output protocol in use can configured by issuing the <code>wcp</code> command. The selected protocol is persistent over reboots.</p> <pre><code>wcp,[protocol number]\n</code></pre> <p>The supported protocols are:</p> Protocol number Name Description 0 Output disabled No output on serial. Recommended if serial port is not used to lower latency on ethernet protocols. 1 WL - Serial V1 and V2 All output including the deprecated <code>wrx</code> and <code>wrt</code> sentences. 2 PD6 PD6 protocol output. See PD6 protocol description 3 WL - Serial V2 All output excluding the deprecated <code>wrx</code> and <code>wrt</code> sentences. 4 Not used Not used 5 Not used Not used 6 PD4 PD4 protocol output See PD4 protocol description <p>The reply will be an ack (<code>wra</code>) if the protocol change is successful, and a nak (<code>wrn</code>) if not.</p> <p>Example setting configuring output to use protocol number 3:</p> <pre><code>wcp,3\n</code></pre> <p>Note</p> <p>Prior to release 2.6.1 protocol number 1 was named <code>Backward compatible</code> and protocol number 3 was named <code>Latest</code>. There is no change in functionality.</p>"},{"location":"dvl/dvl-protocol/#configuration-over-serial","title":"Configuration over serial","text":""},{"location":"dvl/dvl-protocol/#configuration-parameters_1","title":"Configuration parameters","text":"Variable Description speed_of_sound Speed of sound (1000-2000 m/s). Float mounting_rotation_offset See the definition of the vehicle frame of the DVL. Typically 0, but can be set to be non-zero if the forward axis of the DVL is not aligned with the forward axis of a vehicle on which it is mounted (0-360 degrees). Float acoustic_enabled <code>y</code> for normal operation of the DVL,<code>n</code> when the sending of acoustic waves from the DVL is disabled (e.g. to save power or slow down its heating up in air) dark_mode_enabled <code>n</code> when the LED operates as normal. <code>y</code> for no blinking of LED (e.g. if the LED is interfering with a camera) range_mode <code>auto</code> when operating as normal, otherwise see range mode configuration periodic_cycling_enabled <code>y</code> when operating as normal, otherwise <code>n</code>. See Configuration over JSON for details <p>Note</p> <p>For backward compatibility the <code>range_mode</code> and <code>periodic_cycling_enabled</code> parameters are optional when setting the configuration. They will always be returned when reading the configuration (<code>wcc</code>). Speed of sound and mounting rotation was changed from integer to float in serial protocol 2.4.0</p>"},{"location":"dvl/dvl-protocol/#fetching-current-configuration_1","title":"Fetching current configuration","text":"<p>The current configuration of the DVL can be obtained by issuing the <code>wcc</code> command.</p> <p>If the configuration is successfully fetched, the response will be in the following format. If not, a nak <code>wrn</code> will be returned.</p> <pre><code>wrc,[speed_of_sound],[mounting_rotation_offset],[acoustic_enabled],[dark_mode_enabled],[range_mode],[periodic_cycling_enabled]\n</code></pre>"},{"location":"dvl/dvl-protocol/#setting-configuration-parameters_1","title":"Setting configuration parameters","text":"<p>Setting of configuration parameters can be carried out by issuing the <code>wcs</code> command in the following format.</p> <pre><code>wcs,[speed_of_sound],[mounting_rotation_offset],[acoustic_enabled],[dark_mode_enabled],[range_mode],[periodic_cycling_enabled]\n</code></pre> <p>Those parameters which are not to be set can be left blank.</p> <p>Example for setting dark mode without changing the other parameters:</p> <pre><code>wcs,,,,y,,\n</code></pre> <p>Example for setting speed of sound to 1450 m/s and disabling acoustics, without changing the other parameters:</p> <pre><code>wcs,1450,,n,,,\n</code></pre> <p>The response will be an ack <code>wra</code> if the parameters are successfully set, a nak <code>wrn</code> if the command was successfully parsed but the parameters were not successfully set, and a malformed request <code>wr?</code> if the command was not successfully parsed, e.g. if the wrong number of parameters was used, or either <code>speed_of_sound</code> or <code>mounting_rotation_offset</code> was not an integer.</p> <p>The new configuration will not be returned in the response, but can be obtained by issuing a <code>wcc</code> command as above.</p>"},{"location":"dvl/dvl-protocol/#velocity-report-old-format-wrx-deprecated","title":"Velocity report, old format (wrx) [Deprecated]","text":"<p>Same purpose as the velocity report, but in an older format:</p> <p><code>wrx,</code>[time],[vx],[vy],[vz],[fom],[altitude],[valid],[status]</p> Variable Description time Milliseconds since last velocity report (ms) vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) fom Figure of merit, a measure of the accuracy of the velocities  (m/s) altitude Distance to the reflecting surface along Z axis (m) valid If <code>y</code>, the DVL has lock on the reflecting surface, and the altitude and velocities are valid (y/n) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. <p>Example where velocities are valid:</p> <pre><code>wrx,112.83,0.007,0.017,0.006,0.000,0.93,y,0*d2\nwrx,140.43,0.008,0.021,0.012,0.000,0.92,y,0*b7\nwrx,118.47,0.009,0.020,0.013,0.000,0.92,y,0*54\n</code></pre> <p>Example where velocities and altitude are not valid and a high temperature warning occurs:</p> <pre><code>wrx,1075.51,0.000,0.000,0.000,2.707,-1.00,n,1*04\nwrx,1249.29,0.000,0.000,0.000,2.707,-1.00,n,1*6a\nwrx,1164.94,0.000,0.000,0.000,2.707,-1.00,n,1*39\n</code></pre>"},{"location":"dvl/dvl-protocol/#transducer-report-old-format-wrt-deprecated","title":"Transducer report, old format (wrt) [Deprecated]","text":"<p>Same purpose as the transducer report, but in an older format, and combining the data of all four transducers:</p> <p><code>wrt,</code>[dist_1],[dist_2],[dist_3],[dist_4]</p> Variable Description dist_1 Distance (parallel to the transducer beam, i.e. not the vertical distance) to reflecting surface from transducer 1 (m) dist_2 Distance to reflecting surface from transducer 2 (m) dist_3 Distance to reflecting surface from transducer 3 (m) dist_4 Distance to reflecting surface from transducer 4 (m) <p>Example where all distances are valid:</p> <pre><code>wrt,15.00,15.20,14.90,14.20*b1\nwrt,14.90,15.10,14.80,14.10*ac\n</code></pre> <p>Example where distance is not valid for transducer 4:</p> <pre><code>wrt,14.90,15.10,14.80,-1.00*53\nwrt,15.00,15.20,14.90,-1.00*71\n</code></pre>"},{"location":"dvl/dvl-protocol/#checksum","title":"Checksum","text":"<p>The checksum algorithm is CRC-8 (Polynomal: 0x07, Init: 0x00, RefIn/RefOut: false, XorOut: 0x00, Check: 0xf4). Checksum is formatted as a hexadecimal number using 2 lower-case characters (ex: <code>*c3</code>).</p> <p>Compatible implementations:</p> <ul> <li>Python 3: crcmod <code>crcmod.predefined.mkPredefinedCrcFun(\"crc-8\")</code></li> <li>Golang: github.com/sigurn/crc8 <code>crc8.MakeTable(crc8.CRC8)</code></li> </ul> <p>Example for how to verify checksum using Python 3 and crcmod:</p> <pre><code>crc = crcmod.predefined.mkPredefinedCrcFun(\"crc-8\")\nsentence = b\"wrx,1164.94,0.000,0.000,0.000,2.707,-1.00,n,1*39\"\ndata, checksum = sentence.split(b\"*\")\n\nif crc(data) == int(checksum, 16):\n    print(\"CRC valid\")\nelse:\n    print(\"CRC invalid\")\n</code></pre> <p>The crcmod python package can generate code in other languages. Here is an example (subject to the MIT License) for C which should be straightforward to adapt to other languages.</p> <pre><code>static const uint8_t lookup_table[256] = {\n    0x00U,0x07U,0x0EU,0x09U,0x1CU,0x1BU,0x12U,0x15U,\n    0x38U,0x3FU,0x36U,0x31U,0x24U,0x23U,0x2AU,0x2DU,\n    0x70U,0x77U,0x7EU,0x79U,0x6CU,0x6BU,0x62U,0x65U,\n    0x48U,0x4FU,0x46U,0x41U,0x54U,0x53U,0x5AU,0x5DU,\n    0xE0U,0xE7U,0xEEU,0xE9U,0xFCU,0xFBU,0xF2U,0xF5U,\n    0xD8U,0xDFU,0xD6U,0xD1U,0xC4U,0xC3U,0xCAU,0xCDU,\n    0x90U,0x97U,0x9EU,0x99U,0x8CU,0x8BU,0x82U,0x85U,\n    0xA8U,0xAFU,0xA6U,0xA1U,0xB4U,0xB3U,0xBAU,0xBDU,\n    0xC7U,0xC0U,0xC9U,0xCEU,0xDBU,0xDCU,0xD5U,0xD2U,\n    0xFFU,0xF8U,0xF1U,0xF6U,0xE3U,0xE4U,0xEDU,0xEAU,\n    0xB7U,0xB0U,0xB9U,0xBEU,0xABU,0xACU,0xA5U,0xA2U,\n    0x8FU,0x88U,0x81U,0x86U,0x93U,0x94U,0x9DU,0x9AU,\n    0x27U,0x20U,0x29U,0x2EU,0x3BU,0x3CU,0x35U,0x32U,\n    0x1FU,0x18U,0x11U,0x16U,0x03U,0x04U,0x0DU,0x0AU,\n    0x57U,0x50U,0x59U,0x5EU,0x4BU,0x4CU,0x45U,0x42U,\n    0x6FU,0x68U,0x61U,0x66U,0x73U,0x74U,0x7DU,0x7AU,\n    0x89U,0x8EU,0x87U,0x80U,0x95U,0x92U,0x9BU,0x9CU,\n    0xB1U,0xB6U,0xBFU,0xB8U,0xADU,0xAAU,0xA3U,0xA4U,\n    0xF9U,0xFEU,0xF7U,0xF0U,0xE5U,0xE2U,0xEBU,0xECU,\n    0xC1U,0xC6U,0xCFU,0xC8U,0xDDU,0xDAU,0xD3U,0xD4U,\n    0x69U,0x6EU,0x67U,0x60U,0x75U,0x72U,0x7BU,0x7CU,\n    0x51U,0x56U,0x5FU,0x58U,0x4DU,0x4AU,0x43U,0x44U,\n    0x19U,0x1EU,0x17U,0x10U,0x05U,0x02U,0x0BU,0x0CU,\n    0x21U,0x26U,0x2FU,0x28U,0x3DU,0x3AU,0x33U,0x34U,\n    0x4EU,0x49U,0x40U,0x47U,0x52U,0x55U,0x5CU,0x5BU,\n    0x76U,0x71U,0x78U,0x7FU,0x6AU,0x6DU,0x64U,0x63U,\n    0x3EU,0x39U,0x30U,0x37U,0x22U,0x25U,0x2CU,0x2BU,\n    0x06U,0x01U,0x08U,0x0FU,0x1AU,0x1DU,0x14U,0x13U,\n    0xAEU,0xA9U,0xA0U,0xA7U,0xB2U,0xB5U,0xBCU,0xBBU,\n    0x96U,0x91U,0x98U,0x9FU,0x8AU,0x8DU,0x84U,0x83U,\n    0xDEU,0xD9U,0xD0U,0xD7U,0xC2U,0xC5U,0xCCU,0xCBU,\n    0xE6U,0xE1U,0xE8U,0xEFU,0xFAU,0xFDU,0xF4U,0xF3U,\n};\n\nuint8_t crc8(uint8_t *message, int message_length) {\n    uint8_t checksum = 0;\n    while (message_length &gt; 0) {\n        checksum = lookup_table[*message ^ checksum];\n        message++;\n        message_length--;\n    }\n    return checksum;\n}\n</code></pre>"},{"location":"dvl/dvl-protocol/#pd6-protocol-tcpserial","title":"PD6 protocol (TCP/Serial)","text":""},{"location":"dvl/dvl-protocol/#overview_2","title":"Overview","text":"<p>The PD6 support allows for integration with equipment that may already have a PD6 protocol interface, removing the necessity to create a driver based on the standard Water Linked protocol. PD6 protocol is supported for output via serial and ethernet. PD6 protocol over TCP is always enabled. The port in use is configurable in the GUI. The default port is TCP 1037. The serial output can be configured to output PD6 using the Change serial output protocol command.</p>"},{"location":"dvl/dvl-protocol/#command-overview_1","title":"Command overview","text":"<p>Sentences TS, BI and BD are filled with relevant numbers. All other sentences are set to zero values.</p>"},{"location":"dvl/dvl-protocol/#timing-and-scaling-data-ts","title":"Timing and scaling data (TS)","text":"<p><code>:TS,YYMMDDHHmmsshh,SS.S,+TT.T,DDDD.D,CCCC.C,BBB &lt;CR&gt;&lt;LF&gt;</code></p> Field Explanation Value YYMMDDHHmmsshh Year, month, day, hour, minute, second, hundredths of seconds Report timestamp SS.S Salinity in parts per thousand (ppt). Always 0 DDDD.D Depth of transducer face in meters. Always 0 CCCC.C Speed of sound in meters per second. Configured speed of sound BBB Built-in Test (BIT) result code. Always 0"},{"location":"dvl/dvl-protocol/#bottom-track-instrument-referenced-velocity-data-bi","title":"Bottom track, instrument referenced velocity data (BI)","text":"<p><code>:BI,\u00b1XXXXX,\u00b1YYYYY,\u00b1ZZZZZ,\u00b1EEEEE,S &lt;CR&gt;&lt;LF&gt;</code></p> Field Explanation Value \u00b1XXXXX X-axis velocity data in mm/s Current speed \u00b1YYYYY Y-axis velocity data in mm/s Current speed \u00b1ZZZZZ Z-axis velocity data in mm/s Current speed \u00b1EEEEE Error in velocity data in mm/s Current error S Status of velocity A = good. V = bad <p>Note</p> <p>Axis used in the BI sentence is the vehicle frame.</p>"},{"location":"dvl/dvl-protocol/#bottom-track-earth-referenced-distance-data-bd","title":"Bottom track, earth referenced distance data (BD)","text":"<p><code>:BD,\u00b1EEEEEEEE.EE,\u00b1NNNNNNNN.NN,\u00b1UUUUUUUU.UU,DDDD.DD,TTT.TT &lt;CR&gt;&lt;LF&gt;</code></p> Field Explanation Value \u00b1EEEEEEEE.EE East distance in meters. Always 0 \u00b1NNNNNNNN.NN North distance in meters. Always 0 \u00b1UUUUUUUU.UU Upward distance in meters. Always 0 DDDD.DD Range to bottom in meters Current altitude TTT.TT Time since last good velocity estimate in seconds. Always 0"},{"location":"dvl/dvl-protocol/#bottom-track-ship-referenced-distance-data-bs","title":"Bottom track, ship referenced distance data (BS)","text":"<ul> <li>In the 2.4.0 software release the BS values are always zero.</li> <li>As of the 2.4.4 software release the BS values are given by the actual velocity.</li> </ul> <p><code>:BS,\u00b1TTTTTTTT.TT,\u00b1LLLLLLLL.LL,\u00b1NNNNNNN.NN,S &lt;CR&gt;&lt;LF&gt;</code></p> Field Explanation Value \u00b1TTTTTTTT.TT Transverse movement, (+ = Port to Starboard velocity relative to bottom) In mm/s Y axis velocity \u00b1LLLLLLLL.LL Longitudinal movement. (+ = Aft to Forward velocity relative to bottom) In mm/s X axis velocity \u00b1NNNNNNN.NN Ship velocity away from bottom in mm/s Z axis velocity S Status of velocity A = good. V = bad"},{"location":"dvl/dvl-protocol/#example-output","title":"Example output","text":"<pre><code>:SA, +0.00, +0.00,  0.00\n:TS,22020812061800, 0.0, +0.0,   0.0,1475.0,  0\n:WI,    +0,    +0,    +0,    +0,V\n:WS,    +0,    +0,    +0,V\n:WE,    +0,    +0,    +0,V\n:WD,       +0.00,       +0.00,       +0.00,   0.00,  0.00\n:BI,  +123,  -420, +2000,    +0,A\n:BS,  -420,  +123, +2000,A\n:BE,    +0,    +0,    +0,V\n:BD,       +0.00,       +0.00,       +0.00,   5.32,  0.00\n</code></pre>"},{"location":"dvl/dvl-protocol/#range-mode-configuration","title":"Range mode configuration","text":"<p>Range mode configuration can be used to instruct the DVL to only search for bottom lock in a limited altitude range. This can improve performance when operating in environments where you know the DVL minimum and/or maximum altitude. (Eg when operating in a river or pool)</p> <p>The format for configuring range mode can be as follows:</p> Range specifier Behavior <code>auto</code> The DVL will search for bottom lock in it's full operational area (Default) <code>=a</code> The DVL is locked to range mode <code>a</code> where <code>b</code> is a number from <code>0-4</code> <code>a&lt;=b</code> The DVL will search for bottom lock within range mode <code>a</code> and <code>b</code> <p>The available range modes are:</p> Range mode Lower altitude (m) Upper altitude (m) Update rate per second (Hz) 0 0.05 0.6 15 1 0.3 3.0 10 2 1.5 14 5 - 6 3 7.7 36 7 - 8 4 15 max 2 - 4 <p>Examples:</p> <ul> <li><code>=3</code> The DVL will search for bottom lock between 7.7 and 36m</li> <li><code>2&lt;=3</code> The DVL will search for bottom lock between 1.5 and 36m</li> </ul>"},{"location":"dvl/dvl-protocol/#pd4-protocol-tcpserial","title":"PD4 protocol (TCP/Serial)","text":""},{"location":"dvl/dvl-protocol/#overview_3","title":"Overview","text":"<p>The PD4 string is intended for use with equipment that may already have a PD4 protocol interface, removing the necessity to create a driver based on the standard Water Linked protocol. PD4 protocol is supported for output via serial and ethernet. The PD4 protocol over TCP is always enabled. The port in use is configurable in the GUl. The default port is TCP 1038.</p> <p>Note</p> <p>PD4 support was added in software release 2.5.2 and is experimental. Please give feedback on this feature.</p>"},{"location":"dvl/dvl-protocol/#data-format","title":"Data Format","text":"<p>PD4 is a binary protocol where fields are defined by their position in one message.  Data fields which use more than one byte are LittleEndian encoded.</p> Byte(s) Data type used Unit 0 DVL Data ID 7Dh y 1 Data structure ( Always equal to 0) y 2,3 Number of bytes y 4 System Config (0x10100011<sup>1</sup>) y 5,6 X velocity bottom y mm/s 7,8 Y velocity bottom y mm/s 9,10 Z velocity bottom y mm/s 11,12 E velocity bottom y mm/s 13,14 BM1 range to bottom y cm 15,16 BM2 range to bottom y cm 17,18 BM3 range to bottom y cm 19,20 BM4 range to bottom y cm 21 Bottom status y bool 22,23 X-Velocity reference layer n 24,25 Y-Velocity reference layer n 26,27 Z-Velocity reference layer n 28,29 E-Velocity reference layer n 30,31 Reference layer start n 32,33 Reference layer end n 34 Reference layer status n 35 Time of first ping - hour y hours 36 Time of first ping - minute y minutes 37 Time of first ping - second y seconds 38 Time of first ping - hundreths y centi-seconds 39,40 Bit result n 41,42 Speed of Sound y m/s 43,44 Temperature n 45,46 Checksum y N/A"},{"location":"dvl/dvl-protocol/#notes","title":"Notes","text":"<p>To use the BM1-BM4 correctly you should use this translation. The numbering comes from the Transducer numbering (see image below) BM1 is transducer 3 BM2 is transducer 1 BM3 is transducer 4 BM4 is transducer 2 </p> <ol> <li> <p>Tells that the velocities are in ship coordinates, Tilt is used, Three beam not computed, and 600 Khz\u00a0\u21a9</p> </li> </ol>"},{"location":"dvl/dvl-troubleshooting/","title":"DVL Troubleshooting","text":""},{"location":"dvl/dvl-troubleshooting/#is-my-dvl-faulty","title":"Is my DVL faulty?","text":"<p>Below is a small list to check if your DVL is not performing as expected or you are experiencing any issues. It starts with the basic before moving on to more advanced troubleshooting. When you come to the point of failure or if the troubleshooting do not help, please submit a support ticket to our support team through our Support portal. Please write what you are experiencing and how you tested/used the DVL when you experienced the issue. </p> <p>In the Support Portal please describe the test environment or test setup you have used and how the DVL is mounted. If possible, open the DVL GUI and go to Diagnostic Log in the left menu. Press the Create Diagnostic Report button. This will automatically record a log file that you can download to your computer. Please add the Diagnostic reports and pictures of the test setup in the support portal. This will help our support team greatly! </p> <p>If the troubleshooting guide do not help, please check out FAQ DVL!  </p>"},{"location":"dvl/dvl-troubleshooting/#check-if-dvl-is-powered","title":"Check if DVL is powered","text":"<ol> <li>Put the DVL under water and power it on with an adequate power supply.<ul> <li>Does the DVL pull any current? Expected current consumption: Approximate average 260mA at 18V</li> <li>Does the LED turn on?</li> </ul> </li> </ol>"},{"location":"dvl/dvl-troubleshooting/#led","title":"LED","text":"<ol> <li>For LED status, see LED Signals.</li> </ol>"},{"location":"dvl/dvl-troubleshooting/#wiring","title":"Wiring","text":"<ol> <li>Check that you have wired your DVL correctly, see Wiring interface.<ul> <li>1.1 If you have a custom connector you need to ask the supplier for the correct drawings.</li> </ul> </li> <li>Check for damages along the cable and that there are good connection where you have terminated your DVL.</li> <li>Check for short between Negative/Ground and Positive (10-30V).</li> </ol>"},{"location":"dvl/dvl-troubleshooting/#environmental-check","title":"Environmental Check","text":"<ol> <li>The Line of sight should be clear of any obstacles including walls, see Line of sight.<ul> <li>1.1 One easy way to make sure the Line of sight is clear from any walls is to observe that all beam shows approximately the same distance to the bottom. If some of the beams are flickering or showing another distance it might pick up a reflection from a wall or some other obstacle in the line of sight. Obstacle free radius from the DVL to the wall depending on the distance to the bottom can be calculated with this formula: Obstacle free radius = tan(32.5\u00b0) \u00d7 distance from DVL to bottom. </li> </ul> </li> <li>If testing in a pool, tank or bucket it should not be made out of a polished metal or very clean surfaces. This can introduce more noise and make it harder for the DVL to get a bottom lock.</li> <li>Check that there are no motors, echo sunders, pumps, running hose. This can create noise in the same frequency as the DVL and have an impact on the acoustic signals.</li> <li>Make sure the environment is not acting on the DVL in a way that makes it pitch and yaw (waves). That will send the acoustic signals in many directions making it hard to achieve a bottom lock.    </li> </ol>"},{"location":"dvl/dvl-troubleshooting/#thermal-shutdown","title":"Thermal Shutdown","text":"<p>The DVL has a thermal shutdown mechanism to avoid damage. It will issue a warning before shutting down at 55\u2103. Once it cools below 50\u2103, it automatically restarts. If the overheating issue is not addressed, it may repeat this shutdown/restart cycle.</p> <ol> <li>Is the DVL in water? If not it will overheat and enter a shutdown/restart cycle.</li> </ol>"},{"location":"dvl/dvl-troubleshooting/#gui","title":"GUI","text":"<ol> <li> <p>Connect your DVL yo Ethernet by following the Network documentation, see Setup Network. Use the Fallback IP if you are struggling. </p> </li> <li> <p>You are able to access and see the Dashboard like displayed in our Web Demo.</p> </li> <li> <p>Check that you have the latest software, see Software Updates</p> </li> </ol>"},{"location":"dvl/dvl-troubleshooting/#collecting-data","title":"Collecting data","text":"<p>Assuming you have checked the above and that your testing environment will not affect the performance of the DVL, you can now start collecting data!</p> <ol> <li>Go into the Diagnostic report and collect data. Fill the description with relevant information of the test environment and observed issue.</li> <li>Take picture of the test environment and how DVL is mounted to bracket or ROV.</li> <li>If there are known issues under certain conditions/setup please perform these tests as well and collect diagnostic reports.  </li> <li>Open a ticker through our support portal Support portal where you upload the diagnostic reports, pictures with a description of your issue. </li> </ol>"},{"location":"dvl/faq/","title":"DVL FAQ","text":"<p>Below are some frequently asked questions about the DVL. Click on a question in the table of contents to the right or simply scroll down to read the FAQs.</p>"},{"location":"dvl/faq/#1-do-i-need-to-calibrate-the-imu-each-time-i-power-on-the-dvl","title":"1. Do I need to calibrate the IMU each time I power on the DVL?","text":"<p>No. If you use the software version 2.4.5 or later, the calibration is saved in memory.</p>"},{"location":"dvl/faq/#2-will-the-temperature-affect-the-imu","title":"2. Will the temperature affect the IMU?","text":"<p>Yes. The IMU will perform differently under temperatures that differ significantly from the conditions at which it was calibrated.</p>"},{"location":"dvl/faq/#3-why-does-the-yaw-angle-change-rapidly","title":"3. Why does the yaw angle change rapidly?","text":"<p>Yaw angle in the DVL GUI may increase or otherwise change rapidly if the DVL\u2019s gyro has not been calibrated or temperature changes. Please see the following for more on calibration: Calibrate the IMU</p> <p>Note</p> <p>If only the velocity output of the DVL is required, you can ignore changes in yaw angle. The yaw angle is only relevant (and thus calibration is needed) if the DVL\u2019s dead reckoning functionality is used.</p>"},{"location":"dvl/faq/#4-can-we-testoperate-the-dvl-in-air","title":"4. Can we test/operate the DVL in air?","text":"<p>You will not be able to get valid velocity measurements in air. It is possible to power the DVL out of the water for a short time, but the DVL warms up quickly. If possible, we recommend avoiding this.</p> <p>A great setup for lab work is to keep the DVL submerged in a small bucket of water.</p> <p>We realize it may be impractical to avoid air usage altogether when the DVL is mounted. One option is to disable the DVL\u2019s acoustics while it is out of water to reduce heating. This option is available under Configuration in the DVL GUI.</p> <p>Note</p> <p>If you do use the DVL in air, we strongly recommend running software version 2.0.8 or higher so the DVL can shut down safely if it overheats. See FAQ #9 for shutdown behavior.</p>"},{"location":"dvl/faq/#5-what-is-the-connector-on-the-dvl","title":"5. What is the connector on the DVL?","text":"<p>The DVL A50/A125 is supplied with a cable tail that includes an interface board containing:</p> <ul> <li>An Ethernet connector, allowing a direct plug-and-play link to your computer.</li> <li>A Micro-USB port (Revision 4 I/O card), enabling USB output. Simply plug a USB cable from the DVL to your computer.</li> </ul> <p>Earlier revisions have a UART interface on the board, which can be soldered to for serial connections.</p> <p>The interface board can be removed for permanent mounting on a vehicle. Refer to the wiring interface documentation for setting up Ethernet and/or serial connections as needed. Water Linked does not provide a specific connector for this purpose.</p>"},{"location":"dvl/faq/#6-can-the-dvl-be-used-as-an-adcp","title":"6. Can the DVL be used as an ADCP?","text":"<p>No. The DVL\u2019s algorithms are specifically designed to track reflections from the seafloor. An ADCP requires measuring reflections from water-borne particles at various depths, which uses a different processing approach.</p>"},{"location":"dvl/faq/#7-why-does-the-dvl-lose-connection","title":"7. Why does the DVL lose connection?","text":"<p>If you notice periodic data dropouts or lost connections, there are a few common causes to consider:</p> <ol> <li> <p>Insufficient Power </p> <p>If the DVL is not receiving enough power, you may see periodic dropouts.  </p> <ul> <li>Try using a power supply with higher voltage/current (for instance, 18V at up to 2A or 24V at up to 1.5A).</li> </ul> </li> <li> <p>Poor Physical Connection </p> <ul> <li>If the DVL was previously functioning but suddenly loses connection, inspect cables, connectors, and any terminations on the ROV or topside computer.</li> </ul> </li> <li> <p>Thermal Shutdown </p> <ul> <li>If the DVL overheats it will shut down and drop the link until it cools and restarts. See FAQ #9 for details on thresholds and restarts.</li> </ul> </li> </ol>"},{"location":"dvl/faq/#8-what-is-the-source-level-db-re-1-pa-1-m","title":"8. What is the Source level (dB re 1 \u03bcPa @ 1 m)?","text":"<p>The maximum transmit source level is 200 dB.</p>"},{"location":"dvl/faq/#9-can-the-dvl-overheat","title":"9. Can the DVL overheat?","text":"<p>Yes. The DVL has a thermal shutdown to avoid damage. It will issue a warning before shutting down at 55\u2103. Once it cools below 50\u2103, it automatically restarts. If the overheating issue is not addressed, it may repeat this shutdown/restart cycle. To avoid this always keep the DVL in water when powered on.</p>"},{"location":"dvl/faq/#10-what-is-the-latency-when-using-the-api-over-ethernet","title":"10. What is the latency when using the API over Ethernet?","text":"<p>When sending commands over TCP, the average latency is around 4 ms, with a standard deviation of 2 ms. The maximum observed latency is 13 ms.</p>"},{"location":"dvl/faq/#11-does-the-dvl-have-an-rs-232-interface","title":"11. Does the DVL have an RS-232 interface?","text":"<p>No. The DVL does not support RS-232. It only provides a TTL (3.3V) UART interface, which is inherently incompatible with RS-232. If RS-232 is required, you will need an external level converter.</p>"},{"location":"dvl/faq/#12-what-is-the-velocity-output-frequency","title":"12. What is the velocity output frequency?","text":"<p>The velocity output frequency varies with altitude. - At lower altitudes (close to the seafloor), the DVL can reach an update frequency of 15 Hz. - At higher altitudes, it typically operates between 2\u20134 Hz.</p> <p>For more details, see Range mode. In Auto mode, the DVL automatically selects the range mode it deems optimal.</p>"},{"location":"dvl/faq/#13-will-the-dvl-work-over-a-soft-seabed-such-as-sand","title":"13. Will the DVL work over a soft seabed, such as sand?","text":"<p>Yes, the DVL can operate over soft bottoms. However, softer seabeds absorb more acoustic energy, which reduces the maximum altitude at which the DVL can reliably track. The degree of range reduction varies from environment to environment and may require on-site testing to determine.</p>"},{"location":"dvl/faq/#14-i-get-an-error-when-updating-my-dvl","title":"14. I get an error when updating my DVL?","text":"<p>Most likely your DVL is running an older software version that requires you to set the time before you can update. This is not and issue when updating from version 2.6.5 For more software update details please see DVL Software Updates.</p>"},{"location":"dvl/faq/#15-how-should-i-maintain-the-dvl","title":"15. How should I maintain the DVL?","text":"<p>After operating in seawater, brackish water, chlorinated pools, or any medium other than freshwater, rinse the DVL thoroughly with fresh water to remove residues and salt deposits. Once dry, wipe the exterior with a clean, dry cloth. Avoid solvents or abrasive cleaners.</p>"},{"location":"dvl/interfaces/","title":"Interfaces","text":"<p>For both the DVL-A50 and the DVL-A125.</p>"},{"location":"dvl/interfaces/#led-signals","title":"LED Signals","text":"<ul> <li> <p>No green light: Power is off.</p> </li> <li> <p>Fixed green light: The DVL is powering on. Depending on configuration it can take ~30-60 seconds to power on.</p> </li> <li> <p>Flashing green light, mostly off (slow, every few seconds): DVL looking for bottom lock.</p> </li> <li> <p>Flashing green light, mostly on (slow, every few seconds): DVL has bottom lock.</p> </li> <li> <p>Flashing green light (fast, many times a second): DVL is in thermal shutdown</p> </li> </ul>"},{"location":"dvl/interfaces/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the DVL interface.</p> Interface Color Negative/Ground Black Positive (10-30V) Red ETH RX+ Green/White ETH RX- Green ETH TX- Orange ETH TX+ Orange/White UART TX Brown/White UART RX Brown Shielded wire Naked (silver)"},{"location":"dvl/interfaces/#seacon-mcom8m-connector-dvl-a50-only","title":"Seacon MCOM8M Connector (DVL A50 only)","text":"<p>The table below shows the specific pinout for the Seacon MCOM8M connector.</p> Interface Pin Negative/Ground 1 Positive (10-30V) 2 ETH RX+ 3 ETH RX- 4 ETH TX- 5 ETH TX+ 6 UART TX 7 UART RX 8 <p>Note</p> <p>Power must be applied to the power terminals before applying voltage to UART pins</p>"},{"location":"dvl/interfaces/#shielded-cable-information","title":"Shielded Cable Information","text":"<p>The DVL is equipped with a shielded cable that helps protect the communication and power lines from external electromagnetic interference (EMI) and radio frequency interference (RFI). Please note that the DVL electronics themselves are not internally connected to the shield; it is up to the user to decide whether and how to connect the shield.</p> <p>Note</p> <p>For DVLA50, shielded cables were introduced autumn 2024 from serial number 30273 and upwards, and 05838 and upwards.</p> <p>DVLA50's with Seacon MCOMSM connector and DVLA50's made before autumn 2024 are delivered with unshielded cable.</p> <p>All DVLA125 are delivered with shielded cable.</p>"},{"location":"dvl/interfaces/#connecting-the-shield","title":"Connecting the Shield","text":"<p>For optimal performance, especially when mounted on an ROV (Remotely Operated Vehicle) or AUV (Autonomous Underwater Vehicle), it is recommended to connect the shield to reduce the impact of interference on the communication and power signals. The most common connection methods are:</p> <ol> <li> <p>Chassis Ground:    Connecting the shield to the chassis of the ROV/AUV is the most typical practice. This method allows the shield to provide a path to ground for any noise or interference, helping to improve signal integrity. The ROV or AUV chassis often acts as a common reference point for grounding, which makes this a natural choice.</p> </li> <li> <p>Common Ground:    Alternatively, you can connect the shield to the common electrical ground of the ROV/AUV. This method may be used when the electrical and signal systems are designed to share a common ground. It helps ensure that interference is grounded without creating ground loops.</p> </li> </ol>"},{"location":"dvl/interfaces/#recommendation","title":"Recommendation","text":"<p>We recommend connecting the shield to the chassis ground of the ROV or AUV (if possible). This approach generally provides the best noise suppression by using the vehicle\u2019s structure as a solid grounding point. However, if your system design prefers the use of a common electrical ground, that option can also be considered. Always ensure that the shield is grounded at one end only to avoid ground loops, unless your system design calls for grounding at both ends for specific applications.</p>"},{"location":"dvl/interfaces/#terminal-interface","title":"Terminal Interface","text":"<p>The DVL-A50 has a 3.3 volt UART interface (5V tolerant).</p> Settings Value Baud rate 115200 Data parity stop 8N1 Flow control None <p>Warning</p> <p>There can be a momentary (&lt;10 us) power spike (~5 V) on the UART lines when power is applied to the DVL, which may damage equipment which is not 5V tolerant.</p> <p>See the DVL's serial protocol.</p>"},{"location":"dvl/interfaces/#ethernet-interface","title":"Ethernet Interface","text":"<p>See networking and the DVL's TCP protocol.</p>"},{"location":"dvl/interfaces/#code-examples","title":"Code examples","text":"<p>Code for parsing of the data outputted by the DVL over TCP.</p>"},{"location":"dvl/interfaces/#io-interface","title":"I/O interface","text":"<p>The I/O Interface provides a simple means of connection to the Water Linked DVLs. It provides magnetics for the ethernet connection and utilizes the Molex Micro-Fit 3.0 power connector (Part number: 436500204) which is standard for Water Linked products. Female connectors is listed under Mates with Part(s) </p> <p>There currently exists three revisions of the I/O Interface. Revision 2 and 3 are electrically identical. Revision 4 has an integrated USB-to-UART interface and a micro USB port.</p>"},{"location":"dvl/interfaces/#revision-4","title":"Revision 4","text":"<p>Dimensions: 50.6 x 47 x 18.6 mm (Width x Height x Thickness)</p> Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T Micro USB Serial FTDI based Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Fits W\u00fcrth 691137710002"},{"location":"dvl/interfaces/#revision-3","title":"Revision 3","text":"<p>Dimensions: 40 x 42 x 18.6 mm (Width x Height x Thickness)</p> Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T 3x1 header Serial TX, RX, GND Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Fits W\u00fcrth 691137710002"},{"location":"dvl/interfaces/#revision-2","title":"Revision 2","text":"<p>Dimensions: 30.6 mm x 50 x 18.6 mm (Width x Height x Thickness)</p> Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T 3x1 header Serial TX, RX, GND Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power <p>Note</p> <p>The Molex Micro-Fit 3.0 on revision 2 is prone to damage by excessive sideways force. Take care not the yank the power cable when connected.</p>"},{"location":"dvl/networking/","title":"Networking","text":"<p>The DVL has several services available over ethernet:</p> <ul> <li>Multicast DNS (mDNS) for easy discovery</li> <li>Web GUI, providing a visualisation of the data outputted by the DVL, as well as configuration, updating of software, diagnostics, and more.</li> <li>TCP data stream</li> <li>Software updates</li> </ul>"},{"location":"dvl/networking/#network-configuration","title":"Network configuration","text":""},{"location":"dvl/networking/#multicast-dns-mdns","title":"Multicast DNS (mDNS)","text":"<p>The DVL runs a DHCP client which will attempt to obtain an IP address from a DHCP server (e.g. in a router) on the same network, and supports mDNS: the mDNS name of the DVL is <code>waterlinked-dvl</code>. On a computer which supports mDNS, one can then simply access the web GUI at http://waterlinked-dvl.</p> <p>Note</p> <p>If no DHCP server is available on the network, it is recommended to use the fallback IP or  configure a static IP address, as the DVL can spend up to 5 minutes searching for a DHCP server.</p>"},{"location":"dvl/networking/#fallback-ip","title":"Fallback IP","text":"<p>The DVL will always be available with the static IP address: 192.168.194.95. To be able to connect to the DVL using it:</p> <ul> <li>Connect an ethernet cable directly from the DVL to your computer.</li> <li>For an/the ethernet interface of your computer, configure it to have a static IP address in the same subnet as 192.168.194.95, e.g. 192.168.194.90 or anything else of the form 192.168.194.xxx if using a subnet of the form 255.255.255.0 (aka 192.168.194.0/24).</li> <li>Activate the ethernet interface of your computer which you configured in the previous step.</li> <li>In a web browser, open http://192.168.194.95 to access the web GUI.</li> </ul>"},{"location":"dvl/networking/#via-the-gui","title":"Via the GUI","text":"<p>The IP address of the DVL can be configured in two ways via the web GUI:</p> <ul> <li>DCHP client: an IP address is obtained from a DHCP server (e.g. in a router) on the same network, as in the discussion of mDNS above.</li> <li>Static: equip the DVL with a certain static IP address.</li> </ul> <p>After the IP configuration of the DVL is modified, the DVL needs to be rebooted for the settings take effect.</p> <p>Note</p> <p>The boot time, i.e. the time it takes from the DVL receives power until it starts operating normally, will depend upon the IP configuration. Using the fallback IP, the boot time can be as much as 1 min 30 sec, whilst it can be as low as 20 sec with a static IP.</p>"},{"location":"dvl/networking/#tcp-data-stream","title":"TCP data stream","text":"<p>The DVL can output data and receive commands over Transmission Control Protocol (TCP). A TCP server is available on port 16171 which outputs the latest data to all connected clients, and which listens to commands from any of these connected clients. See the DVL's TCP protocol.</p>"},{"location":"dvl/sw-update/","title":"Software updates","text":"<p>It is recommended to always run the latest DVL software where possible. The latest software can be obtained automatically or manually.</p> <p>The release notes for each release is available in the GUI and also in the GUI demo.</p> <p>Warning</p> <p>During the software upgrade, the thermal protection feature is turned off. To prevent the DVL from overheating, it is important to submerge the DVL in water throughout the update process.</p> <p>If the DVL is switched off during an upgrade it might be permanently damaged.\u201d</p>"},{"location":"dvl/sw-update/#automatic-software-update","title":"Automatic software update","text":"<p>The DVL's GUI automatically checks and indicates if a new software version is available.</p> <ul> <li>Connect the DVL over ethernet to a network connected to the internet. If on a personal computer, it may be necessary to make a network bridge between a network interface (such as wifi) which has access to the internet and the ethernet interface through which the DVL is connected.</li> <li>Go to http://[IP_ADDRESS_OF_THE_DVL]:9000 in a web browser.</li> <li>The GUI will automatically check if there is a new version available, and if so, initiate installation of it with a single click.</li> </ul>"},{"location":"dvl/sw-update/#offline-software-update","title":"Offline software update","text":"<p>If it is not possible to connect the DVL to the internet, one can proceed as follows.</p> <ul> <li>Find the current version and chip ID of the DVL at Menu -&gt; About in the GUI.</li> <li>Manually download an update package (<code>.wlup</code>) from the update server using the chip ID.</li> <li>Verify if the downloaded version is newer than the currently running version.</li> <li>Set system time as shown below.</li> <li>Navigate to http://[IP_ADDRESS_OF_THE_DVL]:9000 in a web browser.</li> <li>Select 'Manual upload' and then upload the downloaded <code>.wlup</code> file.</li> </ul>"},{"location":"dvl/sw-update/#failure-during-upgrade-set-system-time","title":"Failure during upgrade (set system time)","text":"<p>When performing an offline software upgrade it the following error might occur: <code>Failed: Error upgrading: resize: non-zero exit code: exit status 1</code>. This error is resolved by setting the system time before performing an upgrade. Proceed as follows.</p> <ul> <li>Go to DVL GUI and click on \"Configuration\" in left menu</li> <li>Open \"Advanced configuration\" menu</li> <li>Scroll to \"System time configuration\"</li> <li>Select \"Manual time\" in \"System time source\" and click \"Set manual time\"</li> <li>Click on \"About\" in left menu and click \"Software upgrade\"</li> <li>Perform upgrade again</li> </ul>"},{"location":"dvl/gui/configuration/","title":"Configuration","text":"<p>Configuration of the DVL is available in the the GUI by pressing  Menu -&gt; Configuration. Output configuration is available by pressing Menu -&gt; Outputs . Configuration can also be performed via the DVL protocol.</p>"},{"location":"dvl/gui/configuration/#screenshot","title":"Screenshot","text":""},{"location":"dvl/gui/configuration/#parameters","title":"Parameters","text":"Name Description Speed of sound Speed of sound in the environment (sea water, fresh water etc) Acoustic enabled Enable/disable sending acoustic waves from the DVL Mounting rotation offset Configure DVL mounting direction in relation to vehicle. 0 if LED on DVL is pointing forward on the vehicle. See axes Dark mode Disable the LED to avoid interference with camera Save drift compensation Calibrate the gyro bias in the IMU. Place the DVL on a stationary surface (preferably at the environment operating temperature) and press the button. Recommended to improve dead reckoning positioning estimation <p>Advanced configuration</p> Name Description Network configuration Static IP address or get IP address from DHCP server System time configuration Configure Network time protocol (NTP) server to use or set time manually Factory reset Reset all configuration of the DVL. Reboot is required. Reboot Reboot the DVL <p>Recommended configuration when only serial port is used</p> <p>Configure network to \"Static IP\" to shorten boot time</p> <p>Recommended configuration when only ethernet is used</p> <p>Configure serial output protocol to \"Disabled\" to lower latency for TCP protocol</p>"},{"location":"dvl/gui/dashboard/","title":"Dashboard","text":"<p>Both the DVL-A50 and the DVL-A125 have a web-based GUI. In your favorite web browser, simply navigate to the DVL's IP address.</p> <p>The default page is a dashboard which provides a summary and visualisation of both the velocity and dead reckoning data outputted by the DVL, as well as an indication of current status.</p>"},{"location":"dvl/gui/dashboard/#screenshot","title":"Screenshot","text":""},{"location":"dvl/gui/dashboard/#dashboard-parameters","title":"Dashboard Parameters","text":""},{"location":"dvl/gui/dashboard/#doppler-velocity","title":"Doppler Velocity","text":"Parameter Description Speed Combined speed from x, y, z velocities. Altitude Distance from seabed to DVL (unless beams blocked by something else). Figure of merit (See note below) Maximum uncertainty of measurement given in m/s. Ping rate Rate at which data velocity is being outputted (depends on velocity). Velocity valid Indicates if the velocity is valid to be used. <p>Note</p> <p>Figure of merit (FOM) represent the maximum possible uncertainty and indicates the largest potential error in the measured speed from our DVL. This value is derived from the covariance matrix, which identifies the direction with the highest uncertainty in the sensor data. It provides a worst-case error margin. The maximum amount by which the actual speed may differ from the measured speed due to various factors from environment such as acoustic noise from other sources.</p>"},{"location":"dvl/gui/dashboard/#dead-reckoning","title":"Dead reckoning","text":"Parameter Description Speed Speeds in x,y,z(Downward) directions with FOM that is the Euclidean norm of the standard deviations for each direction. Position Calculated position with FOM that is the Euclidean norm of the standard deviations for each direction. Roll, pitch, Yaw Orientation from the gyro. When dead reckoning is reset on the DVL, the gyro reinitializes its orientation. This means that the current orientation of the DVL at the time of reset will be set as the new zero orientation."},{"location":"dvl/gui/dashboard/#horizontal-velocity","title":"Horizontal velocity","text":"<p>Graphical indication of the horizontal direction of speed.</p>"},{"location":"dvl/gui/dashboard/#vertical-velocity","title":"Vertical velocity","text":"<p>Graphical indication of the vertical velocity.</p>"},{"location":"dvl/gui/dashboard/#map-controls","title":"Map controls","text":"Button Description +/-/[ ] Zoom and fullscreen controls Center map to dvl position Reset calculated position and start position tracking from zero. ... More Set trail length Set grid size Calibrate gyro"},{"location":"dvl/gui/demo-gui/","title":"Demo site","text":"<p>We maintain a demo of the DVL's GUI, running on simulated data.</p>"},{"location":"dvl/gui/diagnostic-report/","title":"Diagnostic report","text":"<p>Allows for generation of a log file for sending to Water Linked customer support.</p> <p>Enter a small description of the problem you are experiencing, and then click on the button. Attach the generated <code>.wdat</code> file when contacting Water Linked support.</p>"},{"location":"dvl/gui/diagnostic-report/#screenshot","title":"Screenshot","text":""},{"location":"explorer-kit/hardware/","title":"Hardware Setup","text":""},{"location":"explorer-kit/hardware/#connectors","title":"Connectors","text":"<ul> <li> <p>Connect the four Receiver-D1 cables to channel 1 to 4 on the housing.</p> </li> <li> <p>If using the Locator-D1, connect this to the D1 connector on the housing.</p> </li> <li> <p>If using the Locator-A1, connect this to the A1 connector on the housing.</p> </li> <li> <p>If using the Locator-S1, no connections to the housing is needed. Just power the Locator and make sure both the status led on S1 and master is solid green.</p> </li> </ul> <p></p>"},{"location":"explorer-kit/hardware/#gps","title":"GPS","text":"<p>The on-board GPS module is used to position the system in a global reference system. An external antenna with integrated amplifier is used to improve GPS reception. The signal strength of the GPS can be seen on the top bar in the web GUI.</p>"},{"location":"explorer-kit/hardware/#gps-antenna-assembly","title":"GPS-antenna assembly","text":"<p>The GPS-antenna can be mounted anywhere you want, but remember the GPS-antenna is the origin of the master electronics position. Therefor it is recommended to fasten the antenna on the lid of the peli case. With the 3M double sided tape, attach the GPS- antenna to the lid of the peli case.</p> <p></p> <p>Connect the GPS-antenna cable to the SMA connector on the master electronics. Torque the SMA nut to 3\u20135 in\u00b7lbf (0.3 to 0.6 N\u00b7m) or slightly more than finger tight.</p> <p></p>"},{"location":"explorer-kit/hardware/#imu","title":"IMU","text":"<p>The master electronics has an built in IMU used to provide the orientation of the master electronics. This is used in combination with the acoustic position and GPS to generate the global position of the Locator.</p>"},{"location":"explorer-kit/hardware/#imu-calibration","title":"IMU Calibration","text":"<p>For the IMU to work properly it needs to be calibrated. The calibration data is stored when full calibration is obtained for faster calibration on restart of the system. If the system is started on a new location a new calibration is needed for the IMU to work as intended.</p> <p>To calibrate the IMU disconnect all Recivers and Locator cables, but leave power and Ethernet connected. This is to prevent damaging the cables and connector when performing the calibration. While looking at the top bar in the web GUI on the IMU status, move the peli case in a figure of 8 until all the bars are green.</p>"},{"location":"explorer-kit/introduction/","title":"Introduction","text":"<p>The Underwater GPS Explorer Kit retired and no longer available for sale.</p>"},{"location":"explorer-kit/introduction/#underwater-gps-explorer-kit","title":"Underwater GPS Explorer Kit","text":"<p>The Underwater GPS Explorer Kit is a robust and reliable acoustic positioning system with a range of 100m. The purpose of the system is to give a live GPS position of ROVs, divers and other moving objects below the water surface.</p> <p></p> <p>The Underwater GPS system is based on Short Baseline (SBL) acoustic positioning. The Locator is placed on the device to be positioned and functions as a beacon that send out an acoustic pulse. Near the surface, there are four Receiver hydrophones lowered into the water. The Receivers listen for the pulse from the locator. Time-of-arrival to each Receiver is used to calculate the Locator\u2019s position. SBL systems, compared to the USBL systems, have the advantage of working well in shallow water and acoustic reflective environments, such as in fish cages, near harbor installations, close to ship hulls, inside water tanks etc.</p> <p>Once the position is known relative to the Receivers, the global position can be found by adding that to the position obtained by a GPS receiver. The Underwater GPS system does that part internally so that it can provide the actual global position of the ROV as its output.</p>"},{"location":"explorer-kit/introduction/#kit-content","title":"Kit content","text":"<ul> <li>1 x Underwater GPS Housing with Master-D1 electronics</li> <li>4 x Receiver-D1 with 10m cable</li> <li>1 x Locator of choice</li> <li>1 x 3m Ethernet cable</li> <li>1 x 3m power cable</li> <li>1 x External GPS antenna</li> </ul>"},{"location":"explorer-kit/introduction/#quickstart","title":"Quickstart","text":"<p>Getting started with Water Linked Underwater GPS</p>"},{"location":"explorer-kit/introduction/#discussion","title":"Discussion","text":"<p>If you have questions, you are very welcome to contact our customer support, where we will be happy to help you.</p>"},{"location":"explorer-kit/network-settings/","title":"Network Settings","text":"<p>At power-up, the Master-D1 reads the DIP-switch settings. The network mode depends on the GP0 and GP1 position.</p> Network mode GP0 GP1 DIP switch position DHCP client ON ON Static IP 192.168.2.94 OFF ON Static custom IP ON OFF DHCP Server, 192.168.0.1 OFF OFF <p>The BS0 and BS1 positions on the dip switch shall both be ON. These boot-select pins are used in factory programming only.</p> <p>Use the supplied Ethernet cable to connect the Underwater GPS to a network switch or directly into the host computer.</p> <p>Note</p> <p>The host computer connected to the topside unit needs to have an IP-address on the same subnet as set on the Master-D1. For example: If the IP address of the UGPS is 192.168.2.94 the host computer needs to be configured to a different 192.168.2.x address e.g. 192.168.2.100.</p>"},{"location":"explorer-kit/power-supply/","title":"Power supply","text":"<p>The power cable comes with stripped jacket. Connect the stripped cables to your favorite 12V power source.</p> Black   : Negative Red     : Positive Voltage : 10 \u2013 18V Current : 0.7A  (12V nominal)"},{"location":"explorer-kit/quickstart/","title":"Quickstart","text":""},{"location":"explorer-kit/quickstart/#intro","title":"Intro","text":"<p>This is a guide on how to start using the Underwater GPS system. The steps are:</p> <ul> <li>Power the topside unit</li> <li>Calibrate IMU</li> <li>Deploying receivers</li> <li>Connect everything</li> <li>Select locator and channel</li> <li>Configure receiver placement in GUI</li> </ul>"},{"location":"explorer-kit/quickstart/#power-the-topside-unit","title":"Power the topside unit","text":"<p>Start by connecting power to the topside unit. We do this first because we want the GPS receiver to start receiving signals and acheive a lock while we setup the rest of the system. If you are using the Locator-S1, power it on now so it also have time to get GPS lock.</p>"},{"location":"explorer-kit/quickstart/#calibrate-imu","title":"Calibrate IMU","text":"<p>Connect the Ethernet cable to the topside unit and your computer. Then open your web browser and type in the IP-address of your topside unit which is defined by the position of the dip-switch on the Master-D1. How to change the IP-address is described here. At the top bar on the GUI you will see a calibration bar for the IMU. To calibrate the IMU rotate it in a figure of 8 and keep doing it until the IMU calibration bar becomes full and green.</p>"},{"location":"explorer-kit/quickstart/#deploying-of-receivers","title":"Deploying of receivers","text":"<p>Before starting to deploy the receivers in the water, add a piece of tape on the receiver cable on the desired depth to make setup easier. Place the receivers in the water on the desired location and decide which number (1-4) each receiver will have. This is important when connecting the receivers to the topside unit.</p> <p>Tip</p> <p>Adding lead weights just above the receiver helps keep them stable when doing the positioning.</p>"},{"location":"explorer-kit/quickstart/#connect-everything","title":"Connect everything","text":"<p>When connecting the receiver cables to the topside unit remember the numbering you decided on and connect the connector to the accordingly port. If this is not correct the position will be completely wrong. Next you connect the Locator if you are using the A1 or D1.</p> <p></p>"},{"location":"explorer-kit/quickstart/#select-locator-and-channel","title":"Select locator and channel","text":"<p>Now that everything is connected and ready it is time to select the right locator and choose which channal to listen on. This is configurated on the setting page of the web GUI. The Water Linked standard is to use channel 17 and this is also the default channel for the Locator-S1.</p>"},{"location":"explorer-kit/quickstart/#configure-receiver-placement-and-seach-range-in-gui","title":"Configure receiver placement and seach range in GUI","text":"<p>After selecting the correct locator, you need to provide the correct placement of the receivers to the GUI for the positioning to work correctly. This is done by drag'n drop of each receiver to the correct placment relative to the topside unit. The position of each receiver is seen below in the map view. It you click on the receiver you get a pop up with the possibility to write its exact placment. Once this is done you can limit the search range by using the same drag and drop feature.</p> <p>Warning</p> <p>If you are using the Locator-A1 or S1, you need to provide depth information to the topside unit. This is achieved using the explorer-kit API.</p> <p>Tip</p> <p>Reducing the search range helps to improve the performance of the system. It is recomended to limith this range if you are operating in a smaller area. This is especially important in tanks.</p> <p>You are now ready to explore the underwater world and knowing where you are at the same time.</p>"},{"location":"explorer-kit/receiver-d1/","title":"Receiver-D1","text":"<p>Buy Receiver-D1 here!</p>"},{"location":"explorer-kit/receiver-d1/#description","title":"Description","text":"<p>The Receiver-D1 is a digital low-noise, high sensitivity hydro acoustic receiver that converts acoustic waves to a digital data stream. The receiver is equipped with a wideband analog front-end width a large dynamic range followed by advanced digital signal processing functionality. The electrical interface complies with the Water Linked D1 communication standard.</p>"},{"location":"explorer-kit/receiver-d1/#benefits","title":"Benefits","text":"<ul> <li> <p>Extremely small footprint enabling easy integration in other equipment.</p> </li> <li> <p>Highly robust operation in areas with reflections (shallow water, around installations etc.)</p> </li> </ul>"},{"location":"explorer-kit/receiver-d1/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the Receiver interface connectors.</p> <p></p> <p></p>"},{"location":"explorer-kit/receiver-d1/#dimensions","title":"Dimensions","text":""},{"location":"explorer-kit/receiver-d1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"explorer-kit/upgrader/","title":"Software update","text":"<p>As of software release 2.1.0 the system automatically checks for updates when the host computer is connected to internet. If you have the latest release you will see a green checkmark as shown below. An exclamation mark will indicate if a newer release is available.</p> <p></p> <p>A software update package (.wlup file) includes all files required to update the system. The software package is encrypted and will only work for the Chip ID it is generated for. The Chip ID can be found in the About tab of the GUI.</p>"},{"location":"explorer-kit/upgrader/#update-process","title":"Update process","text":"<p>Please select the update process that is best suited to you:</p> <ul> <li>Type http://192.168.2.94 in your web browser. If the Underwater GPS GUI is visible to you, please use the Update with static IP.</li> <li>If the Underwater GPS GUI is not shown when using the link above, please use the Update with DHCP.</li> </ul> <p>Warning</p> <p>The software upgrade will clear the receiver configuration, settings and POIs. Make sure to save the information you need before upgrading.</p>"},{"location":"explorer-kit/upgrader/#download-software-package","title":"Download software package","text":"<p>To get the latest software package for your kit:</p> <ul> <li>Download directly from the \"About\" page of the Underwater GPS GUI</li> <li>Alternatively: Go to update.waterlinked.com and enter the Chip ID of your kit.</li> </ul>"},{"location":"explorer-kit/upgrader/#update-using-static-ip","title":"Update using static IP","text":"<p>This procedure works if you have haven't changed the jumpers on the Master-D1, you have set up a static IP address on your computer and you are able to see the gui on http://192.168.2.94.</p> Step Description 1 Download the software package (.wlup) for your kit Download software package 2 Power off the system 3 Connect the upgrade plug included in the kit or connect GPIO0 to ground using a jumper cable 4 Power on the system 6 Open the web gui by typing http://192.168.2.94 in your web browser. If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 7 Remove the upgade plug or the jumper grounding GP0. 8 Click \u201cBrowse file\u201d and select correct &lt;&gt;.wlup file 9 Wait for update process to complete 10 When the update process is complete and successful, the system will automatically reboot to standard mode If process fails, please try again 11 Verify that the SW version has updated by going to the web gui http://192.168.2.94 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 12 Upgrade process complete Celebrate with your favorite beverage"},{"location":"explorer-kit/upgrader/#update-using-dhcp","title":"Update using DHCP","text":"<p>This procedure works if you don't know how to set a static IP address on your computer.</p> Step Description 1 Download the software package (.wlup) for your kit Download software package 2 Power off the system 3 Set Master-D1 to DHCP Server. (Remember original setting) See network settings 4 Connect a network cable directly from your computer to the Master-D1 5 Configure the network on your computer to get IP address from DHCP (this is default on most computers, so if you haven't set a static ip you're good) 6 Connect the upgrade plug included in the kit or connect GPIO0 to ground using a jumper cable 7 Power on the system 8 In your web browser, open http://192.168.0.1 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 9 Remove the grounding of GP0. 10 Click \u201cBrowse file\u201d and select correct &lt;&gt;.wlup file 11 Wait for update process to complete 12 When the update process is complete and successful, the system will automatically reboot to standard mode If process fails, please try again 13 Verify that the SW version has updated by opeing the web gui in your browser: http://192.168.0.1 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 14 Reset network settings to original setting from step 2 See network settings. 15 Upgrade process complete Celebrate with your favorite beverage"},{"location":"explorer-kit/warnings/","title":"Warnings","text":"<p>To avoid the risk of damage to the Underwater GPS, please read this user manual carefully before it is installed and used for the first time.</p> Operation area The Underwater GPS system ONLY  work in water. It does not work in air. Max voltage The absolute maximum voltage rating of the equipment is 18V. Voltages above this will damage the electronics. Reverse voltage The board does not have reverse polarity protection. Do not apply a negative voltage to the red power wire as this will damage the electronics. Temperature Make sure the system does not overheat. Avoid placing it in direct sunlight over extended periods of time. Salt water The Master-D1 Electronics will corrode if it comes in contact with salt water. Keep the housing lid closed when in the field to avoid salt water to get in contact with any electronics. Force Avoid using excessive force on connectors, screws and other parts of the system as this can lead to mechanical damage."},{"location":"explorer-kit/gui/api/","title":"API","text":"<p>The Underwater GPS system comes with an easy-to-use software HTTP API. Through the API you can, amongst other things:</p> <ul> <li> <p>Read acoustic and global position data</p> </li> <li> <p>Read GPS and IMU raw data</p> </li> <li> <p>Read and set POIs</p> </li> <li> <p>Set configuration parameters</p> </li> </ul> <p>See demo.waterlinked.com/swagger for the details of the API.</p>"},{"location":"explorer-kit/gui/api/#interaction","title":"Interaction","text":"<p>Any programming language can be used to interact with the API. We have examples in both python and go, which currently cover, for instance:</p> <ul> <li>Sending of locator depth when using the A1 locator (see the script <code>externaldepth.py</code>).</li> <li>Sending in of satellite GPS data (positioning and/or heading) from an external GPS receiver (see the script <code>nmeainput.py</code> or its go analogue)</li> <li>Export of tracks to a GPX file (see the script <code>tracklog.py</code>)</li> <li>Output of the positions calculated by the UGPS G2 system in NMEA format (see the script <code>nmeaoutput.py</code> or its go analogue)</li> </ul>"},{"location":"explorer-kit/gui/diagnostic/","title":"Diagnostics","text":"<p>Verify Receiver signal strength in the diagnostic page on the web GUI by going to the diagnostic tab in the side panel on the left. This view will show the signal strength from all Receivers. It should look something like this:</p> <p></p> <p>In the diagnostic plot you should see the signal from all 4 Receivers. The signals should be well above the noise floor.</p>"},{"location":"explorer-kit/gui/diagnostic/#interference","title":"Interference","text":"<p>Acoustic interference can be observed in the diagnostic plot. Echo sounders from your boat or nearby boats typically appears like burst noise.</p> <p></p> <p>If it is coming from your boat, try to turn off the echo sounder to improve position accuracy. In case of interference from other acoustic sources, use the GUI to try other channels to avoid the interference.</p>"},{"location":"explorer-kit/gui/position/","title":"Position view","text":"<p>The Underwater GPS GUI is web based. Using your favorite web browser, go the IP address as defined here. We currently support and recommend Chrome, Firefox and Safari.</p> <p>Attention</p> <p>Internet Explorer is not supported as of now.</p> <p></p>"},{"location":"explorer-kit/gui/receivers/","title":"Receivers","text":""},{"location":"explorer-kit/gui/receivers/#receiver-guidelines","title":"Receiver Guidelines","text":"<p>You may place the Receivers at any location within 100m from the top-side housing / Master_D1. In order to ensure the best performance, you should follow a few guidelines:</p> Line-of-sight Try to place the Receivers so they all have a free line-of-sight to the Locator. Good Separation The system performs better when there is a decent distance between the Receivers. More separation is better, but 2x2 meters is sufficient for good performance. Max Range There should be maximum of 100m from any Receiver to the Locator Receiver Depth Place the Receivers at a few meters depth. Near the surface there are typically small air bubbles caused by waves. These small air bubbles attenuate the acoustic signal and can reduce the system performance. Limit search area You will get a better position if you help the search algorithm to narrow the search area. Limit the search range setting to the area where the Locator is expected to be. Directivity The Receivers and Locators are fully omnidirectional and transmits/receives equally good in all directions. The only direction with less performance is backwards where the cable enters. Receiver stability Add some weight to the Receiver cable just above the Receiver so they hang straight down in the water On board GPS If the master electronics is static during operation it is recommended to use the static option for the GPS. This is to remove the inaccuracy of the GPS Receiver in global position. Only use onboard GPS when the reference system is moving eg. if mounted to a boat."},{"location":"explorer-kit/gui/receivers/#reference-systems","title":"Reference Systems","text":"<p>In order to calculate the absolute position of the Locator we need to define two reference systems, the acoustic and the global reference system. The global reference system is defined by latitude and longitude and is the reference system used by the GPS and in maps.</p> <p></p> <p>The acoustic reference system  (the x and y axis) is defined by the orientation of the housing. The housing is by definition located in origin (x=0, y=0).  A label on top of the lid indicates the x-y coordinate system.</p> <p></p> <p></p>"},{"location":"explorer-kit/gui/receivers/#boat-example","title":"Boat Example","text":"<p>The illustration bellow shows a typical Receiver configuration when installed on a boat. The Receivers are hanging from the side of the boat, one in each corner. The depth of the Receivers are typically 2-4m, deep enough to get below the hull and get free line-of-sight to the Locator. Notice how the housing defines the origin and coordinate system of the acoustic reference system.</p> <p></p>"},{"location":"explorer-kit/gui/settings/","title":"Settings","text":""},{"location":"explorer-kit/gui/settings/#locator-setup","title":"Locator setup","text":"<p>In this section you choose which locator you are using with the system and on which channel it is sending. The Water Linked default channel is 17 and this is the channel that the Locator-S1 is running on. If using the Locator-U1 the channel needs to macth the rotary switch at the back of the U1.</p> <p>Warning</p> <p>If you are using the Locator-A1 or S1, you need to provid depth information to the topside unit. This is implemented through the explorer-kit'sAPI.</p>"},{"location":"explorer-kit/gui/settings/#top-side-setup","title":"Top-side Setup","text":"<p>In this section you have the option to choose which GPS and IMU source you are going to use. We strongly advise to use static or external GPS when operation allow for it. Because the master-D1 electronics has a standard GPS receiver it has a standard deviation of around 2-3 meters. </p> <p>How to input external GPS and IMU with the API is decribed here.</p>"},{"location":"explorer-kit/gui/settings/#user-preferences","title":"User preferences","text":"<p>In the user preferences section you can select the unit of messurments you want to use. We support both Metric and Imperial. You can also select if you want a dummy boat to be displayed on the map pages and the receiver configuration page. </p>"},{"location":"explorer-kit/locators/locator-a1/","title":"Locator-A1","text":"<p>Buy Locator-A1 here!</p>"},{"location":"explorer-kit/locators/locator-a1/#description","title":"Description","text":"<p>The Locator-A1 has the smallest physical footprint in our series of locators. It can be integrated into even the most compact ROVs. The Locator-A1 does not carry its own depth sensor, and the Master-D1 requires that the depth be provided from your underwater vehicle (ROV etc.) This can be achieved by means of the UGPS API.</p>"},{"location":"explorer-kit/locators/locator-a1/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the A1 interface connectors.</p> <p></p>"},{"location":"explorer-kit/locators/locator-a1/#dimensions","title":"Dimensions","text":""},{"location":"explorer-kit/locators/locator-a1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"explorer-kit/locators/locator-d1/","title":"Locator-D1","text":"<p>Buy Locator-D1 here!</p>"},{"location":"explorer-kit/locators/locator-d1/#description","title":"Description","text":"<p>The Locator-D1 carries its own depth sensor and can therefore operate fully stand-alone and independent of the device you want to position.</p> <p>Warning</p> <p>The Locator-D1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings.</p>"},{"location":"explorer-kit/locators/locator-d1/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the D1 interface connectors.</p> <p></p> <p></p>"},{"location":"explorer-kit/locators/locator-d1/#dimensions","title":"Dimensions","text":""},{"location":"explorer-kit/locators/locator-d1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"explorer-kit/locators/locator-s1/","title":"Locator-S1","text":""},{"location":"explorer-kit/locators/locator-s1/#description","title":"Description","text":"<p>The Locator-S1 carries an internal GPS based time sync module. Because of this, the S1 does not require tether integration for top-side communication. It only requires external power 10-18V to be provided from the underwater device.</p> <p>Some Locator-S1 attributes can be configured using an integrated UART (3V3) interface. This configuration is optional and not required for normal operation. Before deployment in water, the Locator-S1 needs to achieve a GPS lock. The integrated status-LED shows the condition of the GPS lock. Once the Locator-S1 has lock it can operate for approximately 6 hours befor needing resync with GPS.</p> <p>Note</p> <p>The default channel for Locator-S1 is 17 on boot.</p> <p>Locator-S1 supports channel 16,17 and 18.</p> <p>As the Locator-S1 does not carry its own depth sensor, the depth needs to be provided from the underwater vehicle (ROV etc.) to the topside Master-D1 using the software API. This can be achieved by means of the UGPS API.</p>"},{"location":"explorer-kit/locators/locator-s1/#led-signals","title":"LED Signals","text":"<ul> <li> <p>No green light: Power is off and the unit is not ready for diving.</p> </li> <li> <p>Flashing green light (once a second): Searching for GPS lock. The unit is not ready to dive.</p> </li> <li> <p>Fixed green light: GPS lock is achieved. The unit is ready to dive.</p> </li> <li> <p>Flashing green light (slow): GPS lock has been acheived but lost. The unit is ready to dive.</p> </li> </ul>"},{"location":"explorer-kit/locators/locator-s1/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the S1 interface.</p> Interface Color Positive (10-18V) Orange Negative Orange/White UART RX Brown UART TX Brown/White"},{"location":"explorer-kit/locators/locator-s1/#terminal-interface","title":"Terminal Interface","text":"<p>The Locator-S1 has a simple 3.3 volt UART interface which is used to change the channel of the locator.</p> Settings Value Baud rate 9600 Data parity stop 8N1 Flow control None"},{"location":"explorer-kit/locators/locator-s1/#dimensions","title":"Dimensions","text":""},{"location":"explorer-kit/locators/locator-s1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"explorer-kit/locators/locator-u1/","title":"Locator-U1","text":"<p>Buy Locator-U1 here!</p>"},{"location":"explorer-kit/locators/locator-u1/#description","title":"Description","text":"<p>The Locator-U1 is a battery powered, digital hydro acoustic locator device. It carries an internal GPS based time sync module, which means no tether is required. This Locator fits well for divers, ROVs where power is not easily accessible, or other underwater applications.</p> <p>The internal battery is rechargeable using the USB-C cable that follows and standard 5V USB charger. Before deployment in water, the Locator-U1 needs to achieve a GPS lock. The integrated status-LED shows the condition of the GPS lock. Once the Locator-U1 has lock it can operate for approximately 6 hours befor needing resync with GPS.</p> <p>The Locator-U1 has a rotary switch located on the inside of the cap. This switch is used to change the channel on which the Locator is transmitting. The same channel needs to be selected in the Water Linked Underwater GPS GUI.</p> <p>The Locator has 3 mounting holes on each side for M3 screws. A default bracket is included.</p>"},{"location":"explorer-kit/locators/locator-u1/#charging","title":"Charging","text":"<p>Insert included USB-C cable into a wall adapter (2A/5V) and connect it to the Locator-U1. The Locator LED will normally start pulsating while charging and turn solid green once charging has finished.</p> <p>Note: If battery is fully discharged the pulsating will not be activated. The Locator will still charge regardless of the LED not showing the charge indication. The Locator will in this cause show searching for GPS lock or GPS lock achieved indication.</p> <p>Note: Some Locator-U1 units are produced with a fault that causes them to never be able to show the charge indication. The Locator will still charge and operate as normal during use.</p> <p>Charging time is 7 hours.</p>"},{"location":"explorer-kit/locators/locator-u1/#powering-onoff","title":"Powering on/off","text":"<p>To power on the Locator-U1 simply tighten the lid over the charging port. The the LED will start to blinking indicating that the Locator is searching for GPS lock. The Locator is ready to use when the LED stops blinking and turns solid. Before powering on, ensure the O-ring within the lid is without damage.</p> <p>To power off the Locator-U1 unscrew the back lid until the LED turns off.</p>"},{"location":"explorer-kit/locators/locator-u1/#led-signals","title":"LED Signals","text":"<ul> <li> <p>No green light: Power is off and the unit is not ready for diving.</p> </li> <li> <p>Flashing green light (once a second): Searching for GPS lock. The unit is not ready to dive.</p> </li> <li> <p>Fixed green light: GPS lock is acheived. The unit is ready to dive.</p> </li> <li> <p>Flashing green light (slow): GPS lock has been acheived but lost. The unit is ready to dive.</p> </li> <li> <p>Pulsating green light : The Locator-U1 is charging. The unit is not ready to dive. See charge description above.</p> </li> <li> <p>Fast flashing green light (multiple times pr second): Error indication. The unit is not ready to dive. Typically this is caused by exceeding dive time and the pressure sensor needing to dry. Charging the Locator is the fastest way to dry the pressure sensor.</p> </li> </ul> <p>Warning</p> <p>The Locator-U1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings.</p>"},{"location":"explorer-kit/locators/locator-u1/#wiring-interface","title":"Wiring interface","text":"<p>Because the U1 is battery powered the only interface for it is the charing port which is a standard USB-C type connector.</p>"},{"location":"explorer-kit/locators/locator-u1/#included-in-package","title":"Included in package","text":"<ul> <li> <p>Locator-U1</p> </li> <li> <p>USB-C charging cable</p> </li> <li> <p>Bracket for mounting</p> </li> </ul>"},{"location":"explorer-kit/locators/locator-u1/#dimensions","title":"Dimensions","text":""},{"location":"explorer-kit/locators/locator-u1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"io-interface-cards/io-interface-rev4/","title":"Revision 4","text":""},{"location":"io-interface-cards/io-interface-rev4/#io-interface","title":"I/O interface","text":"<p>The I/O Interface provides a simple means of connection to Water Linked products. It provides magnetics for the ethernet connection and utilizes the Molex Micro-Fit 3.0 power connector (Part number: 436500204) which is standard for Water Linked products. Female connectors is listed under Mates with Part(s) </p> <p>There currently exists three revisions of the I/O Interface. Revision 2 and 3 are electrically identical. Revision 4 has an integrated USB-to-UART interface and a micro USB port.</p>"},{"location":"io-interface-cards/io-interface-rev4/#revision-4","title":"Revision 4","text":"<p>Dimensions: 50.6 x 47 x 18.6 mm (Width x Height x Thickness)</p> Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T Micro USB Serial FTDI based Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Fits W\u00fcrth 691137710002"},{"location":"io-interface-cards/io-interface-rev6/","title":"Revision 6","text":""},{"location":"io-interface-cards/io-interface-rev6/#io-interface","title":"I/O interface","text":"<p>The I/O Interface provides a simple means of connection to Water Linked products. It provides power and connection interfaces for Water Linked sensors during development. </p> <p>It utilizes the Molex Micro-Fit 3.0 power connector (Part number: 436500228). Female connectors are listed under Mates with Part(s).</p> <p>There currently exist multiple revisions of the I/O Interface. Revision 2 and 3 are electrically identical. Revision 4 has an integrated USB-to-UART interface and a micro USB port. Revision 6 has upgraded connection options, including screw terminals and RS-232. </p> <p>I/O interfaces have the part number WL-31014-X, where X is the revision number.</p>"},{"location":"io-interface-cards/io-interface-rev6/#revision-6","title":"Revision 6","text":"<p>Dimensions: 50.6 x 47 x 18.6 mm (Width x Height x Thickness)</p> Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE T Screw Terminal or CONN HEADER VERT 3POS 2.54MM RS 232 CONN HEADER VERT 3POS 2.54MM UART Molex Micro Fit 3.0 or 5 mm Screw Terminal Power 10 to 30 VDC"},{"location":"modem-m16/modem-m16-diagnostic-report/","title":"Diagnostic report","text":"<p>This document describes the structure of the diagnostic report and how to decode it.</p>"},{"location":"modem-m16/modem-m16-diagnostic-report/#packet-structure-of-the-diagnostic-report","title":"Packet Structure of the Diagnostic Report","text":"<p>When in diagnostic mode (or upon a report request in transparent mode), the modem sends an 18-byte report. The byte layout is:</p> Byte (bit) Field Description 0 (0:7) <code>START_OF_FRAME (SOF)</code> \u201c$\u201d (0x24) 1:2 (0:15) <code>TB</code> Transport block containing 2 bytes of received data. 3 (0:7) <code>BER</code> Bit error rate 4 (0:7) <code>SIGNAL_POWER</code> Relative signal power (0\u2013255) 5 (0:7) <code>NOISE_POWER</code> Relative noise power (0\u2013255) 6:7 (0:15) <code>PACKET_VALID</code> Indicates packet integrity: LDPC decode + CRC successful 8 (0:7) <code>PACKET_INVALID</code> CRC check failed 9 (0:7) <code>GIT_REV</code> Firmware revision (Git commit hash, 8-bit) 10:12 (0:23) <code>TIME_FROM_BOOT</code> Time since power-up in 10 ms increments 13:14 (0:15) <code>CHIP_ID</code> FPGA chip ID 15 (0:1) <code>HW_REV</code> Hardware revision (2 bits) 15 (2:5) <code>CHANNEL</code> Active communication channel (1\u201312) 15 (6) <code>TB_VALID</code> Transport block valid bit; indicates new TB data 15 (7) <code>TX_COMPLETE</code> Indicates that a transmission has finished 16 (0) <code>DIAGNOSTIC_MODE</code> 1 if in diagnostic mode; 0 otherwise 16 (1) <code>RESERVED</code> Reserved bit 16 (2:3) <code>POWER_LEVEL</code> Current power level (0 = L4, 1 = L3, 2 = L2, 3 = L1) 16 (4:7) <code>RESERVED</code> Reserved bits 17 (0:7) <code>END_OF_FRAME (EOF)</code> New line (\u201c\\n\u201d) <p>Warning</p> <p>Signal Power &amp; Noise Power - Both range from 0 to 255. - When the modem is idle (not transmitting or receiving), Signal Power reflects the background noise floor, which should match Noise Power. - During packet decoding, <code>SIGNAL_POWER</code> should be greater than <code>NOISE_POWER</code> for a successful decode.</p> <p>Practical Tip - Record the Noise Power while idle as your baseline (noise floor). - Compare that with Signal Power during active communication. - The bigger the gap, the better the link quality. (Could be closer to each other)</p>"},{"location":"modem-m16/modem-m16-diagnostic-report/#example-python-report-parser","title":"Example Python Report Parser","text":"<pre><code>def decode_packet(packet: bytes) -&gt; Optional[Dict[str, Any]]:\n    \"\"\"\n    Decode a packet received from the modem.\n\n    Parameters\n    ----------\n    packet : bytes\n        The raw packet (18 bytes) starting with '$' (0x24) and ending with '\\n' (0x0A).\n\n    Returns\n    -------\n    Optional[Dict[str, Any]]\n        A dictionary with decoded values if valid, or None otherwise.\n    \"\"\"\n    if len(packet) != 18 or packet[0] != ord('$') or packet[-1] != ord('\\n'):\n        return None\n\n    # The 16 bytes after the '$' and before the '\\n'\n    data = packet[1:17]\n    decoded = struct.unpack(\"&lt;HBBBHBBBBBHBB\", data)\n\n    decoded_dict = {\n        \"TR_BLOCK\": decoded[0],\n        \"BER\": decoded[1],\n        \"SIGNAL_POWER\": decoded[2],\n        \"NOISE_POWER\": decoded[3],\n        \"PACKET_VALID\": decoded[4],\n        \"PACKET_INVALID\": decoded[5],\n        \"GIT_REV\": decoded[6].to_bytes(1, \"little\"),\n        \"TIME\": (decoded[9] &lt;&lt; 16) | (decoded[8] &lt;&lt; 8) | decoded[7],\n        \"CHIP_ID\": decoded[10],\n        \"HW_REV\": decoded[11] &amp; 0b00000011,\n        \"CHANNEL\": (decoded[11] &amp; 0b00111100) &gt;&gt; 2,\n        \"TB_VALID\": (decoded[11] &amp; 0b01000000) &gt;&gt; 6,\n        \"TX_COMPLETE\": (decoded[11] &amp; 0b10000000) &gt;&gt; 7,\n        \"DIAGNOSTIC_MODE\": decoded[12] &amp; 0b00000001,\n        \"LEVEL\": (decoded[12] &amp; 0b00001100) &gt;&gt; 2,\n    }\n\n    return decoded_dict\n</code></pre>"},{"location":"modem-m16/modem-m16-faq/","title":"Modem M16 FAQ","text":"<p>Below are some frequently asked questions about the Modem M16. Click on a question in the table of contents to the right or simply scroll down to read the FAQs.</p>"},{"location":"modem-m16/modem-m16-faq/#1-can-the-m16-modem-measure-the-rangedistance-between-two-modems","title":"1. Can the M16 modem measure the range/distance between two modems?","text":"<p>No, the modem's uses an unsynchronized method of sending data meaning that an time of flight estimate would give large errors in the range estimations. The acoustic signal is not synced but known to be within some time frame of 25ms. </p> <p>However if looking at the Signal to noise ratio (SNR) you can use it to indicate that the distance between the modems is fare or close. For example would a grater SNR (better signal) indicate that it is most likely close as it has so good signal.  </p>"},{"location":"modem-m16/modem-m16-faq/#2-do-the-modem-retransmit-data-packets","title":"2. Do the modem retransmit data packets?","text":"<p>Yes, If the modem is set to parrot mode (see Parrot Mode), it will retransmit all packets it has received.</p>"},{"location":"modem-m16/modem-m16-faq/#3-does-the-modem-need-line-of-sight-to-communicate-between-them","title":"3. Does the modem need line of sight to communicate between them?","text":"<p>Yes, they do.</p>"},{"location":"modem-m16/modem-m16-faq/#4-can-the-modem-be-mounted-below-a-shell-on-an-rov","title":"4. Can the modem be mounted below a shell on an ROV?","text":"<p>No, the transducer part of the modem must be in the water to be able to send and receive signals.</p>"},{"location":"modem-m16/modem-m16-faq/#5-how-should-the-modem-be-mounted-to-achiecve-the-best-possible-signal-strength","title":"5. How should the modem be mounted to achiecve the best possible signal strength","text":"<p>The signal strength from the Modem-M16 is donut-shaped around the transducer.</p> <p>Below is a simple scetch that illustrates the signal strength in all directions. For shorter distances the mounting is not relevant, as the signal is transmitted in all directions and also reflected at the surface, seabed or other constructions in the water. On long distances or to achieve optimal behaviour, the mounting position might slightly impact the signal range of the modem.  </p>"},{"location":"modem-m16/modem-m16-gui/","title":"GUI","text":""},{"location":"modem-m16/modem-m16-gui/#basic-gui-for-easy-implementation","title":"Basic GUI for easy implementation","text":"<p>For simple operation and tests there is a GUI available for download at: github for examples with Modem M16 When you follow the link, in the right menu, under Releases, press \"Release 2025.06.12-1045</p> <p>This executable provides a user-friendly interface to test and verify modem functionality. It demonstrates key features and allows for quick setup and communication testing between modems. Additionally it is a good starting point to get to know the functionality of the modem without Python. The app is a tkinter app that communicates with the modem through m16_driver.py.</p>"},{"location":"modem-m16/modem-m16-gui/#gui-installation-for-windows","title":"GUI installation for windows:","text":"<ul> <li>Under \"Assets\", download gui.exe</li> <li>If window complains about the security you need to press \"more info\" and \"allow\"</li> <li>A powershell window will open up - just wait</li> <li>The GUI opens up and is ready for use</li> </ul> <p>The default port is set to COM3, the user may need to change this to the appropriate port.</p>"},{"location":"modem-m16/modem-m16-gui/#gui-installation-for-linux","title":"GUI installation for linux:","text":"<p>Follow the installation guide provided in README at github for examples with Modem M16</p>"},{"location":"modem-m16/modem-m16-gui/#gui-layout-example","title":"GUI layout example:","text":""},{"location":"modem-m16/modem-m16-integration/","title":"Integration","text":"<p>This document describes an overview of how the underwater modem can be operated. The modem can be controlled using a 3.3V UART or RS422 connection. It is offering two primary operational modes (transparent mode and diagnostic mode), four different power levels, user-selectable communication channels, and a possibility to set the modem in parrot mode for testing.</p> <p>For details of the protocol used to implement the settings, see Modem-M16-Protocol</p>"},{"location":"modem-m16/modem-m16-integration/#interface-overview","title":"Interface overview","text":"<p>The standard Modem-M16 has a 3.3V TTL UART  interface and the extended version has a RS422 interface. Both with the following configuration:</p> Settings Value Baud rate 9600 Data parity stop 8N1 Flow control None <p>Through this serial link, you can:</p> <ul> <li>Set operational modes  </li> <li>Change communication channels  </li> <li>Request diagnostic reports  </li> <li>Adjust power levels for transmission range/power consumption  </li> <li>Set modem in parrot mode for testing</li> </ul>"},{"location":"modem-m16/modem-m16-integration/#settings-interface","title":"Settings Interface","text":"<p>You can configure the modem by issuing commands over the serial link. Five user-configurable parameters are available:</p> <ol> <li>Communication Channel </li> <li>Operation Mode </li> <li>Power Level</li> <li>Report Request </li> <li>Parrot mode</li> </ol> <p>Each configuration command requires sending specific characters with a 1-second pause between them, followed by a character that selects the new value. For details on how to send the commands, see the configuration protocol:Modem-M16-Protocol</p>"},{"location":"modem-m16/modem-m16-integration/#communication-channel","title":"Communication Channel","text":"<p>The modem can operate on 12 channels (1 to 12). This allows for several modems to be used at the same time. Two modems must share the same channel to communicate. There are two ways to implement communication between several modems. You can have several sending modems that transmit on different channels, and one receiving modem that switch between the channels to listen for messages, or you can have several sending and receiving modems, where every two modems are sending and listening to each other on the same channel.</p>"},{"location":"modem-m16/modem-m16-integration/#operational-modes","title":"Operational Modes","text":"<p>The modem supports two main operational modes:</p> <p>Transparent Serial Mode </p> <ul> <li>Processes and transmits only 2 bytes of data per packet.  </li> <li>Each transmission takes ~1.6 seconds (acoustic wave duration).  </li> <li>Data beyond the first 2 bytes in a transmission is discarded.</li> </ul> <p>Diagnostic Mode</p> <ul> <li>Sends detailed status reports, the same report that can be retrieved with the \"request report\" command, including:  <ul> <li>Transport Block (TB)  </li> <li>Bit Error Rate (BER)  </li> <li>Signal &amp; Noise Power  </li> <li>LDPC/CRC Validity  </li> <li>Firmware Revision  </li> <li>Time Since Power-Up  </li> <li>FPGA Chip ID, Hardware Revision  </li> <li>Communication Channel  </li> <li>TX-Complete Status  </li> <li>Power Level Setting  </li> </ul> </li> <li>Still limited to 2 bytes of payload per transmission (discarding any additional data).  </li> <li>Reports are triggered automatically when:<ol> <li>A new packet is received (TB Valid bit is set)  </li> <li>A transmission completes (TX Complete bit is set)  </li> <li>4 seconds have elapsed since the last report  </li> </ol> </li> </ul> <p>Note</p> <p>You can also request a diagnostic report while in transparent mode. See the Request Report Command section.</p>"},{"location":"modem-m16/modem-m16-integration/#power-levels","title":"Power Levels","text":"<p>The modem has four power levels where 1 is the weakest and 4 is the strongest level. If you need to save power and do not require the signal to travel a long distance, you might want to choose a lower power level. By default the modem is set to maximal power and range. Up to 1000m.</p> Power Level Avg. TX Power (mW) Typical Max Range (m) 1 390 300 2 555 600 3 790 900 4 (Default) 1105 1000 <p>Note</p> <p>Maximum range is highly dependent on environmental factors, including noise levels and line-of-sight conditions between modems.</p>"},{"location":"modem-m16/modem-m16-integration/#request-report","title":"Request Report","text":"<p>The diagnostic report provided by this command is the same as the report retrieved every fourth second in diagnostic mode. </p> <p>In both diagnostic and transparent modes, you can request a report at any time.</p> <p>When a command is sent the modem will immediately generate a diagnostic report.</p> <p>For details of the structure of the diagnostic report and how it can be decoded see Diagnostic report</p>"},{"location":"modem-m16/modem-m16-integration/#parrot-mode","title":"Parrot mode","text":"<p>A modem can be set to parrot mode, which might be useful for tests. When a modem is in parrot mode it always immediately returns the acoustic message it receives.  This can typically be used in range tests with one modem set to parrot mode and one modem sending an acoustic message and wait for it to be returned.</p> <p>Note</p> <p>Do not forget to reset parrot mode after use.</p>"},{"location":"modem-m16/modem-m16-integration/#ensuring-successful-transmission-optimization","title":"Ensuring Successful Transmission &amp; Optimization","text":""},{"location":"modem-m16/modem-m16-integration/#diagnostic-mode","title":"Diagnostic Mode","text":"<p>A report is sent immediately after each transmission. Monitor the TX_COMPLETE bit in the report to know when the modem is ready for the next 2-byte packet. This approach maximizes overall throughput.</p>"},{"location":"modem-m16/modem-m16-integration/#transparent-serial-mode","title":"Transparent Serial Mode","text":"<p>Send 2 bytes, then wait at least 1.6 seconds (the transmission duration) before sending the next 2 bytes to avoid data loss.</p>"},{"location":"modem-m16/modem-m16-integration/#flash-memory-considerations","title":"Flash Memory Considerations","text":"<p>Changing the modem mode, channel, or power level initiates a flash write operation, which takes about 1 second. During this time:</p> <ul> <li>The modem will not respond to commands.  </li> <li>Do not power off the modem to avoid corrupting settings.</li> </ul> <p>Once the flash write completes, the modem resumes normal operation with the updated configuration.</p>"},{"location":"modem-m16/modem-m16-integration/#firmware-release-notes","title":"Firmware Release Notes","text":"<p>Below is a summary of the new features introduced in every firmware release:</p> FW release (ASCII/HEX) Description o/6f Initial firmware release V/56 Added power-level configuration for extended battery runtime and reduced range"},{"location":"modem-m16/modem-m16-protocol/","title":"Protocol","text":""},{"location":"modem-m16/modem-m16-protocol/#modem-m16-protocol","title":"Modem-M16 Protocol","text":"<p>You can configure the modem by issuing commands over the serial link. Five user-configurable parameters are available:</p> <ol> <li>Communication Channel </li> <li>Operation Mode </li> <li>Report Request </li> <li>Power Level</li> <li>Parrot mode</li> </ol> <p>Each configuration command requires sending specific characters with a 1-second pause between them, followed by a character that selects the new value. Refer to the relevant section below.</p> <p>Note</p> <p>The timing of the commands need to be separated by exactly 1 second, if not it will interpret the input as a package to be sent.  Doing this by hand is almost impossible, so it is advised to make a programmed user interface, or use the provided GUI (see WL GUI).</p>"},{"location":"modem-m16/modem-m16-protocol/#communication-channel-command","title":"Communication Channel Command","text":"<p>The modem can operate on 12 channels (1 to 12). Two modems must share the same channel to communicate.</p> <p>Procedure:</p> <ol> <li>Send <code>\"c\"</code> (0x63).  </li> <li>Wait 1 second.  </li> <li>Send another <code>\"c\"</code> (0x63).  </li> <li>Within 2 seconds, send one character (<code>\"1\"</code>\u2013<code>\"c\"</code>) to set the desired channel.</li> </ol> Channel Character HEX-Value 1 \"1\" 0x31 2 \"2\" 0x32 3 \"3\" 0x33 4 \"4\" 0x34 5 \"5\" 0x35 6 \"6\" 0x36 7 \"7\" 0x37 8 \"8\" 0x38 9 \"9\" 0x39 10 \"a\" 0x61 11 \"b\" 0x62 12 \"c\" 0x63 <p>Example (Channel 11): 1. Send <code>\"c\"</code> 2. Wait 1 second 3. Send <code>\"c\"</code> again 4. Within 2 seconds, send <code>\"b\"</code> (0x62)  </p>"},{"location":"modem-m16/modem-m16-protocol/#setting-operational-mode","title":"Setting Operational Mode","text":"<p>To toggle between diagnostic mode and transparent serial mode:</p> <ol> <li>Send <code>\"m\"</code> (0x6D).  </li> <li>Wait 1 second.  </li> <li>Send <code>\"m\"</code> again.  </li> </ol> <p>The modem will switch modes (e.g., if you were in transparent mode, it will switch to diagnostic).</p>"},{"location":"modem-m16/modem-m16-protocol/#setting-power-level","title":"Setting Power Level","text":"<p>To adjust the modem\u2019s power level (1\u20134):</p> <ol> <li>Send <code>\"l\"</code> (0x6C).  </li> <li>Wait 1 second.  </li> <li>Send <code>\"l\"</code> again.  </li> <li>Within 2 seconds, send one character (<code>\"1\"</code>, <code>\"2\"</code>, <code>\"3\"</code>, or <code>\"4\"</code>).</li> </ol> Power Level Character HEX-Value Avg. TX Power (mW) Typical Max Range (m) 1 \"1\" 0x31 390 300 2 \"2\" 0x32 555 600 3 \"3\" 0x33 790 900 4 (Default) \"4\" 0x34 1105 1000 <p>Note</p> <p>Maximum range is highly dependent on environmental factors, including noise levels and line-of-sight conditions between modems.</p> <p>Example (Set Power Level 3): 1. Send <code>\"l\"</code> (0x6C). 2. Wait 1 second. 3. Send <code>\"l\"</code> (0x6C) again. 4. Within 2 seconds, send <code>\"3\"</code> (0x33).  </p>"},{"location":"modem-m16/modem-m16-protocol/#request-report-command","title":"Request Report Command","text":"<p>In both diagnostic and transparent modes, you can request a report at any time:</p> <ol> <li>Send <code>\"r\"</code> (0x72).  </li> <li>Wait 1 second.  </li> <li>Send <code>\"r\"</code> (0x72) again.</li> </ol> <p>The modem will immediately generate a diagnostic report.</p>"},{"location":"modem-m16/modem-m16-protocol/#set-parrot-mode","title":"Set parrot mode","text":"<p>In parrot mode the modem immediately return the message it just got. This feature can be useful mainly for testing of the modem.</p> <p>To set parrot mode:</p> <ol> <li>Send <code>\"P\"</code> (0x72).  </li> <li>Wait 1 second.  </li> <li>Send <code>\"P\"</code> (0x72) again.</li> </ol> <p>To reset parrot mode:</p> <ol> <li>Send <code>\"p\"</code> (0x72).  </li> <li>Wait 1 second.  </li> <li>Send <code>\"p\"</code> (0x72) again.</li> </ol>"},{"location":"modem-m16/modem-m16-quickstart/","title":"Quickstart Guide","text":"<p>To start using the Modem-M16 you need </p> <ul> <li>a connection between the Modem and your computer</li> <li>a serial connection interface</li> </ul> <p>To send and receive data between two Modem-M16's:</p> <ul> <li>both modems has to be in water (or less than 5 cm apart in air)</li> <li>both modems must be connected to a computer</li> <li>both modems need to be configured to the same channel.</li> <li>A sufficient power level must be used.</li> </ul> <p>For an overview of the modems setting see Modem M16 Settings interface For implemetation of the modems settings see Modem M16 Protocol</p> <p>By default the Modem M16 is delivered with the following settings:</p> <ul> <li>Operational Mode: Transparent serial mode  </li> <li>Communication Channel: 1  </li> <li>Power level/Range Mode: 4</li> </ul>"},{"location":"modem-m16/modem-m16-quickstart/#how-to-connect-to-the-modem-m16","title":"How to connect to the Modem-M16","text":"<p>For wiring details see: Modem-M16 Wiring</p>"},{"location":"modem-m16/modem-m16-quickstart/#connect-using-uart","title":"Connect using UART:","text":"<ul> <li>Connect VIN to a 3.3V power source, and ground to ground/VOUT</li> <li>Connect to your computer for instance using a UART to USB cable. </li> </ul>"},{"location":"modem-m16/modem-m16-quickstart/#connect-using-rs422","title":"Connect using RS422:","text":"<ul> <li>Connect VIN to a 12V (10-30V) power supply, and ground to ground/VOUT.</li> <li>Connect to your computer using an RS422 to USB serial converter.</li> </ul>"},{"location":"modem-m16/modem-m16-quickstart/#open-up-a-user-interface-to-interact-with-the-modem","title":"Open up a user interface to interact with the modem","text":"<p>Open up a serial interface on your computer. This is typically Minicom on Linux and Putty on Windows.</p> <p>It is also possible to use the designated GUI that can be installed on your computer. An installation guide is available here: Basic GUI for easy implementation </p>"},{"location":"modem-m16/modem-m16-quickstart/#configure-the-modem-m16","title":"Configure the Modem-M16","text":"<p>When you are connected to a modem and have an open user interface, you will be able to read and write to configure the modem. The most basic configurations you need to know about are:</p> <p>Operational mode There are two operational modes: - Transparent mode, that only processes and transmits two bytes of data - Diagnostic mode, that processes and transmits two bytes of data, and sends a detailed status report of the modem.</p> <p>Changing channel For two modems to be able to communicate, they need to be configured on the same channel.</p> <p>Range mode The modem have four different range modes or power levels, numbered 1 to 4, where 1 have the shortest range and 4 have the longest range. Shorter range uses less power during operation.</p> <p>More information about the serial protocol and possible configurations of the M16, can be found here: M16-serial-protocol</p>"},{"location":"modem-m16/modem-m16-quickstart/#start-communicating-between-two-modems","title":"Start communicating between two modems","text":"<p>To be able to see what you send and receive on the modems you will have to open up one interface for each modem. Adjust the com/tty ports as necessary.</p> <p>Begin sending data using either the GUI or the serial protocol; the modems will relay up to 2 bytes each ~1.6 seconds.</p> <p>Note</p> <p>To do configuration changes using the protocol, the letters needs to be sent with almost exactly 1 second between each letter. In any other circumstances the letters will be interpreted as a packege to be transmitted.</p>"},{"location":"modem-m16/modem-m16-quickstart/#make-your-own-interface-that-suits-your-needs","title":"Make your own interface that suits your needs","text":"<p>Use the serial protocol M16-serial-protocol, and the Example Python Report Parser (described under Protocol) to create your own application that suites your needs.</p>"},{"location":"modem-m16/modem-m16-wiring/","title":"Wiring interface","text":"<p>The tables below shows the pinning of the Modem-M16 interface. Depending on which type is used, the wires may have different colors. </p> Interface Colour (OEM) Colour (Standard) Colour (Extended) VIN Orange (3V - 4.2V) Orange (3V - 4.2V) Orange (10V - 30V) GND Orange-White Orange-White Orange-White UART RX Blue Blue NA UART TX Blue-White Blue-White NA Shutdown (Active Low) Green Green NA RS422 RX+ NA NA Blue RS422 RX- NA NA Blue-White RS422 TX+ NA NA Green RS422 TX- NA NA Green-White <p>Maximum power consumption for package transmit is in range 390 mW to 1105 mW</p> <p>Note</p> <p>Shutdown line can be used to control the ON/OFF state of the Modem.  If Shutdown is left floating, the Modem is ON. If Shutdown is short to GND, the modem is OFF.  Shutdown line can be controlled by an external open-drain, open-collector or relay device. DO NOT apply voltage to Shutdown line. </p>"},{"location":"modem-m16/modem-m16-wiring/#wiring-oemstandard","title":"Wiring OEM/Standard","text":""},{"location":"modem-m16/modem-m16-wiring/#wiring-extended-rs422","title":"Wiring Extended (RS422)","text":""},{"location":"modem-m16/modem-m16/","title":"Modem-M16","text":"<p>The Modem M16 is a two-way, half-duplex acoustic modem operating at 10bps that can function dependably in the presence of other modems configured on distinct channels. Boasting an impressively compact size, minimal power consumption, and affordable cost, the Modem M16 is a groundbreaking addition to the field. This innovation paves the way for successful underwater communication in complex environments, particularly where power resources for sensors are scarce. Buy Modem-M16 here!</p>"},{"location":"modem-m16/modem-m16/#description","title":"Description","text":"<p>The Modem M16 is a two-way half-duplex 10bps acoustic modem with a robust and user configurable data link. The modem is delivered in four different versions, OEM, Flange, Standard, and Extended (RS422)</p>"},{"location":"modem-m16/modem-m16/#mechanical","title":"Mechanical","text":"Information All Modem M-16 Versions Device length 47 mm (ex cable) Device weight (air) 40 gram Device weight (submerged) 14 gram Depth rating 600 meter Materials POM (housing), PEEK (transducer) Operating temperature -10 to 70 \u00b0C Device diameter 29.5 mm"},{"location":"modem-m16/modem-m16/#acoustics","title":"Acoustics","text":"Information All Modem M-16 Versions Range 1000 m Transducer directivity Omnidirectional Transducer frequency 58.5 kHz Bits per package 16 Package duration 1.6 seconds"},{"location":"modem-m64/modem-m64-protocol/","title":"Protocol","text":""},{"location":"modem-m64/modem-m64-protocol/#modem-m64-serial-protocol","title":"Modem-M64 serial protocol","text":"<p>This document describes the Water Linked Underwater Modem Link Layer protocol.</p>"},{"location":"modem-m64/modem-m64-protocol/#terminology","title":"Terminology","text":"<ul> <li>Modem - Unit for transmitting/receiving data</li> <li>Packet - Unit of data transmitted together</li> <li>ACK - Acknowledgement. The command issued was successful.</li> <li>NAK - Negative acknowledgement. The command issued failed.</li> </ul>"},{"location":"modem-m64/modem-m64-protocol/#version","title":"Version","text":"<p>This document describes protocol/software version 1,0,x (major,minor,patch)</p> <p>The protocol versioning follows semantic versioning in that:</p> <ul> <li>MAJOR version increments represents incompatible API changes,</li> <li>MINOR version increments represents added functionality in a backwards-compatible manner</li> <li>PATCH version increments represents backwards-compatible bug fixes</li> </ul>"},{"location":"modem-m64/modem-m64-protocol/#overview","title":"Overview","text":"<p>The serial communication format is 115200 8-N-1 (no hardware flow control).</p> <p>Packets sent to and received from the modem start with a <code>w</code> and end with LF or CR+LF. The packet format is:</p> Start byte Direction Command Options (0 to many) Checksum End byte <code>w</code> <code>c</code> or <code>r</code> <code>x</code> <code>,[option]</code> <code>*xx</code> <code>\\n</code> or <code>\\r\\n</code> <p>Direction is command (<code>c</code>) for commands issued to the modem and the modem replies with direction set to response (<code>r</code>). The commands can be sent as a string or entered one char at a time from a terminal.</p> <p>The protocol can support Water Linked modems with different payload sizes and extended features. To support any Water Linked modem the connection procedure is to:</p> <ul> <li>Get protocol version. Verify that the major version number is 1.</li> <li>Get payload size. Use this size when queuing packets for transmission the modem.</li> </ul> <p>For Water Linked Modem-M64 the payload size is 8 bytes.</p> <p>In order for two modems to communicate they must be configured to use different roles (A/B) on the same channel. The modem with role A will always transmit. The modem with role B will listen until it detects a signal from a modem of role A. It will then start transmitting responses back to the modem with role A. The modem with role B will go back to listen mode if several consecutive packets from the modem with role A cannot be decoded (i.e. signal is lost).</p> <p>Note</p> <p>Payload where every byte is \\0 is reserved. It is used to keep modems in sync if no data packet is queued by the user. This sync packet is filtered out by the receiver. Avoid this payload by compressing the data or otherwise ensuring atleast 1 bit is non-zero.</p> <p>Checksum is optional when sending commands to the modem. The modem always returns a checksum. The checksum algorithm is CRC-8 and it is formatted as a hexadecimal number using 2 lower-case charaters (ex: <code>*c3</code>). See the checksum section of the manual for our DVL product (which uses the same CRC-8 algorithm) for further details and example code.</p>"},{"location":"modem-m64/modem-m64-protocol/#commands","title":"Commands","text":"<p>Commands in the table are shown without the checksum for readability.</p> Command Description Response Description <code>wcv</code> Get protocol version <code>wrv,</code>[major],[minor],[patch] Protocol version. eg: <code>wrv,1,0,1</code> <code>wcn</code> Get supported payload size <code>wrn,</code>[size] Where size is supported payload size: eg: <code>wrn,8</code> <code>wcc</code> Get modem configuration <code>wrc,</code>[role],[channel] Where role=a or b and channel=1-7 eg: <code>wrc,a,3</code> <code>wcs,</code>[role],[channel] Set modem configuration - Where role=a or b and channel 1-7: eg: <code>wrs,b,3</code> <code>wrs,a</code> or <code>wrs,n</code> ACK or NAK <code>wcl</code> Get transmit queue length <code>wrl,</code>[q] Number of packets currently queued for transmission. eg: <code>wrl,107</code> <code>wcf</code> Flush transmit queue <code>wrf,a</code> or <code>wrf,n</code> ACK or NAK <code>wcd</code> Get diagnostic <code>wrd,</code>[link],[packet_count],[packet_loss_count],[bit_error_rate] link=y if connection with other modem, otherwise n.  eg: <code>wrd,y,1234,17,3.5</code> [1] <code>wcq,</code>[size],[payload] Queue packet for transmission. Number of characters in payload need to be exactly same as size. Payload can be binary. eg: <code>wcq,8,HelloSea</code> [2] <code>wrq,a</code> or <code>wrq,n</code> ACK or NAK <code>wrp,</code>[size],[payload] Got packet from other modem eg: <code>wrp,8,Welcome!</code> <code>wr?</code> Malformed request: Response when packet cannot be understood <code>wr!</code> Malformed request: Packet does not match the given checksum <p>[1] <code>packet_count</code> is the number of packets received. If a packet cannot be decoded the <code>packet_loss_count</code> increments regardless of the packet being queued is data or a sync packet from the other modem.</p> <p>[2] Payload with just zeros (<code>\\0</code>) is reserved for keeping the modems in sync if no packet is queued. It will be filtered out by the receiving modem.</p>"},{"location":"modem-m64/modem-m64-protocol/#examples","title":"Examples","text":"<p>Here is an example of setting up two modems and sending packets between them.</p> <p>On top side modem (using role A):</p> Command Response Description <code>wcv</code> <code>wrv,1,0,1*44</code> Get protocol version <code>wcn</code> <code>wrn,8*ba</code> Get payload size <code>wcs,a,3</code> <code>wrs,a*01</code> Set role A and channel 3 <code>wcq,8,HelloSea</code> <code>wrq,a*d7</code> Send packet Wait packet from other modem <code>wrp,8,HelloTop*bb</code> Got response <p>On AUV/ROV modem (using role B):</p> Command Response Description <code>wcv</code> <code>wrv,1,0,1*44</code> Get protocol version <code>wcn</code> <code>wrn,8*ba</code> Get payload size <code>wcs,b,3</code> <code>wrs,a*01</code> Set role B and channel 3 Wait packet from other modem <code>wrp,8,HelloSea*58</code> Got packet <code>wcq,8,HelloTop</code> <code>wrq,a*d7</code> Send response back"},{"location":"modem-m64/modem-m64/","title":"Modem-M64","text":"<p>The Modem-M64 is retired and no longer available for sale.</p>"},{"location":"modem-m64/modem-m64/#description","title":"Description","text":"<p>The Modem M64 is a two-way half-duplex 64bps acoustic modem with a robust and user configurable data link.</p> <p>The M64 sets a new market standard with its record-breaking physical size, low power requirement and cost. All this combined with a very useful technical specification, the M64 opens new possibilities for underwater communication in both existing and new areas.</p>"},{"location":"modem-m64/modem-m64/#led-signals","title":"LED Signals","text":"<ul> <li> <p>No green light: Power is off.</p> </li> <li> <p>Flashing green light (every 3 seconds): Modem is trying to pair with another modem.</p> </li> <li> <p>Fixed green light: Modem has sync with another modem. The LED will blink each time it receives a packet from the other modem (once a second).</p> </li> </ul>"},{"location":"modem-m64/modem-m64/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the Modem-M64 interface. Depending on which cable type is used, the power wires may have different colors.</p> Interface Color (Belden) Color (4TP1P) Positive (10-18V) Orange Red Negative/Ground Orange/White Black UART RX Brown Brown UART TX Brown/White Brown/White <p>Note</p> <p>Power must be applied to the power terminals before applying voltage to UART pins</p>"},{"location":"modem-m64/modem-m64/#terminal-interface","title":"Terminal Interface","text":"<p>The Modem-M64 has a 3.3 volt UART interface.</p> Settings Value Baud rate 115200 Data parity stop 8N1 Flow control None"},{"location":"modem-m64/modem-m64/#channels","title":"Channels","text":"<p>Modem M64 supports channels 1-7.</p> From (kHz) To (kHz) Channels using this frequency band 31.25 62.25 1 62.25 93.75 2 (16) 93.75 125.00 3 (16) 125.00 156.00 4 (17) 156.00 187.00 5 (17) 187.00 218.00 6 (18) 218.00 250.00 7 (18) <p>Please note that the Underwater GPS Explorer kit channels 16, 17, 18 overlaps and all channels overlaps with Underwater GPS G2.</p>"},{"location":"modem-m64/modem-m64/#libraries-and-code-examples","title":"Libraries and code examples","text":"<p>Example code and libraries that can be used to communicate with the modem on the terminal interface:</p> <ul> <li>Python</li> </ul>"},{"location":"modem-m64/modem-m64/#dimensions","title":"Dimensions","text":""},{"location":"sonar-3d/sonar-3d-15-api/","title":"Integration API Sonar 3D-15","text":""},{"location":"sonar-3d/sonar-3d-15-api/#introduction","title":"Introduction","text":"<p>The Water Linked Sonar 3D-15 provides real-time 3D views of underwater environments using a low-bandwidth Range Image Protocol (RIP2). This protocol efficiently transmits data such as 3D points or grayscale bitmaps over UDP, enabling live visualization, analysis, or archival for later use.</p> <p>The Sonar 3D-15 also exposes a HTTP API for configuration and inspection of system state.</p> <p>A Python example implementation of the Sonar API is available on github.</p>"},{"location":"sonar-3d/sonar-3d-15-api/#range-image-protocol-rip2","title":"Range Image Protocol (RIP2)","text":"<p>RIP2 is a compact format for range and bitmap images, designed for &lt;10\u202fMbit bandwidth.</p> <p>NOTE: Some Sonar 3D-15 releases support sending RIP1 packets. RIP1 will be removed in a future release.</p>"},{"location":"sonar-3d/sonar-3d-15-api/#packet-structure","title":"Packet structure","text":"<p>The packet format is designed to fit within a single UDP packet, introducing an upper limit of 65,507 bytes.</p> <p>This is the structure of a RIP2 packet:</p> Number of bytes Description 4 0x82 0x73 0x80 0x50, Identifier which reads \"RIP2\" in ASCII 4 Packet length (including identifier, packet length, payload and checksum) payload length (packet length - 12) Encoded protobuf message, compressed with Snappy 4 IEEE 802.3 CRC-32 of the preceding bytes in the packet <p>Decoding Steps:</p> <ol> <li>Verify the \"RIP2\" ID.  </li> <li>Read packet length.</li> <li>Read compressed payload and CRC-32, and verify the CRC-32.</li> <li>Decompress the payload into an encoded protobuf packet.</li> <li>Decode into the <code>Packet</code> message type (see <code>.proto</code> file)</li> <li>Use <code>.msg.type_url</code> to identify the contained message.  </li> <li>Decode <code>.msg.value</code> into that message type (see <code>.proto</code> file)</li> </ol>"},{"location":"sonar-3d/sonar-3d-15-api/#network","title":"Network","text":"<p>By default, the Sonar 3D-15 uses UDP Multicast (<code>224.0.0.96:4747</code>), so any device on the local network can receive RIP2 packets without knowing the sonar\u2019s IP.</p> <p>The Sonar can also be configured for UDP unicast, or to disable sending of UDP packets. See HTTP API.</p>"},{"location":"sonar-3d/sonar-3d-15-api/#image-sizes-and-update-rates","title":"Image Sizes and Update Rates","text":"Mode Resolution (W\u00d7H) FOV (H\u00d7V) Rate Low Frequency 256\u202f\u00d7\u202f64 90\u00b0\u202f\u00d7\u202f40\u00b0 5\u202fHz High Frequency 256\u202f\u00d7\u202f64 40\u00b0\u202f\u00d7\u202f40\u00b0 20\u202fHz"},{"location":"sonar-3d/sonar-3d-15-api/#message-types","title":"Message Types","text":"<p>RIP2 supports several Protobuf-encoded messages, including:</p>"},{"location":"sonar-3d/sonar-3d-15-api/#bitmapimagegreyscale8","title":"<code>BitmapImageGreyscale8</code>","text":"<ul> <li>8-bit grayscale; each pixel = signal strength or shaded depth.  </li> <li><code>type</code> enum differentiates signal strength vs. shaded.  </li> </ul>"},{"location":"sonar-3d/sonar-3d-15-api/#rangeimage","title":"<code>RangeImage</code>","text":"<ul> <li>Each pixel represents distance (radius) to the strongest reflection.</li> <li><code>0</code> = no valid data.</li> <li><code>radius = pixelValue * imagePixelScale</code>.</li> </ul>"},{"location":"sonar-3d/sonar-3d-15-api/#coordinate-and-image-conventions","title":"Coordinate and Image Conventions","text":"<p>Axes (right-handed):</p> <ul> <li>Origin: The point cloud uses a mechanical origin located on the backplate, centered between the mounting screw holes.</li> <li>x: forward  </li> <li>y: right  </li> <li>z: downward  </li> </ul> <p>Image:</p> <p></p> <ul> <li>Horizontal FOV (<code>fovH</code>) spans width.</li> <li>Vertical FOV (<code>fovV</code>) spans height.</li> <li><code>(px, py)</code> maps to <code>(yaw, pitch)</code>:   <pre><code>yaw = (px / (width - 1))  * fovH - (fovH / 2)\npitch = (py / (height - 1)) * fovV - (fovV / 2)\n</code></pre></li> </ul> <p>Example: Converting Range Image to 3D: <pre><code>// Convert pixelValue to radius in meters\nif (pixelValue == 0) {\n  return Undefined; // no valid data\n}\nradius = pixelValue * imagePixelScale;\n\n// Convert (yaw, pitch) from degrees to radians\nyaw   = deg2rad((px / (width - 1))  * fovH - (fovH / 2));\npitch = deg2rad((py / (height - 1)) * fovV - (fovV / 2));\n\n// Cartesian conversion (x forward, y right, z down)\nx = radius * cos(pitch) * cos(yaw);\ny = radius * cos(pitch) * sin(yaw);\nz = -radius * sin(pitch); // z is downward\n</code></pre></p>"},{"location":"sonar-3d/sonar-3d-15-api/#proto-file-excerpt","title":"<code>.proto</code> File (Excerpt)","text":"<pre><code>// Water Linked Sonar 3D-15 protocol\nsyntax = \"proto3\";\n\npackage waterlinked.sonar.protocol;\nimport \"google/protobuf/timestamp.proto\";\nimport \"google/protobuf/any.proto\";\n\n// Packet is the top-level message that is sent over the wire.\nmessage Packet {\n  google.protobuf.Any msg = 1; // Use .type_url to deserialize .value \n  // into one of the messages defined in this proto file\n}\n\nmessage Header {\n  google.protobuf.Timestamp timestamp = 1;\n// Sequence id is a monotonically increasing number that identifies\n// each shot of the sonar. It can be used to detect missing shots or\n// to relate messages of different types to each other. The value\n// wraps around to 0 after reaching the maximum value.\n\n  uint32 sequence_id = 2;\n}\n\nenum BitmapImageType {\n// Bitmap image showing for each x,y pixel the strength of the\n// strongest reflection\nSIGNAL_STRENGTH_IMAGE = 0;\n// Bitmap image showing a shaded representation of the depth in the\n// range image. The light source is behind and above the observer.\n// (This is experimental and may be removed in the future)\nSHADED_IMAGE = 1;\n}\n\n// BitmapImageGreyscale8 can be shown to user without further processing.\n// Uncompressed, 8-bit color depth, greyscale.\n\nmessage BitmapImageGreyscale8 {\n  Header header = 1;\n  float speed_of_sound = 2; // Configured speed of sound in water in m/s \n  float range = 3; // Configured range in meters\n  uint32 frequency = 4; // Configured imaging frequency in Hz\n  BitmapImageType type = 5; // Identifier for what is shown in the image\n  uint32 width = 6;\n  uint32 height = 7;\n  float fov_horizontal = 8;\n  float fov_vertical = 9;\n  // image pixel data is organized in rows of pixels.Each row is\n  // 'width' wide, and there are 'height' rows. Each pixel is an 8-bit\n  // value that represents the intensity of the pixel, from 0 to 255\n  bytes image_pixel_data = 10;\n}\n\n// RangeImage measures the distance to the strongest reflection\n// for each pixel.\nmessage RangeImage {\n  Header header = 1;\n  float speed_of_sound = 2; // Configured speed of sound in water in m/s\n  float range = 3; // Configured range in meters\n  uint32 frequency = 4; // Configured imaging frequency in Hz.\n  uint32 width = 5;\n  uint32 height = 6;\n  float fov_horizontal = 7; // In degrees\n  float fov_vertical = 8; // In degrees\n  float image_pixel_scale = 9;\n\n  // image_pixel_data is organized in rows of pixels. Each row is\n  // 'width' wide, and there are 'height' rows.\n  // Each pixel is a 16-bit value that must be multiplied by\n  // image_pixel_scale to obtain the distance in meters from the sonar\n  // to the strongest reflection in that direction.\n  repeated uint32 image_pixel_data = 10;\n}\n</code></pre> <p>Compatibility Notes - Additional message types/fields may be introduced. - Decoders should ignore unrecognized messages. - Major breaking changes will involve a new protocol identifier.</p> <p>Refer to the full protocol specification and <code>.proto</code> file shown above for more information.</p>"},{"location":"sonar-3d/sonar-3d-15-api/#http-api","title":"HTTP API","text":"<p>The Sonar 3D-15 exposes a HTTP API for configuration and inspection of system state. The HTTP API is exposed on port 80 and uses paths rooted at <code>/api/v1/integration/</code>. JSON is used for request and response bodies. The HTTP API is documented with a swagger.json file. This file can be opened in a compatible viewer such as this one. Example code using the HTTP API exists on github.</p>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/","title":"Integrating onto BlueROV2","text":""},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#introduction","title":"Introduction","text":"<p>This is a manual on how to install the Water Linked Sonar 3D-15 for the BlueROV2. Documentation and information about the BlueROV2 can be found at:</p> <ul> <li>BlueRobotics Help Center</li> <li>BlueRobotics Contact Us</li> <li> <p>BlueRobotics Technical Reference</p> <p></p> </li> </ul>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#whats-in-the-box","title":"What's in the box","text":"<p>The Sonar 3D-15 from Water Linked is normally shipped with an attached I/O Interface board.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#prerequisites","title":"Prerequisites","text":"<p>Before starting the integration, ensure you have all the necessary tools and parts ready.</p>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#tools-required","title":"Tools Required","text":"<ul> <li>Soldering iron and solder</li> <li>Wire strippers / cutters</li> <li>Heat gun or lighter (for heat shrink)</li> <li>Small flathead screwdriver</li> <li>Hex key set (for opening ROV and mounting)</li> </ul>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#parts-required","title":"Parts Required","text":"<ul> <li>BlueROV2 Roof Rack: To mount the sonar.</li> <li>Sonar Mount: Custom mount for Sonar 3D-15.<ul> <li>Download the example 3D step file</li> </ul> </li> <li>Mounting Screws:<ul> <li>4x M4 screws (length depends on mount thickness) for Sonar-to-Mount.</li> <li>4x M4 screws + nuts + washers for Mount-to-ROV.</li> </ul> </li> <li>Connectors:<ul> <li>2x Spade connectors (or ring terminals) for power.</li> <li>1x JST 4-pin connector (GH type usually used with BlueROV2 devices, verify pitch).</li> </ul> </li> <li>WetLink Penetrator 6.5mm (Low Compression): For passing cable into the enclosure.</li> <li>Ethernet Switch:<ul> <li>Must be installed in the BlueROV2. See Ethernet Switch Installation Guide.</li> </ul> </li> </ul>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#1-prepare-the-connectors","title":"1. Prepare the Connectors","text":"<p>Testing the Sonar 3D-15 Separately</p> <p>If the I/O Interface board is attached, the Sonar 3D-15 can be tested directly using an Ethernet cable and a power supply. If you wish to test the device on its own before integration, follow the general Quickstart tutorial, available here:  Quickstart.</p> <p>Connecting to the BlueROV2</p> <p>To connect the Sonar 3D-15 to the BlueROV2, you have to attach connectors to each of the wires from the Sonar 3D-15. You have to make the final cable assembly resemble the images below - with the cable towards the Sonar 3D-15 on the left and their JST connectors for the BlueROV2 on the right.</p> <p> </p> <p>The installation procedure for the Sonar 3D-15 is very similar to the Water Linked DVL installation, which BlueRobotics has an excellent guide for. We recommend reviewing this guide before proceeding. It can be found here: </p> <p>DVL Installation Guide for BlueROV2 </p> <p>For the remainder of this Sonar 3D-15 guide, we assume you are familiar with the BlueROV2 and its installation procedures.</p> <p>To install the Sonar 3D-15 for the BlueROV2, perform the following procedure:</p> <ol> <li> <p>Remove the I/O board.  Measure out the required length outside the ROV. Then cut the Sonar cable to that length plus approximately 30cm for inside the ROV.</p> <p>After this step, the I/O board is no longer needed for normal operation. The cables from the Sonar 3D-15 are shown in the picture below.</p> <p> </p> <p>Warning</p> <p>The Sonar 3D-15 cable is permanently attached and non-replaceable inside the Sonar 3D-15 If you cut the cable too short you will either have to splice the cable with another cable, or order a new Sonar 3D-15.  Measure twice, cut once!</p> </li> <li> <p>Assemble a waterproof WetLink 6.5 LC Penetrator according to the BlueRobotics guide. It can be found here: WetLink Installation Guide from Blue Robotics</p> </li> <li> <p>Identify the different cables from the Sonar 3D-15. Make sure to correctly identify the different white signal cables. Differentiate between white/green (RX+) and white/orange (TX+).</p> Sonar Cable Type Sonar Cable Color DC- Black DC+ Red RX+ Green/White RX- Green TX+ Orange/White TX- Orange </li> <li> <p>Solder the spade connectors onto the black and red power cables. </p> <p></p> </li> <li> <p>Terminate a JST 4-pin connector to the four remaining cables. The order is:</p> Pin Order Wire Color Sonar Cable Type 1 Green/White RX+ 2 Orange/White TX+ 3 Green RX- 4 Orange TX- <p> </p> <p>Make the cables from the Sonar 3D-15 look similar to the following:</p> <p></p> </li> <li> <p>Install the WetLink Penetrator into the end cap of the watertight enclosure. See the Installing The Penetrator chapter on Blue Robotics' DVL installation guide for proper penetrator installation: DVL Installation Guide for BlueROV2.</p> </li> <li> <p>Connect the JST connector to the Ethernet Switch board on the BlueROV2. Use port 2, 3, or 4 for the JST connector, as port 5 and 1 are occupied.</p> <p> </p> </li> <li> <p>Connect the power spade connectors of the Sonar 3D-15 cables to the power terminal blocks on the BlueROV2. Connect the black power wire to an available space on the terminal block with the other black wires. Connect the red power wire to and available space on the terminal block with the other red wires.</p> <p> </p> </li> <li> <p>Seal and waterproof the connection and BlueROV2 by closing end cap of the watertight enclosure properly.</p> </li> </ol>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#2-mount-the-sonar","title":"2. Mount the Sonar","text":"<p>Proper mounting is critical for accurate sonar performance.</p>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#recommended-mounting-procedure","title":"Recommended Mounting Procedure","text":"<ol> <li> <p>Prepare the Mount     If you haven't already, print or machine the mount.</p> <ul> <li>Download 3D step file </li> </ul> <p>Note</p> <p>Choose a material (like PETG or ABS) that can withstand the marine environment.</p> </li> <li> <p>Attach Sonar to Mount     Secure the Sonar 3D-15 to the mount using 4x M4 screws.</p> <ul> <li>Length = <code>5.0mm + Mount Thickness</code> (e.g., 8mm screws for a 3mm mount).</li> </ul> <p></p> <p>Warning</p> <p>Do not use screws that are too long. They will penetrate the casing and permanently damage the sonar electronics.</p> <p></p> </li> <li> <p>Attach Assembly to ROV     Mount the assembly to the BlueROV2 Roof Rack, preferably at the front to ensure a clear field of view.</p> <ul> <li>Use 4x M4 screws, nuts, and washers.</li> </ul> <p> </p> </li> </ol>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#3-configure-software-network","title":"3. Configure Software &amp; Network","text":""},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#step-1-prepare-the-rov","title":"Step 1: Prepare the ROV","text":"<p>Power on the BlueROV2 and ensure it is connected to your computer. - Follow the BlueROV2 Software Setup if needed. - Verify: The Sonar 3D-15 should show a green light, indicating it is powered.</p>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#step-2-install-blueos-extension-recommended","title":"Step 2: Install BlueOS Extension (Recommended)","text":"<p>The easiest way to connect is using the Sonar 3D-15 extension.</p> <ol> <li>Open the BlueOS extension manager.</li> <li>Search for and install Sonar 3D-15 extension.     </li> <li>Click the extension to open it. It will automatically detect the Sonar IP. Take note of the IP address displayed at the top of this screen as you will require this for Step 3 below     </li> </ol>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#step-3-configure-cockpit","title":"Step 3: Configure Cockpit","text":"<p>We recommend using Cockpit for the best experience.</p> <ol> <li>Open Cockpit and click the collapse handle on the left.     </li> <li>Click Edit Interface.     </li> <li>Drag an IFrame box onto your layout.     </li> <li>Click the settings icon for the IFrame.     </li> <li>Enter the Sonar IP Address:<ul> <li>Use the IP address displayed in the Extension (Step 2), e.g., <code>http://192.168.2.172</code>.</li> <li>Press Enter. </li> </ul> </li> </ol>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#step-4-deploy-validate","title":"Step 4: Deploy &amp; Validate","text":"<ol> <li>Submerge: Place the ROV in water.     </li> <li> <p>Enable Acoustics: In the Sonar GUI (now visible in Cockpit), click the green \"Enable Acoustics\" button.</p> <p>Warning</p> <p>Never enable acoustics in air. Only enable when submerged to prevent overheating.</p> <p></p> </li> </ol> <p>Success! You are now ready to use the Sonar 3D-15.</p>"},{"location":"sonar-3d/sonar-3d-15-bluerov-integration/#troubleshooting-advanced","title":"Troubleshooting &amp; Advanced","text":"How to find the IP Address Manually <p>If the extension does not work, you can find the IP manually.</p> <ol> <li>Identify your computer's IP on the BlueROV network (<code>ip a</code> on Linux, <code>ipconfig</code> on Windows).</li> <li>Scan the network using <code>nmap</code>:     <code>sh     nmap -sn 192.168.2.*</code> (Adjust the subnet to match your BlueROV network)</li> <li>Try recognized IPs in a browser until the Sonar GUI loads.<ul> <li>Common subnets: <code>192.168.2.x</code></li> <li>Fallback IP: <code>192.168.194.96</code> See quickstart for details.</li> </ul> </li> </ol>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/","title":"Integrating onto Blueye X3 ROV","text":""},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#introduction","title":"Introduction","text":"<p>This is a manual on how to install the Water Linked Sonar 3D-15 for the Blueye X3 ROV. We recommend that you contact Blueye to purchase the Sonar 3D-15, along with all parts to allow for installation on your Blueye vehicle. You can contact Blueye at contact@blueye.no or blueyerobotics.com/contact/sales for this. General documentation and information from Blueye can be found here:</p> <ul> <li>Blueye General support</li> <li>Blueye X3 ROV User Manual</li> </ul> <p></p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#whats-in-the-box","title":"What's in the box","text":"<p>The Sonar 3D-15 from Water Linked is normally shipped with an attached I/O Interface board. However, if you have purchased the Sonar 3D-15 along with the Integration Kit from Blueye, which we recommend, it will include a pre-terminated connector instead of the I/O Interface board. In that case, follow the integration instructions provided by Blueye.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#connector-setup","title":"Connector Setup","text":"<p>Testing the Sonar 3D-15 Separately</p> <p>If the I/O Interface board is attached, the Sonar 3D-15 can be tested directly using an Ethernet cable and a power supply. If you wish to test the device on its own before integration, follow the general Quickstart tutorial, available here:  Quickstart.</p> <p>Connecting to Blueye ROV</p> <p>Please contact Blueye to obtain customized terminations and cables for connecting the Blueye ROV to the Sonar 3D-15. This guide will assume terminated cables provided from Blueye.</p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#mounting","title":"Mounting","text":"<p>The Sonar 3D-15 needs to be physically attached to the Blueye ROV. Blueye can provide a custom mount designed to fit the Sonar 3D-15. Please contact Blueye for further details.</p> <ol> <li> <p>Get a suitable mount</p> <p>This is the mount from Blueye, with both space for the Sonar 3D-15 and a servo motor that can change the angle of the Sonar 3D-15 field-of-view.</p> <p> </p> </li> <li> <p>Identify the screws to use</p> <p>Use M4\u202f\u00d7\u202f10\u202fmm (ISO14583 A4) screws with M4 (ISO 7089 A4) washers to attach the Sonar 3D-15 to the mount.</p> <p></p> <p>Warning</p> <p>To avoid damaging the Sonar 3D-15, make sure the screws are not too long. In this example, 10\u202fmm long screws with washers are suitable for the mounting setup.</p> </li> <li> <p>Attach the mount to the Sonar 3D-15</p> <p> </p> </li> <li> <p>Attach the mount with the Sonar 3D-15 to the Blueye ROV</p> <p>Use the star knob to attach and tighten the mount to the Blueye.</p> <p> </p> <p> </p> </li> <li> <p>Connect the cables</p> <p>Please make sure the cables are neatly attached, not blocking the view for either a Water Linked DVL or the Sonar 3D-15.</p> <p> </p> </li> </ol> <p>Warning</p> <p>Make sure the Blueye ROV is turned off and without power before connecting the cables.</p> <p>Note</p> <p>Make sure the Sonar 3D-15 and cable are neatly and securely attached to the mount before use.</p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#connection-steps","title":"Connection steps","text":""},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#1-turn-on-the-blueye-rov-as-normal","title":"1. Turn on the Blueye ROV as normal","text":"<p>Please see Blueye's manual for standard startup procedure.</p> <p>Warning</p> <p>To avoid potential power hazard or errors, make sure every cable is well connected before you turn on the ROV. Do not connect sensors to the Blueye while the power is on.</p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#2-connect-your-pcmacphone-to-the-blueye-wi-fi","title":"2. Connect your PC/Mac/phone to the Blueye Wi-Fi","text":"<p>Most devices connected to the Blueye Wi-Fi\u2014such as a PC, Mac, or smartphone\u2014can display the Sonar 3D-15 GUI directly in their web browser.</p> <p>To access the GUI, first go to the Wi-Fi settings of your selected device and connect to the Wi-Fi of the Blueye ROV with SSID: \u201cBlueye_XXXXXX\u201d. Use the default password 1234567890.</p> <p>Note</p> <p>Accessing the sonar GUI in a browser on the same smartphone running the Blueye app will interrupt ROV control. To avoid this, use a separate device\u2014preferably a computer\u2014for a better user experience and larger screen view.</p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#3-identify-the-ip-address-of-the-sonar-3d-15","title":"3. Identify the IP-address of the Sonar 3D-15","text":"<p>By standard, the local hostname of the Sonar 3D-15 is waterlinked-sonar.lan or waterlinked-sonar.local. Enter these in your web browser. </p> <p>Warning</p> <p>Don't operate the Sonar 3D-15 out of water for any long periods.</p> <p>Don\u2019t click the green button \u201cEnable Acoustics\u201d until the ROV is submerged in water to avoid overheating of the Sonar 3D-15. </p> <p>Acoustics are always disabled when first booting up the Sonar 3D-15, and will be turned on once clicking this button. The Sonar 3D-15 will automatically turn itself off if too hot, but will take some time to cool down, it's best to avoid this happening.</p> <p>If working, the browser will display a page like the one below \u2014 in this example, the Sonar 3D-15 is using the local hostname <code>waterlinked-sonar.lan</code> on Google Chrome on a separate computer.</p> <p></p> <p>The following picture is an example of the Sonar 3D-15 GUI on a Android phone using the IP-address <code>192.168.1.233</code>.</p> <p></p> <p>Note</p> <p>The Blueye might take a minute to boot up all the devices properly. If these local hostnames don't work immediately, it might be that the ROV just hasn't fully initialized them yet.</p> <p>If these local hostnames don't show the GUI in your browser, the Blueye system has assigned the Sonar 3D-15 a different IP-address, and you need to determine which IP address has been assigned to the Sonar 3D-15. </p> <p>To do this, we recommend downloading an app on your phone to find all IP-addresses on the Blueye Wi-Fi. WiFiman by Ubiquiti is a good and free option, it can be downloaded from Google Play or App Store. </p> <p>Note</p> <p>There are many options of apps and programs that can find all IP-addresses on the network. Fing is another app that works, or you can also perform an IP scan on a computer.</p> <p>Once installed and inside the WiFiman app, go to Discovery and scan the network. A list of all connected devices on the network will show, similar to the following:</p> <p></p> <p>Find the IP-address corresponding to the Water Linked Sonar 3D-15. In the picture, this is the 192.168.1.233. Enter this IP-address into your browser to see the Sonar 3D-15 GUI.</p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#5-put-the-drone-in-the-water","title":"5. Put the drone in the water","text":"<p>You are now ready to put the ROV in the water. </p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-blueye-rov/#6-enable-acoustics","title":"6. Enable acoustics","text":"<p>When ready, click the \u201dStart acoustics\u201d button to initiate the Sonar 3D-15. It will display a point cloud in the GUI representing the 3D space  in front of the Sonar 3D-15. </p> <p></p> <p>You are now ready to use the Water Linked Sonar 3D-15 with the Blueye ROV!</p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/","title":"Integrating onto Chasing M2 PRO MAX ROV","text":""},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#introduction","title":"Introduction","text":"<p>This is a manual on how to install the Water Linked Sonar 3D-15 on the Chasing M2 PRO MAX. Other information from Chasing can be found at: </p> <ul> <li>Chasing M2 PRO MAX Manual</li> </ul> <p></p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#whats-in-the-box","title":"What's in the box","text":"<p>The Sonar 3D-15 box from Water Linked comes normally with an attached I/O Interface board.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#what-youll-need","title":"What You\u2019ll Need","text":"<p>To follow this guide, you will need the following:</p> <ul> <li> <p>A phone or tablet with the CHASING GO1 app </p> <ul> <li>Can be found at Google Play or App Store</li> </ul> </li> <li> <p>Chasing Connector</p> <ul> <li>Contact Chasing - hi@chasing.com</li> </ul> </li> <li> <p>A mount (Sonar 3D-15 to ROV)</p> <ul> <li>An example can be downloaded from here: 3D step file</li> </ul> </li> <li> <p>Correct screws</p> <ul> <li>See the Mounting section</li> </ul> </li> <li> <p>Buoyancy module </p> <ul> <li>Contact Chasing - hi@chasing.com</li> </ul> </li> <li> <p>CHASING Quick Mounting Bracket</p> <ul> <li>Contact Chasing - hi@chasing.com</li> </ul> </li> </ul>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#connector-setup","title":"Connector Setup","text":"<p>Testing the Sonar 3D-15 Separately</p> <p>If the I/O Interface board is attached, the Sonar 3D-15 can be tested directly using an Ethernet cable and a power supply. If you wish to test the device on its own before integration, follow the general Quickstart tutorial, available here:  Quickstart.</p> <p>Connecting to Chasing ROV</p> <p>The most common solution is to terminate a Chasing connector to the cable of the Sonar 3D-15. To do this, we recommend the following procedure:</p> <ol> <li> <p>Remove the I/O board After this step, the I/O board is no longer needed for normal operation. </p> </li> <li> <p>Terminate a Chasing connector to the Sonar 3D-15 cable using the table below.</p> Sonar Cable Type Sonar Cable Color Chasing Cable Color CHASING connector male DC- Black Black 1 DC+ Red Red 2 RX+ Green/White White 6 RX- Green Brown 5 TX+ Orange/White Green 4 TX- Orange Yellow 3 NC NC NC 7 <p>The following is a picture of the pins for the male Chasing connector face:</p> <p></p> </li> <li> <p>Add a waterproof seal around the termination.</p> </li> </ol> <p>Note</p> <p>The termination has to be waterproof and needs to withstand the depths of which you will be running your ROV. </p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#mounting","title":"Mounting","text":"<p>The Sonar 3D-15 needs to be physically attached to the Chasing ROV. A possible option on how to do this will be listed here. There are many different approaches to achieve this, and this approach is only listed to provide an idea.</p> <ol> <li> <p>Create or find a suitable mount</p> <p>An example 3D step file of a mount is found here: Download 3D step file </p> <p>Note</p> <p>Choose a 3D print material that can withstand the expected operating conditions.</p> </li> <li> <p>Identify the screws and mount to use</p> <p>The four screw holes on the Sonar 3D-15 are sized <code>[M4x0.7-6H 5.0 DEEP]</code>. Choose a screw to fit this in addition to your chosen mount. Use a M4 Washer if necessary. For the Mounting Bracket plate, M3 screws is needed.</p> <p>For the example mount (as the given 3D print file), the following screws and washers are sufficient:</p> <ul> <li>4x <code>M3x6.0mm ISO 14583 A4</code> screws</li> <li>4x <code>M4x12mm ISO 14583 A4</code> screws</li> <li>4x <code>M4 ISO 7089 A4</code> Washers  </li> </ul> <p>Warning</p> <p>To avoid damaging the Sonar 3D-15, make sure the screws are not too long.</p> <p></p> <p> </p> </li> <li> <p>Attach the CHASING Quick Mounting Bracket plate to the Mount</p> <p>Attach the CHASING Quick Mounting Bracket plate to the Mount like in the images below, using the M3 screws that was provided when purchased from Chasing. </p> <p> </p> </li> <li> <p>Attach the mount to the Sonar 3D-15</p> <p>We recommend attaching the Sonar 3D-15 to the attachment rail underneath at the front of the Chasing, so that the Sonar 3D-15\u2019s field of view is not obstructed.</p> <p> </p> <p>Tip</p> <p>Attach buoyancy module to the top attachment rail on the front to counteract the additional downward force caused by the Sonar 3D-15.</p> </li> <li> <p>Attach the mounted Sonar 3D-15 to the Chasing ROV </p> <p>Use the CHASING Mounting Bracket to attach the mounted Sonar 3D-15 to the ROV.</p> <p> </p> </li> </ol> <p>Note</p> <p>Make sure the Sonar 3D-15 and cable is neatly and securely attached before use.</p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#connection-steps","title":"Connection steps","text":""},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#1-connect-the-cable","title":"1. Connect the cable","text":"<p>Connect the Sonar 3D-15 cable into one of the free ethernet ports on the Chasing.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#2-turn-on-the-rov","title":"2. Turn on the ROV","text":"<p>Use the power switch on the Chasing controller and let the ROV boot up. This activates the Chasing Wi-Fi network.</p> <p>Warning</p> <p>To avoid potential power hazard or errors, make sure every cable is well connected before you turn on the controller. Do not connect sensors to the Chasing while the power is on.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#3-add-the-sonar-3d-15-device","title":"3. Add the Sonar 3D-15 device","text":"<p>Connect your phone to the Chasing Wi-Fi network from the Wi-Fi settings on your phone. Go into the CHASING GO1 app to activate the ROV. Your device will likely prompt you to confirm the connection since the Wi-Fi has no internet access. You must accept this to proceed.</p> <p>Enter CHASING GO1 and click on the puzzle piece in the bottom right. Here we will add the Sonar 3D-15 as an external device.</p> <p></p> <p>Select \"Click to Add Accessories\" on the Network port the Sonar 3D-15 is connected to.</p> <p></p> <p>Click \"Other accessories\".</p> <p></p> <p>Now the Sonar 3D-15 will be powered and assigned an IP-address by the Chasing ROV.</p> <p></p> <p>Note</p> <p>If the green light at the front of the Sonar 3D-15 is on, the Sonar 3D-15 is receiving power. </p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#4-access-the-sonar-3d-15-gui","title":"4. Access the Sonar 3D-15 GUI","text":"<p>The Sonar 3D-15 GUI is accessed by entering the Sonar 3D-15's IP-address into the browser running on any device connected to the Chasing Wi-Fi. </p> <p>Note</p> <p>We recomend operating the Sonar 3D-15 GUI on a seperate device so that you can view the sonar while continuing to operate the ROV as usual on the main ROV controller display; typically your smartphone.</p> <p>Both the device and Chasing need to have DHCP enabled. This is standard for most computers and phones and is normally enabled. To check if your computer has DHCP enabled, do the following:</p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#checking-dhcp","title":"Checking DHCP","text":"<p>--&gt; Windows - Option 1:</p> <ol> <li>Open Settings &gt; Network &amp; Internet.</li> <li>Click on Ethernet</li> <li>Select your active connection.</li> <li>Scroll to IP settings:<ul> <li>If it says Automatic (DHCP) \u2192 it's enabled. </li> <li>If it says Manual \u2192 DHCP is off.</li> </ul> </li> </ol> <p>--&gt; Windows - Option 2:</p> <ol> <li> <p>Run the following command in the Windows terminal <pre><code>ipconfig /all \n</code></pre></p> </li> <li> <p>Look for the section Ethernet adapter Ethernet and the line DHCP Enabled (green arrow)</p> </li> <li> <p>If DHCP Enabled is set to Yes, then DHCP is enabled.</p> <p></p> </li> </ol> <p>--&gt; Linux:</p> <ol> <li>Run the following in the terminal:</li> </ol> <pre><code>for iface in $(ip -o link show | awk -F': ' '{print $2}'); do\n  echo \"Interface: $iface\"\n  ip addr show \"$iface\" | grep -q dynamic &amp;&amp; echo \"  --&gt; DHCP detected\" || echo \"  --&gt; Static or unknown\"\ndone\n</code></pre> <p>If you see --&gt; DHCP detected, your PC has DHCP enabled and you are ready to continue.</p> <p>If DHCP is disabled, please enable this on your computer. </p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#determining-the-ip-address","title":"Determining the IP-address","text":"<p>Once you have assured that your device is using DHCP, you need to determine which IP-address has been automatically assigned to the Sonar 3D-15 by the Chasing system. Once located, entering it in your browser displays a page like the one below \u2014 in this example, the Sonar 3D-15 is assigned the IP-address <code>192.168.1.21</code>.</p> <p></p> <p>Warning</p> <p>To avoid overheating, do not click the green button \u201cEnable Acoustics\u201d until the ROV is submerged in water.</p> <p>Acoustics is always disabled when first booting up the Sonar 3D-15, and will be turned on once this button is clicked. The Sonar 3D-15 will automatically turn itself off if too hot, but will take some time to cool down, it's best to avoid this happening.</p> <p>Find the IP-address corresponding to the Sonar 3D-15 on a computer by doing the following:</p> <ol> <li> <p>Get an overview of the network</p> <p>--&gt; On a computer</p> <p>You need the network IP-address of your computer on the Chasing network.  On Linux you find it by typing in:</p> <p><pre><code>ip a\n</code></pre> in the terminal. </p> <p>On Windows you find it by typing in: <pre><code>ipconfig\n</code></pre></p> <p>Tip</p> <p>It's easier to find your IP-address if your computer is connected only to the Chasing network.</p> <p>A quick easy way to see the IP-addresses of the devices on your local network is to use nmap. Install it for your operating system and go to the terminal and write <pre><code>nmap -sn &lt;YOUR_IP&gt;\n</code></pre></p> <p>This will scan the Chasing Wi-Fi and show all accessible connected devices and their IPs.</p> <p></p> <p>--&gt; On a smartphone</p> <p>WiFiman by Ubiquiti is a good and free option to perform an IP-scan and find all accessible IP-addresses on the network. It can be downloaded from Google Play or Apple Store. </p> <p>Note</p> <p>There are many options of apps and programs that can perform a IP-scan of the network. Fing is another app that works well.</p> <p>Once installed and inside the WiFiman app, go to Discovery and scan the network. A list of all connected devices on the network will show, similar to the following:</p> <p></p> </li> <li> <p>Test and find the IP-address</p> <p>To find the IP-address of the Sonar 3D-15, try the IP-addresses on the list by typing them into the search bar of your browser. </p> <ul> <li>For example, if you have the list above, try <code>192.168.1.1</code>, <code>192.168.1.20</code>, <code>192.168.1.21</code> and so on. You may try them all safely.</li> </ul> <p>If the Sonar 3D-15 GUI appears, you have found the correct IP-address.</p> </li> </ol> <p>Tip</p> <p>It is possible to access the GUI on the Sonar 3D-15's fallback address <code>192.168.194.96</code>. This method is explained in more detail on the general quickstart guide, which can be found at Quickstart .</p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#5-put-the-rov-in-water","title":"5. Put the ROV in water","text":"<p>You are now ready to put the ROV in water.  </p>"},{"location":"sonar-3d/sonar-3d-15-chasing-rov/#6-enable-acoustics","title":"6. Enable acoustics","text":"<p>When ready, click the \u201dEnable Acoustics\u201d button to initiate the Sonar 3D-15. It will display a point cloud in the GUI representing the 3D space in front of the Sonar 3D-15. </p> <p></p> <p>You are now ready to operate the Water Linked Sonar 3D-15 with the Chasing ROV!</p>"},{"location":"sonar-3d/sonar-3d-15-config/","title":"Settings - Sonar 3D-15","text":""},{"location":"sonar-3d/sonar-3d-15-config/#introduction","title":"Introduction","text":"<p>A selection of different configurable settings to adjust and fine tune your experience with the Sonar 3D-15.</p> <p></p> <p>Access the configuration settings page from the \"Settings\" sidebar from the main page and following the \"Config\" link.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-config/#acoustics","title":"Acoustics","text":"<p>Toggle whether or not to enable the Sonar to send acoustic signals. The 3D point cloud can only be shown when this is enabled.</p> <p></p> <p>Important</p> <p>Ensure that the Sonar is under water before enabling acoustics, to avoid interference with objects and infrastructure around you.</p> <p>Acoustics are disabled when the Sonar first boot. You'll see a message in the 3D view about enabling this.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-config/#network","title":"Network","text":"<p>Set how the Sonar 3D-15 is assigned an IP on your network: Automatic IP (DHCP) or Static IP. Default is Automatic IP. For further details regarding network setup, see Networking.</p> <p>Note</p> <p>Saved Network Settings are persistent, meaning it is kept on restart.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#time","title":"Time","text":"<p>Set how the Sonar acquires date and time, NTP Server og Use Computer Time. Default is NTP server (automatically get time sync from the Internet).</p> <p>Note</p> <p>Using computer time is only valid until the next restart of the Sonar. Saved Time Settings are persistent, meaning it is kept on restart.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#speed-of-sound","title":"Speed of Sound","text":"<p>Change the speed of sound to reflect the surroundings of the Sonar. Default is 1491 m/s, the approximate speed of sound in 5-10\u00b0C ocean water at 5 meters depth. When using custom speed, the speed must be between 1000 and 2000 m/s.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#mounting-angle","title":"Mounting angle","text":"<p>Adjust how the Sonar is mounted on your vehicle / ROV. Valid values are from -90\u00b0 (downwards) to 90\u00b0 (upwards). Default mounting angle is 0\u00b0 (straight ahead).</p> <p>Note</p> <p>Mounting angle is only stored locally in your browser and not persisted if you access the Sonar GUI from a different browser or device.</p> <p></p> <p>Changing this value will affect how the default rotation of the vision cone and Sonar model is shown in the 3D view.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-config/#about-this-sonar","title":"About this Sonar","text":"<p>Displays various version and hardware readouts from your Sonar. The changelog can also be accessed from here (or by clicking the version number in the footer of any other page). </p> <p>The changelog only shows the latest changes for the firmware version currently installed. Use the firmware upgrader to see if there are newer versions available.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#advanced","title":"Advanced","text":"<p>Various advanced settings related to maintenance and troubleshooting the Sonar 3D-15. Toggle the display of these settings by clicking the \"Show / Hide\" button.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-config/#blink","title":"Blink","text":"<p>Toggle blinking of the Sonar's LED. The LED on the front of the Sonar blinks green for a set duration of time before turning off, confirming connection and operational status.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#restart","title":"Restart","text":"<p>Restarts the Sonar. Restarts usually take between 30 seconds to a minute to complete.</p> <p>Note</p> <p>Some settings are preserved on restart. These are Network, Time and Integration API settings. Other settings may need to be set again after restart. See each respective section for further details.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#firmware","title":"Firmware","text":"<p>Allows for upgrading the Sonar's firmware. Click the button to open a new tab to the firmware updater.</p> <p></p> <p>The firmware upgrader allows for automatically checking and upgrading the Sonar firmware if neccessary. This requires a working Internet connection to work. Alternatively, an offline (manual) upgrade can be used. Read more about offline firmware upgrades.</p> <p>If needed, follow the steps to complete the upgrade. Upon completion, the Sonar will reset all settings back to factory default and restart. Firmware upgrade can take a couple of minutes.</p> <p>Important</p> <p>Keep the Sonar submerged in water to ensure a proper operational temperature during upgrade. Failure to do so may render your Sonar in an inoperable state.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#download-diagnostics","title":"Download Diagnostics","text":"<p>Generates a diagnostic log for Water Linked to assist in diagnosing issues.</p> <p></p> <p>Click the \"Prepare download\" button and ensure that the Sonar is submerged in water. Provide a detailed description of the issue in the text box and click \"Download\".</p> <p>Important</p> <p>The front of the Sonar should be 0.5m to 2m away from any wall or solid object to ensure ideal conditions before creating a diagnostic log.</p> <p>Submit a support ticket and attach the diagnostic log you just downloaded.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#integration-api","title":"Integration API","text":"<p>Change how the Sonar transmits data and at what address the integration API is available from. Options are Disabled, Multicast (Default) and Unicast. Read more about the Integration API.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#update-rate","title":"Update Rate","text":"<p>Toggle the display of an update graph overlay in 3D view which shows how fast data is being received from the Sonar. The graph displays the last 10 seconds of updates along with an average frame rate. The graph can be toggled in the 3D view.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-config/#factory-reset","title":"Factory Reset","text":"<p>Reset all settings to factory defaults and restarts the Sonar. A confirmation is required before initiating a factory reset.</p>"},{"location":"sonar-3d/sonar-3d-15-config/#connection-events","title":"Connection events","text":"<p>Troubleshoot WebRTC connection issues between the GUI and the Sonar backend. These events relate to the UIs ability to communicate with the Sonar to establish the video streams, connection to the API, read system status and so on.</p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/","title":"Integrating onto Deep Trekker PIVOT ROV","text":""},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#introduction","title":"Introduction","text":"<p>This is a manual on how to install the Water Linked Sonar 3D-15 for the Deep Trekker PIVOT ROV. We recommend that you contact Deep Trekker to purchase the Sonar 3D-15, along with all parts to allow for installation on your Deep Trekker vehicle. You can contact support@deeptrekker.com or sales@deeptrekker.com for this. Other documentation and information can be found at:</p> <ul> <li>Deep Trekker PIVOT ROV Support</li> </ul> <p></p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#whats-in-the-box","title":"What's in the box","text":"<p>The Sonar 3D-15 from Water Linked is normally shipped with an attached I/O Interface board. If you have bought the Sonar 3D-15 and Integration Kit from Deep Trekker, you will have a Deep Trekker (DT9636) connector instead of the I/O Interface. In that case, follow the integration instructions from Deep Trekker.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#what-youll-need","title":"What You\u2019ll Need","text":"<p>To follow this guide, you will need the following:</p> <ul> <li> <p>An Ethernet cable</p> <ul> <li>To connect the Deep Trekker Controller to your PC</li> </ul> </li> <li> <p>Correct connector </p> <ul> <li>Deep Trekker DT9636 </li> </ul> </li> <li> <p>A mount (Sonar 3D-15 to ROV)</p> <ul> <li>An example can be downloaded from here: 3D step file</li> </ul> </li> <li> <p>Correct screws</p> <ul> <li>See the Mounting section</li> </ul> </li> </ul>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#connector-setup","title":"Connector Setup","text":"<p>Testing the Sonar 3D-15 Separately</p> <p>If the I/O Interface board is attached, the Sonar 3D-15 can be tested directly using an Ethernet cable and a power supply. If you wish to test the device on its own before integration, follow the general Quickstart tutorial, available here:  Quickstart.</p> <p>Connecting to Deep Trekker ROV</p> <p>The most common solution is to terminate a Deep Trekker connection port cable (DT9636) directly to the cable of the Sonar 3D-15. To do this, we recommend the following procedure:</p> <ol> <li> <p>Remove the I/O board. After this step, the I/O board is no longer needed for normal operation. The cables from the Sonar 3D-15 are shown in the picture below.</p> <p></p> </li> <li> <p>Terminate a Deep Trekker (DT9636) connection to the Sonar 3D-15 cable using the table and pinmap below.</p> Sonar Cable Type Sonar Cable Color Pin Number 9636 Deep Trekker Connector 7-pole (Female) Rebuild Kit DC- Black 1 DC+ Red 2 RX+ Green/White 6 RX- Green 5 TX+ Orange/White 4 TX- Orange 3 NC NC 7 <p></p> </li> <li> <p>Add a waterproof seal around the termination.</p> <p></p> </li> </ol> <p>Note</p> <p>The termination has to be waterproof and needs to withstand the depths of which you will be running your ROV. </p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#mounting","title":"Mounting","text":"<p>The Sonar 3D-15 needs to be physically attached to the Deep Trekker ROV. A possible option on how to do this will be listed here. There are many different approaches to achieve this, and this approach is only listed to provide an idea.</p> <ol> <li> <p>Create or find a suitable mount</p> <p>An example 3D step file of a mount is found here: Download 3D step file </p> <p>Note</p> <p>Choose a 3D print material that can withstand the expected operating conditions.</p> </li> <li> <p>Identify the screws and mount to use</p> <p>Use <code>[M4x (5.0 + X) mm]</code> screws to attach the Sonar 3D-15 to the mount, and use <code>[M4x (7.0 + X) mm]</code> screws with hex nuts and washers to attach the mount to the platform in front of the Deep Trekker. Exchange the X with the thickness of your mount.</p> <p>For example, for a 3.0mm thick mount (as the given 3D print), the following is sufficient:</p> <ul> <li>4x <code>M4x8.0mm</code> screws</li> <li>4x <code>M4x10.0mm</code> screws</li> <li>4x <code>M4</code> Hex Nuts</li> <li>4x <code>M4</code> Washers </li> </ul> <p></p> <p>Warning</p> <p>To avoid damaging the Sonar 3D-15, make sure the screws are not too long.</p> </li> <li> <p>Attach the mount to the Sonar 3D-15</p> <p></p> </li> <li> <p>Attach the mounted Sonar 3D-15 to the Deep Trekker ROV</p> <p>We recommend putting the Sonar 3D-15 on the platform in the front for the Deep Trekker. In that way, the Sonar 3D-15 can be tilted by using the controller of the ROV, without blocking the Sonar 3D-15\u2019s field of view.</p> <p> </p> </li> </ol> <p>Note</p> <p>Make sure the Sonar 3D-15 and cable are neatly and securely attached before use.</p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#connection-steps","title":"Connection steps","text":""},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#1-connect-to-the-bulkhead","title":"1. Connect to the bulkhead","text":"<p>Connect the Sonar 3D-15 cable into one of your Deep Trekker ROV's free Ethernet ports on the Bulkhead of the DeepTrekker.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#2-connect-the-top-side","title":"2. Connect the top side","text":"<p>Connect one end of an Ethernet cable to the Deep Trekker controller\u2019s Ethernet port, and the other end to your computer.</p> <p> </p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#3-turn-on-the-drone","title":"3. Turn on the drone","text":"<p>Click the power button on the Deep Trekker controller and let the drone boot up. </p> <p>Warning</p> <p>To avoid potential power hazard or errors, make sure all cables are securely connected before you turn on the controller. Do not connect sensors to the Deep Trekker while the power is on.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#4-access-the-sonar-3d-15-gui","title":"4. Access the Sonar 3D-15 GUI","text":"<p>The Sonar 3D-15 GUI is accessed by entering the Sonar 3D-15's IP-address into the browser running on the computer connected to the controller.</p> <p>Both the PC and Deep Trekker need to have DHCP enabled. This is standard for most computers and is normally enabled. But, to check if your computer has DHCP enabled, do the following:</p> <p>Checking DHCP for Windows:</p> <p>Option 1:</p> <ol> <li>Open Settings &gt; Network &amp; Internet.</li> <li>Click on Ethernet</li> <li>Select your active connection.</li> <li>Scroll to IP-address settings:<ul> <li>If it says Automatic (DHCP) \u2192 it's enabled. </li> <li>If it says Manual \u2192 DHCP is off.</li> </ul> </li> </ol> <p>Option 2:</p> <ol> <li> <p>Run the following command in the windows terminal <pre><code>ipconfig /all \n</code></pre></p> </li> <li> <p>Look for the section Ethernet adapter Ethernet and the line DHCP Enabled (green arrow)</p> </li> <li> <p>If DHCP Enabled is set to Yes, then DHCP is enabled.</p> <p></p> </li> </ol> <p>Checking DHCP for Linux:</p> <ol> <li>Run the following in the terminal:</li> </ol> <pre><code>for iface in $(ip -o link show | awk -F': ' '{print $2}'); do\n  echo \"Interface: $iface\"\n  ip addr show \"$iface\" | grep -q dynamic &amp;&amp; echo \"  --&gt; DHCP detected\" || echo \"  --&gt; Static or unknown\"\ndone\n</code></pre> <p>If you see --&gt; DHCP detected, your PC has DHCP enabled and you are ready to continue.</p> <p>If DHCP is disabled, please enable this on your computer. </p> <p>Finding and connecting to the IP-address of the Sonar 3D-15</p> <p>You need to determine which IP-address has been automatically assigned to it by the Deep Trekker system. Once located, entering it into your browser will display a page like the one below \u2014 in this example, the Sonar 3D-15 is using <code>10.77.0.7</code>.</p> <p></p> <p>Warning</p> <p>Don't operate the Sonar 3D-15 out of water for any long periods. To avoid overheating of the Sonar 3D-15, don\u2019t click the green button \u201cEnable Acoustics\u201d until the ROV is submerged in water. </p> <p>Acoustics is always disabled when first booting up the Sonar 3D-15, and will be turned on once clicking this button. The Sonar 3D-15 will automatically turn itself off if too hot, but will take some time to cool down, it's best to avoid this happening.</p> <p>To figure out what the correct IP-address is, do the following:</p> <ol> <li> <p>Get an overview of the network</p> <p>Click Menu -&gt; Settings -&gt; Network. This will show a list of the IP-addresses of the connected sensors on the DeepTrekker. At this time, the Sonar 3D-15 does not appear in the list, even when connected.</p> <p> </p> </li> <li> <p>Test and find the IP-address</p> <p>The ROV usually assigns connected devices using a base IP-address, in this example, <code>10.77.0.X</code>. It's possible your ROV has a different base, use the one shown on your Controller.</p> <p>To locate the Sonar 3D-15's IP-address, test an address that doesn't appear in the network list \u2014 preferably one just above the highest one in the list. </p> <ul> <li>For example, if the highest IP-address on the list of the Deep Trekker Controller Network section is the DVL A50 with <code>10.77.0.6</code>, try accessing the Sonar 3D-15 with <code>10.77.0.7</code> or <code>10.77.0.8</code> in the browser</li> <li>Or, if all addresses between <code>10.77.0.1</code> - <code>10.77.0.7</code> are on the list, except for <code>10.77.0.4</code>, try the IP-address <code>10.77.0.4</code> for the Sonar 3D-15.</li> </ul> </li> </ol> <p>Tip</p> <p>You can also access the GUI on the Sonar 3D-15's fallback address <code>192.168.194.96</code>,this is explained in more detail in the general Quickstart guide, which can be found at Quickstart .</p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#5-put-the-rov-into-the-water","title":"5. Put the ROV into the water","text":"<p>You are now ready to put the ROV into the water. </p> <p> </p>"},{"location":"sonar-3d/sonar-3d-15-deep-trekker-rov/#6-enable-acoustics","title":"6. Enable acoustics","text":"<p>When ready, click the \u201dStart acoustics\u201d button to initiate the Sonar 3D-15. It will display a 3D point cloud in the GUI representing the area in front of the Sonar 3D-15.</p> <p>You are now ready to use the Water Linked Sonar 3D-15 with the Deep Trekker ROV!</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-diagnostic-log/","title":"How to take a Diagnostic Log","text":"<p>A diagnostic log is one of the most important tools we have for helping you.  It allows us to:</p> <ul> <li> <p>Check the health and performance of the sonar.</p> </li> <li> <p>Analyse the acoustic environment the sonar is operating in.</p> </li> <li> <p>Identify issues related to noise, reflections, and installation.</p> </li> </ul> <p>Submerge the Sonar 3D-15 in water and make sure the front of the Sonar 3D-15 is ideally 0.5m - 2m away from any wall or solid object. </p> <p>You can acquire this in the UI &gt; Settings &gt; \"Go to sonar config\" Button &gt; \"Diagnostics\" Tab &gt; Diagnostic Log.</p>"},{"location":"sonar-3d/sonar-3d-15-electrical/","title":"Wiring Sonar 3D-15","text":"<p>The tables below shows the pinning of the Sonar 3D-15 interface.</p> Interface Color Negative/Ground Black Positive (10-30V) Red ETH RX+ Green/White ETH RX- Green ETH TX- Orange ETH TX+ Orange/White Shielded wire Naked (silver)"},{"location":"sonar-3d/sonar-3d-15-electrical/#io-boards","title":"IO Boards","text":"<p>The Water Linked IO Board is the easiest solution for testing Water Linked Products like the Sonar 3D-15. They provide an interface for connecting Power and ethernet to the Sonar 3D-15. Read more about how to connect your IO Board to your Water Linked product under \"IO-Interface Cards\".</p>"},{"location":"sonar-3d/sonar-3d-15-electrical/#led-sonar-3d-15","title":"LED Sonar 3D-15","text":"<p>The table below shows the LED behavior of the Sonar 3D-15.</p> LED behavior Description No light Power is off Solid green Powering on Flashing green, mostly off (slow, about every second) Power on, acoustics disabled Flashing green, mostly on (slow, about every second) Power on, acoustics enabled Flashing green for a few seconds Diagnostics blink initiated from GUI or API Flashing green (fast, many times a second) Sonar is in thermal shutdown"},{"location":"sonar-3d/sonar-3d-15-faq/","title":"Sonar 3D-15 FAQ","text":"<p>Below are some frequently asked questions about the Sonar 3D-15. Click on a question in the table of content to the right or simply scroll down to read the FAQ's. </p>"},{"location":"sonar-3d/sonar-3d-15-faq/#1-what-is-the-maximum-depth-rating-of-the-sonar-3d-15","title":"1. What is the maximum depth rating of the Sonar 3D-15?","text":"<p>The Sonar 3D-15 is rated for depths up to 300\u202fm, ensuring reliable performance in a wide range of underwater environments.</p>"},{"location":"sonar-3d/sonar-3d-15-faq/#2-what-kind-of-power-supply-is-recommended","title":"2. What kind of power supply is recommended?","text":"<p>We recommend using a power supply capable of delivering 60\u202fW peak (surge) at 10\u201330\u202fV. For optimal performance, a 20\u202fV or higher supply is preferred.</p>"},{"location":"sonar-3d/sonar-3d-15-faq/#3-does-the-sonar-3d-15-have-a-thermal-shutdown-mechanism","title":"3. Does the Sonar 3D-15 have a thermal shutdown mechanism?","text":"<p>Yes. The Sonar 3D-15 includes an internal thermal shutdown to prevent damage to its electronics. You will receive a warning in both the GUI and the API if the internal temperature reaches 55\u202f\u00b0C, indicating that the unit will shut down the acoustic at 60\u202f\u00b0C if it continues to heat up. This will cause you to loose the sonar image. </p> <p>Recommended action: - Once you see the overheat warning (55\u202f\u00b0C), check that the Sonar is in water or cooled in any other way.  - If the temperature reaches 70\u202f\u00b0C, the Sonar 3D-15 will shut down to prevent permanent damage and not restart before it reaches 65 \u00b0C again, and it must reach 55 \u00b0C before you will get the sonar image back. </p>"},{"location":"sonar-3d/sonar-3d-15-faq/#4-what-are-the-default-network-settings-of-the-sonar-3d-15","title":"4. What are the default network settings of the Sonar 3D-15?","text":"<p>By default, the Sonar 3D-15 uses DHCP to request an address. If no DHCP server answers, it is always accessible on the fallback IP <code>192.168.194.96</code>. For a step-by-step guide to using the fallback IP, mDNS, or setting a static IP in the GUI, see Sonar 3D-15 Networking.</p>"},{"location":"sonar-3d/sonar-3d-15-faq/#5-is-any-software-installation-required-to-operate-the-sonar-3d-15","title":"5. Is any software installation required to operate the Sonar 3D-15?","text":"<p>No, there is no software installation needed. Once connected and powered on, you can access the Sonar 3D-15\u2019s built-in GUI through a standard web browser. This allows you to operate and configure the sonar without installing any additional software.</p>"},{"location":"sonar-3d/sonar-3d-15-faq/#6-the-performance-is-not-as-expected","title":"6. The performance is not as expected?","text":"<p>If the performance is not as expected and you can not find a solution in this documentation, please create a diagnostic log with your Sonar 3D-15 and submit a support ticket with the Sonar 3D diagnostic log file attached. </p>"},{"location":"sonar-3d/sonar-3d-15-faq/#7-how-should-i-maintain-the-sonar-3d-15","title":"7. How should I maintain the Sonar 3D-15?","text":"<p>After operating in seawater, brackish water, chlorinated pools, or any medium other than freshwater, rinse the unit thoroughly with fresh water to remove residues and salt deposits. Once dry, wipe the exterior with a clean, dry cloth. Avoid solvents or abrasive cleaners.</p>"},{"location":"sonar-3d/sonar-3d-15-faq/#8-what-if-i-need-a-custom-integration","title":"8. What if I need a custom integration?","text":"<p>For advanced integrations, you can use the Sonar 3D-15\u2019s API to develop custom solutions. This requires some programming knowledge but enables control and automation of the Sonar 3D-15\u2019s functionality from your custom system.</p>"},{"location":"sonar-3d/sonar-3d-15-gui/","title":"GUI","text":"<p>The GUI provides a simple no-setup solution to view the Sonar 3D-15 data and change its settings.</p> <p>When you first start the Sonar 3D-15 GUI you will be greeted with a view showing the 3D point cloud and various settings. To get familiar with the interface, click the  icon (help overlay). The 3D view can be controlled via mouse and keyboard, or touch controls.</p> <p></p> <p>The help overlay walks you through common features of the Sonar 3D-15 GUI.</p>"},{"location":"sonar-3d/sonar-3d-15-introduction/","title":"Sonar 3D-15","text":"<p>The Water Linked Sonar 3D-15 is an advanced 3D multibeam imaging sonar designed to enhance underwater exploration and navigation. </p> <p>With real-time 3D imaging capabilities, it provides a comprehensive view of submerged environments, even in low-visibility conditions. </p>"},{"location":"sonar-3d/sonar-3d-15-mechanical/","title":"Mechanical Integration of the Sonar 3D-15","text":"<p>Here you should find all the information needed for a successful mechanical integration of the Sonar 3D-15 into your system.</p>"},{"location":"sonar-3d/sonar-3d-15-mechanical/#dimensions","title":"Dimensions","text":"<p>A detailed model (.step) of the Sonar, including the field of view, is available under Resources</p> <p>  The cable can be bent as shown in the image up to 90 degrees without causing any damage. </p>"},{"location":"sonar-3d/sonar-3d-15-mechanical/#field-of-view","title":"Field of view","text":"<p>The Sonar 3D-15 provides an opening angle as described in the tables below for the different modes. </p>"},{"location":"sonar-3d/sonar-3d-15-mechanical/#low-frequency-12-mhz","title":"Low Frequency (1.2 MHz)","text":"Specification Range Pitch (opening) -20\u00b0 to +20\u00b0 Yaw (opening) -45\u00b0 to +45\u00b0 Vertical coverage 40\u00b0 total Horizontal coverage 90\u00b0 total"},{"location":"sonar-3d/sonar-3d-15-mechanical/#high-frequency-24-mhz","title":"High Frequency (2.4 MHz)","text":"Specification Range Pitch (opening) -20\u00b0 to +20\u00b0 Yaw (opening) -20\u00b0 to +20\u00b0 Vertical coverage 40\u00b0 total Horizontal coverage 40\u00b0 total"},{"location":"sonar-3d/sonar-3d-15-networking/","title":"Networking Sonar 3D-15","text":"<p>The Sonar 3D-15 has several services available over ethernet:</p> <ul> <li>Multicast DNS (mDNS) for easy discovery</li> <li>Web GUI, providing a visualization of the data collected by the Sonar 3D-15, as well as configuration, updating of software and more.</li> <li>UDP Multicast data stream</li> <li>Software updates</li> </ul>"},{"location":"sonar-3d/sonar-3d-15-networking/#network-configuration","title":"Network configuration","text":""},{"location":"sonar-3d/sonar-3d-15-networking/#multicast-dns-mdns","title":"Multicast DNS (mDNS)","text":"<p>The Sonar 3D-15 runs a DHCP client which will attempt to obtain an IP address from a DHCP server (e.g. in a router) on the same network, and supports mDNS: the mDNS name of the Sonar 3D-15 is <code>waterlinked-sonar</code>. On a computer which supports mDNS, one can then simply access the web GUI at http://waterlinked-sonar.</p> <p>Note</p> <p>If no DHCP server is available on the network, it is recommended to use the fallback IP or  configure a static IP address, as the Sonar 3D-15 can spend up to 5 minutes searching for a DHCP server.</p>"},{"location":"sonar-3d/sonar-3d-15-networking/#fallback-ip","title":"Fallback IP","text":"<p>The Sonar 3D-15 will always be available with the static IP address: 192.168.194.96. To be able to connect to the Sonar 3D-15 using it:</p> <ul> <li>Connect an ethernet cable directly from the Sonar 3D-15 to your computer.</li> <li>For an/the ethernet interface of your computer, configure it to have a static IP address in the same subnet as 192.168.194.96, (e.g. 192.168.194.90) or anything else of the form 192.168.194.xxx if using a subnet of the form 255.255.255.0 (aka 192.168.194.0/24).</li> <li>Activate the ethernet interface of your computer which you configured in the previous step.</li> <li>In a web browser, open http://192.168.194.96 to access the web GUI.</li> </ul>"},{"location":"sonar-3d/sonar-3d-15-networking/#user-set-ip","title":"User set IP","text":"<p>The IP address of the Sonar 3D-15 can be configured in two ways via the web GUI:</p> <ul> <li>DCHP client: An IP address is obtained from a DHCP server (e.g. in a router) on the same network, as mentioned above in mDNS.</li> <li>Static: Configure the Sonar 3D-15 to use static IP address of your choice.</li> </ul> <p>After the IP configuration of the Sonar 3D-15 is modified, the Sonar 3D-15 needs to be rebooted for the settings take effect.</p> <p>Note</p> <p>The boot time, i.e. the time it takes from the Sonar 3D-15 receives power until it starts operating normally, will depend upon the IP configuration. Using the fallback IP, the boot time can be as much as 1 min 30 sec, whilst it can be as low as 20 sec with a static IP.</p>"},{"location":"sonar-3d/sonar-3d-15-networking/#udp-multicast","title":"UDP multicast","text":"<p>By default, the Sonar 3D-15 uses UDP Multicast (<code>224.0.0.96:4747</code>), so any device on the local network can receive data without knowing the sonar\u2019s IP. Please see API for more information on the data on the UDP multicast.</p>"},{"location":"sonar-3d/sonar-3d-15-quickstart/","title":"Sonar 3D-15 Quickstart","text":"<p>This guide will help you connect and access the Sonar 3D-15 GUI so you can explore its features. You can follow the steps below or watch the accompanying video.</p> <p>Requirements:</p> <ul> <li>Water Linked 3D sonar</li> <li>Power source (10-30V DC, 60W surge)</li> <li>Power connector</li> <li>Computer</li> <li>Ethernet cable</li> </ul> <p></p>"},{"location":"sonar-3d/sonar-3d-15-quickstart/#1-unbox-and-place-in-water","title":"1. Unbox and place in water","text":"<p>Unbox the Sonar 3D-15 and place the Sonar 3D-15 in a water container (e.g., a bucket or tank). Avoid getting water on the I/O board.</p> <p> </p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-quickstart/#2-connect-the-ethernet-cable","title":"2. Connect the Ethernet cable","text":"<p>Plug one end of the Ethernet cable into your computer's Ethernet port, and connect the other end to the Sonar's I/O board.  </p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-quickstart/#3-connect-a-power-supply-and-boot-the-sonar","title":"3. Connect a power supply and boot the Sonar","text":"<ul> <li>Connect your power supply to the I/O board. Use a power supply capable of delivering 60W (surge) at 10-30V (20+ V recommended).</li> <li>Turn on your power supply. Your Sonar 3D-15 takes about 30 seconds to boot.</li> </ul>"},{"location":"sonar-3d/sonar-3d-15-quickstart/#4-configure-your-computers-ip","title":"4. Configure your computer\u2019s IP","text":"<p>Assign your computer an IP address in the <code>192.168.194.x</code> range (e.g.: <code>192.168.194.90</code> with netmask <code>255.255.255.0</code>).</p> <p>Note</p> <p>Configuring network varies between operating systems and versions. Please search the web on how to do this for your operating system. Feel free to contact us for support.</p> <p>See more details in the Networking section.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-quickstart/#5-access-the-sonar-gui","title":"5. Access the Sonar GUI","text":"<p>Open up your web browser (e.g.: Chrome) and enter the fallback IP address <code>192.168.194.96</code>. You should now be able to see and use the Sonar 3D-15 GUI.</p> <p></p>"},{"location":"sonar-3d/sonar-3d-15-quickstart/#need-help","title":"Need help?","text":"<p>Check out the FAQ!</p>"},{"location":"sonar-3d/sonar-3d-15-resources/","title":"Resources for the Sonar 3D-15","text":""},{"location":"sonar-3d/sonar-3d-15-resources/#sonar-3d-15-shop-page-resources","title":"Sonar 3D-15 Shop Page Resources","text":"<p>Here you can find the Datasheet, 3D Model (.step) and Certificate of Origin</p> <p>Shop Page</p>"},{"location":"sonar-3d/sonar-3d-15-software-changelog/","title":"Software Versions","text":""},{"location":"sonar-3d/sonar-3d-15-software-changelog/#v-160-nov-2025","title":"V 1.6.0 - Nov. 2025","text":"<p>Improve imaging performance Improve diagnostic functionality Add compression of image packets (RIP2 protocol) Add automatic check for clock difference between Sonar and users time Change protocol from WebRTC to websocket for Web GUI</p>"},{"location":"sonar-3d/sonar-3d-15-software-update/","title":"Software Updates","text":"<p>Keeping your Sonar 3D-15 up to date is highly recommended. You can update the software automatically or manually (offline). </p> <p>Warning</p> <p>Thermal protection is disabled during software upgrades. Make sure the Sonar 3D-15 is submerged in water (or otherwise cooled) throughout the update to prevent overheating.</p> <p>Allowing the sonar to shut down during upgrade might permanently damage the Sonar.</p>"},{"location":"sonar-3d/sonar-3d-15-software-update/#automatic-software-update","title":"Automatic Software Update","text":"<ol> <li>Connect to the Internet    Connect the Sonar 3D-15\u2019s Ethernet interface (via the I/O card) to a network with internet access.  </li> </ol> <p>Note</p> <p>If you are using a personal computer, you may need to bridge your computer\u2019s network interfaces (e.g., Wi-Fi to Ethernet) so that the Sonar 3D-15 can reach the internet.</p> <ol> <li> <p>Access the Sonar GUI    In your web browser, go to:  http://[IP_ADDRESS_OF_THE_SONAR]:9000/#/    or    navigate to \u201cAdvanced \u2192 config \u2192 Diagnostics (Show) \u2192 Firmware upgrade\u201d</p> </li> <li> <p>Check and Install The GUI automatically checks for new software versions. If an update is found, follow the on-screen instructions to install it.</p> </li> </ol>"},{"location":"sonar-3d/sonar-3d-15-software-update/#offline-software-update","title":"Offline Software Update","text":"<ol> <li> <p>Get Current Version and Chip ID In the Sonar GUI, select \u201cAdvanced \u2192 config \u2192 About this Sonar\u201d to note the current software version and the Chip ID.</p> </li> <li> <p>Download the Update Package Visit the update server to locate the correct <code>.wlup</code> file for your Sonar\u2019s Chip ID. Confirm that the downloaded version is newer than your current version.</p> </li> <li> <p>Set System Time (If Needed) If you encounter an error (e.g., <code>Failed: Error upgrading: resize: non-zero exit code: exit status 1</code>), you must set the system time:</p> <ul> <li>Open the Sonar GUI and select Advanced \u2192 Config</li> <li>Under Time choose use computer time and click save.</li> </ul> </li> <li> <p>Upload the Update File Return to: http://[IP_ADDRESS_OF_THE_SONAR]:9000/#/ Select Software upgrade, choose Manual upload, and then upload the <code>.wlup</code> file.</p> </li> <li> <p>Complete the Upgrade Wait for the Sonar to finish applying the update. Keep it submerged to avoid overheating. After completion, the Sonar 3D-15 will reboot with the new software version.</p> </li> </ol> <p>If you have any questions or run into issues, please consult the release notes  and check out the Sonar 3D-15 FAQ or contact our support team.</p>"},{"location":"sonar-3d/sonar-replay/","title":"Sonar Replay","text":"<p>Sonar Replay allows play back of recordings taken with the Sonar 3D-15 directly in your browser. You can access Sonar Replay here. The interface is similar to that of the Sonar 3D-15, but with some changes.</p> <p>All processing is done in your browser and not uploaded anywhere. </p> <p></p> <p>Note</p> <p>Sonar Replay is still in development. Some features may not be fully functional or implemented yet.</p> <p>Click the file input to select a file or drag and drop a file onto the browser window. Alternatively use one of the provided examples by clicking \"Load demo\".</p> <p>Processing time depends on the file size, device and browser. While processing, an estimated remaining time is shown.</p> <p></p> <p>Note</p> <p>We recommend recordings smaller than 300 MB for the best experience.</p>"},{"location":"sonar-3d/sonar-replay/#play-back","title":"Play back","text":"<p>Once processing is complete, the 3D point cloud is shown and play back will start immediately. Scrub through the recording using the play back slider, pause, adjust play back speed and get an overview of the recording with \"Chapters\".</p> <p></p>"},{"location":"sonar-3d/sonar-replay/#chapters","title":"Chapters","text":"<p>Sonar Replay will automatically create chapter previews of the provided recording. Access this by clicking the \"Chapters\" button or by hitting <code>C</code> on your keyboard. Note that all recorded timestamps are in UTC (Coordinated Universal Time) and reflect the sonar's time settings at the time of recording.</p> <p></p> <p>Tip</p> <p>Quickly jump to a chapter by clicking the preview image.</p> <p>Chapter preview can be expanded to a larger version by clicking the magnifying glass icon that appears when hovering the chapter preview. </p> <p></p>"},{"location":"sonar-3d/sonar-replay/#adjust-settings","title":"Adjust settings","text":"<p>Much like the real Sonar 3D-15, settings can be adjusted to better fit your use case and observe the recording. Toggle the settings tray by clicking the \"Settings\" button or hit <code>S</code> on your keyboard. From here many settings can be adjusted like point size, color palette and toggling elements in the 3D view.</p> <p></p>"},{"location":"sonar-3d/sonar-replay/#help","title":"Help","text":"<p>Get a quick overview of all main parts of the interface by clicking the <code>?</code> (Question) icon top left or by hitting <code>H</code> on your keyboard.</p> <p></p>"},{"location":"underwater-gps/antenna/","title":"Antenna","text":"<p>Buy Antenna here!</p> <p></p>"},{"location":"underwater-gps/antenna/#description","title":"Description","text":"<p>The Antenna is a quick deployable analog hydro acoustic receiver compatible with the Underwater GPS G2 system. The Antenna is equipped with 4 Receiver-A1 with large dynamic range followed by advanced digital signal processing functionality when connected to the Underwater GPS G2 topside unit.</p>"},{"location":"underwater-gps/antenna/#benefits","title":"Benefits","text":"<ul> <li> <p>Foldable to minimize space during travel (54 x 12.5 x 14.5 cm).</p> </li> <li> <p>Quick deployable to minimize setup time.</p> </li> <li> <p>Small baseline (98 x 53.5 cm) suitable for small boats and tanks/pools.</p> </li> <li> <p>Highly robust operation in areas with reflections (shallow water, around installations etc.)</p> </li> <li> <p>Includes C-Size RAM Mount fixtures for universal mounting capabilities.</p> </li> </ul>"},{"location":"underwater-gps/antenna/#wiring-interface","title":"Wiring interface","text":"<p>The Antenna comes with 10 meters of cable. This is the maximum cable length available for the Antenna due to noise limitations on the analog signals.</p> <p>The table below shows the pinning of the Antenna connector.</p> <p></p>"},{"location":"underwater-gps/antenna/#dimensions","title":"Dimensions","text":"<p>Top view</p> <p></p> <p>Side view</p> <p></p>"},{"location":"underwater-gps/introduction/","title":"Introduction","text":""},{"location":"underwater-gps/introduction/#underwater-gps-g2","title":"Underwater GPS G2","text":"<p>Buy Underwater GPS G2 here!</p> <p></p> <p>The Underwater GPS G2 is a robust and reliable acoustic positioning system with a range of up to 300m (R300 edition). The purpose of the system is to give a live GPS position of ROVs, divers and other moving objects below the water surface. </p> <p></p> <p>Tip</p> <p>We offer a live demo of the GUI of the UGPS G2 system. It runs on simulated data designed to illustrate various GUI features; this data is not necessarily realistic in all aspects!</p> <p>The Underwater GPS G2 system is based upon Short Baseline (SBL) acoustic positioning. A locator (U1, A1, or D1) is attached to the device to be positioned. It functions as a beacon, sending out acoustic signals. Near the surface, either an antenna containing four receivers is lowered into the water, or four loose receivers are lowered into the water. These listen for the beacon signals.</p> <p>Time-of-flight from the locator to each of the four receivers is used in an innovative algorithm to calculate the position of the locator relative to the UGPS G2 topside unit. We refer to as the acoustic position. The UGPS G2 system obtains a global position by combining this acoustic position with the global GPS coordinates of the topside unit. This may be provided by the topside unit's in-built GPS antenna, or, for greater precision, passed in externally by means of the UGPS G2 API. This API provides output of both the acoustic and global positions calculated by the UGPS G2 system, as well as comprehensive programmatic configuration of the system.</p> <p>Compared to USBL systems, the UGPS G2 system has the advantage of working well in challenging environments, for example shallow water, or reflective environments such as near ship hulls, in fish cages, near harbour installations, inside water tanks, etc. One of our FAQs elaborates further on this.</p>"},{"location":"underwater-gps/introduction/#features","title":"Features","text":"<ul> <li>Range up to 300m (R300 version only)</li> <li>Quick deployment using an antenna</li> <li>WiFi connectivity</li> <li>Integrated global GPS antenna</li> <li>Interface supporting BlueROV2 hardware integration</li> <li>Simple and quick updating of firmware/software</li> </ul>"},{"location":"underwater-gps/introduction/#kit-content","title":"Kit content","text":"<ul> <li>1 x Underwater GPS Topside housing with Master-D1 and WiFi dongle</li> <li>4 x Receiver-D1 with 10m cable / 1 x Antenna</li> <li>1 x Locator U1/A1/D1</li> <li>1 x 5m power cable</li> </ul>"},{"location":"underwater-gps/introduction/#warnings","title":"Warnings","text":"<p>Please read the following carefully before the UGPS G2 system is installed and used for the first time.</p> Operation medium The Underwater GPS G2 system is designed only to work in water. It will not work if the locator and/or antenna/receivers are out of water. Max voltage The absolute maximum voltage rating of the equipment is 30V. Voltages above this will damage the electronics. Temperature Make sure the system does not overheat. Avoid placing it in direct sunlight over extended periods of time. Salt water The contents of the topside housing will corrode and/or short if in contact with salt water. Keep the housing lid closed when in the field to avoid salt water getting inside. Force Avoid using excessive force on connectors, screws and other parts of the system, as this can lead to mechanical failure. Locator U1 It will discharge when not in use, so always charge it before operation. See U1 charging procedure. External position and U1 You can use external position data to give a better position estimate, however, if using the U1 the topside will still need GPS lock for time synchronization purposes. Implementing an external compass In a static environment manually setting the current heading based on a reliable compass will be sufficient. In more dynamic/challenging environments it is neccessary to provide compass heading from an external compass, to achive accurate position data."},{"location":"underwater-gps/introduction/#discussion","title":"Discussion","text":"<p>If you have questions, you are very welcome to contact our customer support, where we will be happy to help you.</p>"},{"location":"underwater-gps/introduction/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"underwater-gps/network-settings/","title":"Network Settings","text":"<p>The Underwater GPS GUI is web based, and can be accessed using your favorite web browser. Connect to the system through either of the methods listed below.</p> <p>Note</p> <p>We currently support and recommend Chrome, Firefox, Safari and Edge.  Internet Explorer is not supported as of now.</p>"},{"location":"underwater-gps/network-settings/#wifi","title":"WiFi","text":"<p>The local Underwater GPS WiFi is configured as:</p> Mode     : Access Point SSID     : UnderwaterGPS Password : waterlinked Security : WPA2-Personal <p>To connect to the UGPS over it's local wifi - Power on the UGPS and wait for GPS lock and the Ready LED to be lit. - Connect to the UnderwaterGPS GUI on: http://192.168.7.1/</p>"},{"location":"underwater-gps/network-settings/#ethernet","title":"Ethernet","text":"<p>At power-up, the Master-D1 reads the IP switch settings. The ethernet network mode depends on the switch position.</p> Network mode Direction IP switch position Configurable UP Static IP 192.168.194.94 DOWN"},{"location":"underwater-gps/network-settings/#configurable-mode","title":"Configurable mode","text":"<p>In the configurable mode the UGPS will receive an IP adress from the local router and can be reached on the assigned IP address.</p>"},{"location":"underwater-gps/network-settings/#fallback-or-static-ip","title":"Fallback or static IP","text":"<p>The UGPS can always be reached on its static IP adress. </p> <p>Before turning the UGPS on:</p> <ul> <li>Connect the UGPS ethernet directly to your computer</li> <li>Set the switch in the static IP position </li> </ul> <p>Then:</p> <ul> <li>Power on the UGPS and wait for GPS lock and the Ready LED to be lit.</li> <li>Configure your computer to static IP on the same subnet as the UGPS. For example: If the IP address of the UGPS is 192.168.194.94 the host computer needs to be configured to a different 192.168.194.x address e.g. 192.168.194.100.</li> <li>Connect to the UnderwaterGPS GUI on: http://192.168.194.94/</li> </ul> <p>Note</p> <p>With blueOS the static IP is 192.168.2.94</p>"},{"location":"underwater-gps/power-supply/","title":"Power supply","text":"<p>The Underwater GPS G2 can be powered using either the provided power cable connected to a 12VDC source, or with a battery (not provided).</p>"},{"location":"underwater-gps/power-supply/#power-cable","title":"Power cable","text":"Connector position Manufacturer Part number Underwater GPS Housing Switchcraft 17282-2PG-300 Power cable Switchcraft CARA162802S19790 <p>The power cable comes with a blunt cut end. Strip the jacket and connect the wires to your favorite 12V power source.</p> Black Negative White Positive Input voltage 10V \u2013 30V Current consumption 0.25A at 12V Power-on current surge 2.30A at 12V Protection Reverse polarity <p>Both the power button and the power input can be found on the right side of the Underwater GPS housing. The power button will illuminate when the power is switched on.</p> <p>Note</p> <p>There is both an external latching power button and an internal power switch. These are OR configured, meaning they override each other. By default, the internal power switch is in the OFF position.</p>"},{"location":"underwater-gps/power-supply/#battery","title":"Battery","text":"<p>A battery may be used instead of wired power. Use a battery with a nominal voltage within the voltage range. A Molex-to-XT60 cable assembly is provided with the Underwater GPS kit for ease of connection to battery packs with XT60 connectors. The battery pack can be secured within the Underwater GPS housing using the provided non-slip battery strap.</p> <p></p> <p>Maximum battery width: 50 mm (2\"). </p>"},{"location":"underwater-gps/power-supply/#power-usage","title":"Power usage","text":"<p>The power usage of the Underwater GPS G2 will vary based on the supplied voltage, Receiver and Locator setup, and whether or not the BlueROV2 Integration Kit has been installed.</p> <p>The table below list the average current consumption for components used with Underwater GPS G2, assuming an input voltage of 12 VDC.</p> Component Current consumption (12V in) Master Electronics 250 mA Locator-A1 10 mA Locator-D1 130 mA Locator-S1 60 mA 4x Receiver-D1 4x35 mA Antenna 20 mA"},{"location":"underwater-gps/quickstart/","title":"Quickstart","text":""},{"location":"underwater-gps/quickstart/#intro","title":"Intro","text":"<p>The UGPS system consists of three components:</p> <ul> <li> <p>The UGPS Topside</p> </li> <li> <p>Baseline: Antenna or receivers</p> </li> <li> <p>Locator:   You can choose between three different locators: Locator-A1, Locator-D1 and locator-U1</p> </li> </ul> <p>In addition you need a power supply</p>"},{"location":"underwater-gps/quickstart/#a-quick-guide-on-how-to-start-using-the-underwater-gps-system","title":"A quick guide on how to start using the Underwater GPS system:","text":"<ul> <li>Power on the topside unit</li> <li>Connect your computer to the Underwater GPS topside box</li> <li>Attach the locator (unless you are using the wireless U1) and the antenna/receivers to the topside box</li> <li>Deploy the antenna or receivers in water, in such a way that it will have line of sight to the locator when it is deployed.</li> <li>Attach the locator to the unit you want to track (eg. ROV/diver etc.)</li> <li>If using a locator U1, make sure it has GPS lock before it is deployed into water (steady green LED).</li> <li>Open up the GUI and adjust the settings. Make sure to select the correct locator and channel.</li> <li>Configure antenna/receiver placement in the GUI</li> <li>Set heading</li> </ul> <p>Tip</p> <p>If you are using a locator U1, make sure it is charged for at least 7 hours with a 5V/2A charger (not a computer) within 24 hours before use, and that it is adjusted to your preferred channel. Choosing channel 3 is usually good advice.</p>"},{"location":"underwater-gps/quickstart/#power-on-the-topside-unit","title":"Power on the topside unit","text":"<p>Start by connecting power to the UGPS G2 topside box using your prefered power supply. Make sure to place the box where there are good GPS signals. The GPS receiver in the topside box will begin receiving signals and achieve a lock whilst we setup the rest of the system.</p> <p>If you are using the Locator-U1, make sure it is fully charged and set to the chosen channel, then power it on now as well. It too will acquire a GPS lock whilst we setup the rest of the system.</p> <p>If you are inside, use of a GPS repeater or similar will be necessary.</p>"},{"location":"underwater-gps/quickstart/#connect-to-the-underwater-gps-topside-box","title":"Connect to the Underwater GPS topside box","text":"<p>Connect to the WiFi access point UnderwaterGPS on your PC/tablet/smartphone. The WiFi password is waterlinked. Navigate to http://192.168.7.1/ in a web browser to access the Underwater GPS web GUI.</p> <p>For alternative ways to connect to the topside, see Networking</p>"},{"location":"underwater-gps/quickstart/#deploy-locator-and-antennareceivers","title":"Deploy locator and antenna/receivers","text":""},{"location":"underwater-gps/quickstart/#locator","title":"Locator","text":"<p>Attach the locator (U1, A1, or D1) to your vehicle. The BlueROV2 integration guide may be helpful if integrating an A1 or D1 locator with a vehicle tether.</p> <p>If using an A1 or D1 locator, connect it to the 'Locator' bulkhead on the UGPS G2 topside box. The U1 connector is wireless, which means that this step can be omitted.</p> <p></p>"},{"location":"underwater-gps/quickstart/#antenna","title":"Antenna","text":"<p>Unfold the antenna and lock the mast straight using the latches on the folding joints. Avoid the cable being pinched at the joints. Secure the three arms in place using the thumb screw. Place the antenna in water at the desired location. Secure the antenna using the RAM Mount components included with the antenna.</p> <p>Connect the antenna to the bulkhead marked 'Receiver 1/Antenna' on the UGPS G2 topside box (see the above picture).</p> <p>Tip</p> <p>If the RAM Mount components included with the antenna do not meet your needs, many alternative RAM Mount Arms and Bases are available.</p>"},{"location":"underwater-gps/quickstart/#loose-receivers","title":"Loose receivers","text":"<p>Before deploying the receivers in the water, add a piece of tape to each receiver cable at the desired depth, to make configuration easier. Place the receivers in the water at the desired location, and connect one to each of the four bulkheads 'Receiver 1', 'Receiver 2', 'Receiver 3', and 'Receiver 4' of the UGPS G2 topside box (see the above picture).</p> <p>Tip</p> <p>Add a weight just above each receiver to improve stability in the water.</p>"},{"location":"underwater-gps/quickstart/#select-locator-and-channel-in-the-gui","title":"Select locator and channel in the GUI","text":"<p>Select the correct locator type in the GUI settings, and choose which channel to listen on. Channel 2 is the default. If using a Locator-U1, ensure that its channel (set by completely unscrewing the lid and turning the dial inside) is set to the same channel as you configure in the GUI.</p> <p>Note</p> <p>If you are using the Locator-A1, depth information needs to be provided to the topside unit by means of the UGPS API. You can ignore this if following the BlueROV2 integration guide.</p>"},{"location":"underwater-gps/quickstart/#configure-antennareceiver-placement-and-search-range","title":"Configure antenna/receiver placement and search range","text":"<p>Provide the correct placement of the antenna/receivers relative to the topside box in the GUI settings, and, if using an antenna, specify if it has been rotated from the default indicated in the GUI.</p> <p>Specifically, for the antenna, enter the position and optionally the rotational angle manually under Advanced settings.</p> <p></p> <p>If using loose receivers, either drag and drop each receiver to its position, or enter the positions manually.</p> <p></p> <p>Limit the search area by changing its radius, direction or sector size in the GUI</p> <p></p> <p>Tip</p> <p>Reducing the search area can improve the performance of the system, and we recommend to do this as far as possible, even if operating in a small area such as a tank or pool.</p>"},{"location":"underwater-gps/quickstart/#set-heading","title":"Set heading","text":"<p>In the top bar of the GUI you will see a warning about missing heading. Click the link, click to zero the gyros, then set compass heading to a reference heading (e.g. from an analogue compass, compass app, or boat compass).</p> <p>Note</p> <p>The topside does not have an integrated compass. An IMU will keep track of the heading based on the initially stated heading in the configuration. In a static environment setting the heading once will be enough, but in a more dynamic environment the IMU will drift over time and the heading will need a regular update. If operating in more demanding environments it is recommended to use an external compass to keep the heading updated. </p> <p>Info</p> <p>Setting the heading replaces IMU calibration as of release 3.3.0.</p> <p>You are now ready to explore the underwater world while knowing where you are!</p>"},{"location":"underwater-gps/receiver-d1/","title":"Receiver-D1","text":"<p>Buy Receiver-D1 here!</p>"},{"location":"underwater-gps/receiver-d1/#description","title":"Description","text":"<p>The Receiver-D1 is a digital low-noise, high sensitivity hydro acoustic receiver that converts acoustic waves to a digital data stream. The receiver is equipped with a wideband analog front-end width a large dynamic range followed by advanced digital signal processing functionality. The electrical interface complies with the Water Linked D1 communication standard.</p>"},{"location":"underwater-gps/receiver-d1/#benefits","title":"Benefits","text":"<ul> <li> <p>Extremely small footprint enabling easy integration in other equipment.</p> </li> <li> <p>Highly robust operation in areas with reflections (shallow water, around installations etc.)</p> </li> </ul>"},{"location":"underwater-gps/receiver-d1/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the Receiver interface connectors.</p> <p></p> <p></p>"},{"location":"underwater-gps/receiver-d1/#dimensions","title":"Dimensions","text":""},{"location":"underwater-gps/receiver-d1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"underwater-gps/reference-frames/","title":"Reference frames","text":"<p>UGPS G2 outputs positions in two reference frames: a global frame and an acoustic frame. The position in the global frame is obtained by combining the position in the acoustic frame with global GPS data and orientation data from the topside unit's built-in GPS antenna and IMU.</p> <p> Global frame North (\u00b0 latitude) East (\u00b0 longitude) Acoustic frame y x (Forward) </p>"},{"location":"underwater-gps/reference-frames/#global-frame","title":"Global frame","text":"<p>The positions of the global frame are in terms of latitude and longitude, as defined by the WGS 84 standard, and depth (relative to the sea surface). The Map position tab in the Position panel of the GUI plots the global frame position.</p>"},{"location":"underwater-gps/reference-frames/#acoustic-frame","title":"Acoustic frame","text":"<p>The x-axis of the acoustic frame is defined by the 'Forward' direction of the topside housing (indicated by a label on the lid, as shown in the figure below). The y-axes and z-axes are defined to be 'east' and 'down' respectively in relation to this x-axis. The Relative position tab in the Position panel of the GUI plots the acoustic frame position.</p> <p>The z-coordinate of the acoustic frame is always depth relative to the sea surface (not, say, relative to the antenna base, if using an antenna).</p> <p></p> <p></p> <p>The default origin is a point on the topside housing, but can be taken to be anywhere: it is entirely defined by the positioning of the antenna/receivers with respect to it. If using an antenna, it may help intuitively to take the origin to be the base of the antenna, which can be achieved by setting both Distance to topside housing fields to 0 under Baseline -&gt; Antenna configuration -&gt; Advanced settings.</p> <p>Note</p> <p>The axes of the acoustic frame in the first version of UGPS, the Explorer Kit, were slightly different: it was the y-axis which was aligned with the forward direction of the topside housing, and the x-axis which was to the 'east' of this.</p>"},{"location":"underwater-gps/sw-update/","title":"Software updates","text":"<p>It is recommended to always run the latest UGPS G2 software where possible. The latest software can be obtained automatically or manually.</p>"},{"location":"underwater-gps/sw-update/#automatic-software-update","title":"Automatic software update","text":"<p>The G2's GUI automatically checks and indicates if a new software version is available.</p> <ul> <li>Connect the G2 topside unit over ethernet or wifi to a network connected to the internet. If on a personal computer, it may be necessary to make a network bridge between a network interface which has access to the internet and the interface through which the G2 topside is connected.</li> <li>Go to http://[IP_ADDRESS_OF_THE_G2_TOPSIDE]:9000 in a web browser.</li> <li>The GUI will automatically check if there is a new version available, and if so, initiate installation of it with a single click.</li> </ul>"},{"location":"underwater-gps/sw-update/#offline-software-update","title":"Offline software update","text":"<p>If it is not possible to connect the G2 topside to the internet, one can proceed as follows.</p> <ul> <li>Find the current version and chip ID of the G2 topside unit at Menu -&gt; About in the GUI.</li> <li>Manually download an update package (<code>.wlup</code>) from the update server using the chip ID.</li> <li>Verify if the downloaded version is newer than the currently running version.</li> <li>Navigate to http://[IP_ADDRESS_OF_THE_G2_TOPSIDE]:9000 in a web browser.</li> <li>Select 'Manual upload' and then upload the downloaded <code>.wlup</code> file.</li> </ul>"},{"location":"underwater-gps/ugps-faq/","title":"Underwater GPS FAQ","text":"<p>Below are some frequently asked questions about the Underwater GPS. Click on a question in the table of content to the right or simply scroll down to read the FAQ's. </p>"},{"location":"underwater-gps/ugps-faq/#1-the-heading-is-drifting-rapidly","title":"1. The heading is drifting rapidly","text":"<p>In dynamic environments, such as in a boat at sea with rapid change of angles, the heading has to be set frequently in Settings. In harsh wether this has to be done up to every minute. In such conditions it is advised to use an external compass to get accurate positioning data from the UGPS. If the UGPS is permanently installed on one boat, the boats compass can be used. Otherwise an external portable compass can be implemented.</p>"},{"location":"underwater-gps/ugps-faq/#2-can-i-set-the-speed-of-sound","title":"2. Can I set the speed of sound?","text":"<p>Yes, If you have the R300 version you can set the speed of sound in the \"settings\" menu in the GUI.</p> <p>Note</p> <p>If you have the R100 version you can't change the speed of sound. The option to change the speed of sound is still present, but you will get an error message saying \"Bad request\"</p>"},{"location":"underwater-gps/ugps-faq/#3-my-ugps-system-is-not-performing-well","title":"3. My UGPS system is not performing well","text":"<p>If your UGPS system does not perform as expected, you should contact Waterlinkes technical support team through the support portal in Waterlinked's home pages on the internet.</p> <p>To help the support team analyzing your systems behaviour, you should record a diagnostic logfile. This can easily be done by opening the Diagnostics window in the UGPS GUI. At the bottom of the page there is an option that allows you to record a diagnostic report. The file should preferably be recorded in the moment or circumstance as your system is failing. Attach the diagnostic report file you recorded to your request. The file contains valuable information that will help the support team analyse your system. </p> <p>Note</p> <p>The logfile must be downloaded to your computer and sent to customer support as an attachment.</p>"},{"location":"underwater-gps/ugps-sys-setup/","title":"How to install your system","text":""},{"location":"underwater-gps/ugps-sys-setup/#topside","title":"Topside","text":"<p>The topside should be placed outdoors with an open view to the sky, to easily achieve GPS lock. The forward direction of the topside box should be in the direction you define as forward. If you are using an antenna, make sure the forward direction of the antenna aligns with the forward direction of the topside. If on a boat, typically forward aligns with the boats heading.</p>"},{"location":"underwater-gps/ugps-sys-setup/#antenna","title":"Antenna","text":"<p>The antenna can be placed anywhere up to 10m from the topside housing (limited by cable length). Make sure its forward direction aligns with the forward direction of the topside box. If this is not possible, make sure you enter the deviation in the Baseline settings in the GUI. See System Configuration</p> <p>Tip</p> <p>By the antenna base is meant the joining point of the three prongs with the receivers at their ends.</p> Alignment Ensure that the 'Forward' direction of the antenna as defined by a label on one of its prongs (see also the figure below) is aligned with the 'Forward' direction of the topside housing (indicated by a label on the lid). If it is not possible to physically align them, in Baseline -&gt; Antenna configuration -&gt; Advanced settings, specify the clockwise angle in degrees from the forward axis of the topside to the forward axis of the antenna. If this alignment is not carried out, the global position outputted by UGPS G2 will be incorrect. Line-of-sight Ensure that there will be line-of-sight between the antenna and locator. Antenna depth Ensure that the base of the antenna is at a depth of at least one metre (as indicated by a label upon the top folding joint of the pole of the antenna), to avoid acoustic disturbance. The depth of the antenna base (relative to the sea surface) must be specified in Baseline -&gt; Antenna configuration -&gt; Advanced settings -&gt; Antenna depth. If it is not, both the acoustic and global positions may be incorrect. Antenna stability Secure the antenna tightly to the vessel using the provided Ram Mount. <p>Note</p> <p>Directivity : the antenna and locators are omnidirectional, that is, signal strength should be good in all directions</p>"},{"location":"underwater-gps/ugps-sys-setup/#receivers","title":"Receivers","text":"<p>Loose receivers can be placed anywhere up to 100m from the topside housing. Go through the following, and configure the placement of the receivers in the graphical pane at Baseline -&gt; Receiver and range configuration so that their positions relative to the origin and their depths are correct. See System Configuration</p> Line-of-sight Ensure that all the receivers will have line-of-sight to the locator. Separation Ensure that the receivers are not too close, and are not all in a line. A grid of 2x2 metres should typically be sufficient for good performance, but experiment with different configurations if you experience sub-optimal performance. Depth Place the receivers at a depth of at least a metre, to avoid acoustic disturbance. Stability Consider adding some weight to the receiver cables just above the receivers. <p>Note</p> <p>Directivity : The receivers and locators are omnidirectional, that is, signal strength should be good in all directions</p> <p>The figure below indicates a typical loose receiver configuration when the topside unit is upon a boat. The receivers hang from the side of the boat. The origin of the the acoustic frame is in this case a point on the topside unit.</p>"},{"location":"underwater-gps/ugps-sys-setup/#locator-setup","title":"Locator setup","text":"<p>Select the type of locator (U1, A1, or D1) which you are using, and which channel you wish to use.</p> <p>No matter what locator that is in use, it always need to be placed within line of sight from the receivers. This will in most cases be somewere on top of the unit that is to be tracked.</p>"},{"location":"underwater-gps/ugps-sys-setup/#locator-u1","title":"Locator U1","text":"<p>As the U1 is a wireless locator it can easily be mounted on your vehicle with the included bracket. </p> <ul> <li>Remember to charge the locator for at least 7 hours before use with a 5V/2A charger.</li> <li>Use the rotary switch at the back of the U1 (screw the lid completely off to access the switch) to adjust which channel you will be using. Channel 3 is a good option. Remember to adjust the channel in the GUI's Settings</li> </ul>"},{"location":"underwater-gps/ugps-sys-setup/#locator-a1","title":"Locator A1","text":"<p>The A1 needs to be physically connected to the G2 Topside, either directly or through a full system integration. For wiring details of the A1, se [locator-A1]A1.</p> <p>If you are using the A1 on a Bluerov, see Bluerov integration</p> <p>Note</p> <p>If using the A1 locator, the depth of the locator must be inputted by means of the UGPS API.</p>"},{"location":"underwater-gps/ugps-sys-setup/#locator-d1","title":"Locator D1","text":"<p>The D1 comes with 50m integrated cable that is coupled directly into the topside box. </p> <p>For more information on the D1, go to Locator D1</p>"},{"location":"underwater-gps/ugps-sysconfig/","title":"Adjusting your UGPS systems configuration and settings","text":"<p>The setup in the GUI needs to mirror your actual setup in the real world for your positioning information to be correct. In the GUI there are two systems that needs to be adjusted; the Baseline and the Settings.</p> <p>In the Baseline window in the GUI, you adjust the placement of your antenna/receivers in relation to the topside box. In the Settings window you choose which locator you are using and the placement of the topside in the environment.</p>"},{"location":"underwater-gps/ugps-sysconfig/#baseline-settings","title":"Baseline settings","text":"<p>Go to Baseline from the left menu in the GUI.  In the tab at the top select antenna or receivers according to whether an antenna or loose receivers are used.</p> <p>In the receiver view, in the graphical configuration panel, you either drag and drop the receivers to their actual position in relation to the topside, or you fill in the position manually in the input fields below the panel. (You might need to drag the receivers apart for the manual input fields to become visible) Remember to fill inn the receivers depth.</p> <p>In the antenna view you need to open Advanced Settings to fill in the position of the antenna in relation to the topside.</p> <p>Improved positioning will likely be obtained by limiting the search area : Restrict the search area as far as possible by dragging and dropping the arrows in the graphical configuration panel.</p> <p></p>"},{"location":"underwater-gps/ugps-sysconfig/#locator-and-topside-settings","title":"Locator and topside settings","text":"<p>Cofigurations of the topside and locator settings is conducted in Settings, from the left menu in the GUI.</p>"},{"location":"underwater-gps/ugps-sysconfig/#locator-settings","title":"Locator settings","text":"<p>Select the type of locator (U1, A1, or D1) which you are using, and which channel you wish to use.</p> <p>Note</p> <p>If using the U1 locator, the channel must match the rotary switch at the back of the U1 (screw the lid completely off to access the switch).</p> <p>Note</p> <p>If using the A1 locator, the depth of the locator must be inputted by means of the UGPS API.</p>"},{"location":"underwater-gps/ugps-sysconfig/#channel-overview","title":"Channel overview","text":"<p>The frequency bands of the available channels are as follows. Lower frequency typically corresponds to greater range due to less acoustic absorption, though there are other factors involved: if you experience issues with signal quality (low RSSI or high NSD), try a different channel. Often channel 3 is recommended.</p> From (kHz) To (kHz) Channel 31.25 62.5 1 62.5 93.75 2 93.75 125.0 3 125.0 156.25 4 156.25 187.5 5 187.5 218.75 6 218.75 250.0 7"},{"location":"underwater-gps/ugps-sysconfig/#topside-settings","title":"Topside settings","text":"<p>The default source for the topside position and heading is On-board. This configuration should be chosen if the topside is located in any dynamic environment, like on a boat or similar. </p> <p>If the topside unit/antenna is at a globally stationary position (like a jetty) the static configuration of position and heading will give best accuracy of the system. Below you can see how the position and heading is set to static. Clicking on the map button opens a map window to help you input the static position.</p> <p></p>"},{"location":"underwater-gps/ugps-sysconfig/#imu-calibration","title":"IMU calibration","text":"<p>The link \"Onboard IMU calibration\" takes you to a window where you can reset the gyros and set the heading manually.   It is advisable to reset the gyros before every use. Place the topside on a static horisontal area and press \"Reset gyros.</p> <p>The topsides heading has to be set manually. Use a decent compass and enter the heading in the heading filed, and press \"set current heading\". </p> <p>Note</p> <p>When you are using On-board positioning the heading has to be set periodically, as the IMU will drift over time. </p> <p>For best performance on boats or similar, with a moving topside unit, we recommend to use an exteranl input of heading data (e.g. from a GPS compass) as well as global position data. An external device will likely be more accurate than the topside unit's built-in GPS receiver and IMU. For a thorough description on how to do this, see External Compass</p>"},{"location":"underwater-gps/ugps-sysconfig/#user-preferences","title":"User preferences","text":"<p>Select whether to use metric or imperial units, and/or if you would like a dummy boat to be displayed on the map and receiver configuration pages.</p>"},{"location":"underwater-gps/ugps-sysconfig/#advanced-settings","title":"Advanced settings","text":"<p>Advanced settings allows you to configure ethernet and wifi.</p>"},{"location":"underwater-gps/ugps-topside/","title":"UGPS Topside","text":""},{"location":"underwater-gps/ugps-topside/#connectors","title":"Connectors","text":""},{"location":"underwater-gps/ugps-topside/#external","title":"External","text":"<p>* Locator-D1 is not compatible with the BlueROV2 Integration Kit.</p>"},{"location":"underwater-gps/ugps-topside/#internal","title":"Internal","text":""},{"location":"underwater-gps/ugps-topside/#led-indicators","title":"LED Indicators","text":"LED name Description Power Solid green: Topside has power Ready Solid Green: Topside has booted successfully GPS Blinking green: Searching for GPS lock, solid green: Topside has GPS lock LED 1 Solid green: Firmware successfully loaded LED 2 Not in use Locator Solid green: Locator D1 is connected Receiver 1 Solid green: Receiver 1 connected Receiver 2 Solid green: Receiver 2 connected Receiver 3 Solid green: Receiver 3 connected Receiver 4 Solid green: Receiver 4 connected <p>Note</p> <p>There is No indication when the Antenna is connected.</p> <p>Note</p> <p>NC: Not Connected.</p> <p>DNC: Do Not Connect, pins used for production.</p> <p>GND: Boldface indicate power lines (12 V, 3.3 V, VIN, GND).</p>"},{"location":"underwater-gps/ugps-topside/#40-pin-molex-interface","title":"40 pin Molex Interface","text":"Signal Pin Pin Signal Function GPIO 2* 1 2 GPIO 3 D1 TX+ 3 4 D1 TX- Locator-D1 D1 RX+ 5 6 D1 RX- | GND 7 8 12 V Power out R1 TX+ 9 10 R1 TX- Receiver-D1 R1 RX+ 11 12 R1 RX- | GND 13 14 12 V Power out R2 TX+ 15 16 R2 TX- Receiver-D1 R2 RX+ 17 18 R2 RX- | GND 19 20 12 V Power out R3 TX+ 21 22 R3 TX- Receiver-D1 R3 RX+ 23 24 R3 RX- | GND 25 26 12 V Power out R4 TX+ 27 28 R4 TX- Receiver-D1 R4 RX+ 29 30 R4 RX- | ANT RX 1+ 31 32 ANT RX 1- Antenna ANT RX 2+ 33 34 ANT RX 2- | ANT RX 3+ 35 36 ANT RX 3- | ANT RX 4+ 37 38 ANT RX 4- | A1 TX+ 39 40 A1 TX- Locator-A1 <p>* Used to control relays for switching between Receivers and Antenna.</p>"},{"location":"underwater-gps/ugps-topside/#6-pin-nmea-0183-gps-pps-not-currently-implemented","title":"6 pin NMEA 0183 GPS + PPS (not currently implemented)","text":"Signal Pin Pin Signal GND 1 2 12 V NMEA GPS TX 3 4 NMEA GPS RX NMEA GPS PPS 5 6 GND"},{"location":"underwater-gps/ugps-topside/#6-pin-nmea-0183-compass-not-currently-implemented","title":"6 pin NMEA 0183 Compass (not currently implemented)","text":"Signal Pin Pin Signal GND 1 2 12 V NMEAS COMPASS TX 3 4 NMEA COMPASS RX NC 5 6 GND"},{"location":"underwater-gps/ugps-topside/#6-pin-nmea-0183-out-not-currently-implemented","title":"6 pin NMEA 0183 Out (not currently implemented)","text":"Signal Pin Pin Signal GND 1 2 12 V NMEA OUT 3 4 NC NC 5 6 GND"},{"location":"underwater-gps/ugps-topside/#16-pin-ttl-gpio","title":"16 pin TTL GPIO","text":"Signal Pin Pin Signal GND 1 2 12 V DNC 3 4 DNC DNC 5 6 DNC DNC 7 8 DNC GND 9 10 PPS OUT GND 11 12 PPS IN GPIO 0 13 14 GPIO 1 GND 15 16 3.3 V <p>Note</p> <p>TTL voltage: 3.3 V (5.0 V tolerant).</p>"},{"location":"underwater-gps/ugps-topside/#2-pin-microfit-30-power","title":"2 pin MicroFit 3.0 Power","text":"Signal Pin Pin Signal GND 1 2 VIN* <p>* 10 - 30 VDC, 0.7 A (12 V nominal).</p> <p>Fits Molex Micro-Fit 3.0 43645 series.</p>"},{"location":"underwater-gps/ugps-topside/#receiver-d1-setup","title":"Receiver-D1 setup","text":"<ul> <li> <p>Connect the four Receiver-D1 cables to bulkheads marked \"Receiver 1\" to \"Receiver 4\" on the housing.</p> </li> <li> <p>If using the Locator-D1, connect this to the bulkhead marked \"Locator\" on the housing.</p> </li> <li> <p>If using the Locator-A1, connect this to the bulkhead marked \"Locator\" on the housing.</p> </li> <li> <p>If using the Locator-U1, no connections to the housing is needed. Just power the Locator and make sure both status leds on U1 and Master-D1 are solid green.</p> </li> </ul> <p></p>"},{"location":"underwater-gps/ugps-topside/#imu","title":"IMU","text":"<p>The master electronics has an built in IMU used to provide the orientation of the master electronics. This is used in combination with the acoustic position and GPS to generate the global position of the Locator.</p>"},{"location":"underwater-gps/ugps-topside/#imu-calibration","title":"IMU Calibration","text":"<p>For the IMU to work properly it needs to be calibrated. If the system is started on a new location a new calibration is needed for the IMU to work as intended. The IMU is calibrated in the settings page of the user interface.</p>"},{"location":"underwater-gps/integration/api/","title":"API","text":"<p>The Underwater GPS G2 system comes with an easy-to-use software HTTP API. Through the API you can, amongst other things:</p> <ul> <li> <p>Read acoustic and global position data</p> </li> <li> <p>Read GPS and IMU raw data</p> </li> <li> <p>Read and set POIs</p> </li> <li> <p>Set configuration parameters</p> </li> </ul> <p>See demo.waterlinked.com/swagger for the details of the API.</p>"},{"location":"underwater-gps/integration/api/#interaction","title":"Interaction","text":"<p>Any programming language can be used to interact with the API. We have examples in both Python and Go, which currently cover, for instance:</p> <ul> <li>Sending of locator depth when using the Locator A1 (see the script <code>externaldepth.py</code>).</li> <li>Sending in of satellite GPS data (positioning and/or heading) from an external GPS receiver (see the script <code>nmeainput.py</code> or its Go analogue)</li> <li>Export of tracks to a GPX file (see the script <code>tracklog.py</code>)</li> <li>Output of the positions calculated by the UGPS G2 system in NMEA format (see the Python script <code>nmeaoutput.py</code> or its Go analogue)</li> </ul>"},{"location":"underwater-gps/integration/bluerov-integration-a1/","title":"Installation of Locator-A1 on BlueROV2 with integration kit","text":"<p>This guide describes the hardware modifications to the ROV, FXTI and UGPS Topside in order to integrate the Locator-A1. To summarize, two main changes are performed: A spare twisted wire pair in the tether is used to connect the Locator-A1 and the UGPS Topside. Secondly, the UGPS Topside is connected directly to the communication between ROV and topside computer.</p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#required-parts-and-tools","title":"Required parts and tools","text":"<ul> <li>BlueROV2 Integration Kit from Water Linked.</li> </ul> <p>It contains the following parts (purpose in parentheses)</p> <ol> <li>Mechanical parts (for physical mounting of Locator-A1)<ul> <li>Locator-A1 mounting bracket, printable 3D model</li> <li>rubber pad</li> <li>2 M4x35 Socket head cap screws</li> <li>2 M4 Lock Nuts</li> </ul> </li> <li>A female-to-female jumper wire, white/Blue (for locator connection in FXTI)</li> <li>A Binder-connector-pigtail-assembly, with Binder 770 Series NNC Miniature Cable Connector, pins 1/2: white/blue, pin 7/8: white/brown (analog connection and Powerline connection in FXTI)</li> <li>Powerline communication (PLC) module LX200V30 (for Powerline communication in UGPS Topside)</li> <li>30cm Cat5e cable (for Powerline connection in UGPS Topside)</li> <li>8 m cable with Binder 770 connectors \"deck extension cable\"(for analog connection and Powerline communication between FXTI and UGPS Topside))</li> </ol> <p>Powerline communication (PLC)</p> <p>The term Powerline communication describes the technology with which the FXTI and the BlueROV communicate with each other over the Fanthom-X Tether. It is usually used to transmit data and communication signals, e. g. Ethernet, on existing electrical wiring in buildings, allowing for data transfer and communication without the need for dedicated network cables.</p> <ul> <li>Locator-A1</li> </ul> <p></p> <ul> <li>UGPS G2 Topside</li> </ul> <p></p> <ul> <li>Your BlueROV2</li> </ul> <p></p> <ul> <li>M10-6.5mm-LC WetLink Penetrator from Blue Robotics</li> </ul> <p></p> <ul> <li>WetLink Bulkhead Wrench M10 from Blue Robotics</li> </ul> <p></p> <ul> <li>Hex Key Set e.g. from Blue Robotics, especially 2, 2.5 and 3 mm hex key</li> </ul> <p></p> <ul> <li>Silicone Grease</li> <li>Isopropyl Alcohol Wipe</li> <li>7 mm spanner or wrench</li> <li>4 mm drill bit</li> <li>Cable jacket stripper, a utility knife, or a sharp blade</li> <li>Cutting pliers</li> <li>A soldering iron and solder</li> <li>Heat shrink tube</li> </ul> <p>Optional components/tools</p> <ul> <li>WetLink Penetrator Assembly Block and a vice to secure it</li> <li>WetLink Penetrator Plug Wrench 14mm and a A 1/4 inch (6.3mm) square drive ratchet or torque wrench</li> <li>Large flat head screwdriver</li> <li>Bottle of threadlocker</li> <li>Hot air gun</li> </ul>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modifications-to-the-bluerov2","title":"Modifications to the BlueROV2","text":"<p>The Locator-A1 will use one of the spare cable penetrators in the back of the BlueROV2 and will connect to the spare green and white twisted pair in the tether. The locator is attached with a mounting bracket included in the BlueROV2 Integration Kit.</p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#open-the-electronics-enclosure","title":"Open the electronics enclosure","text":"<p>To open the electronics enclosure, you will need the following parts and tools:</p> <ul> <li>2.5 mm hex key</li> <li>Large flat head screwdriver (optional)</li> </ul> <p>To ensure your ROV is completely powered off, please remove the battery completely from the 3\u201d enclosure and place to the side.</p> <p></p> <p>Unscrew the M3x16 screws that mount the electronics enclosure to the ROV cradle (in the front and in the back). The number of screws depends on the model version of your ROV.</p> <p></p> <p>Remove the Vent Plug from the Vent Penetrator Bolt on the electronics enclosure. Remove the 4\u2033 tube and forward dome assembly from the rear end cap by sliding it forward. A large flat head screw driver can help to do that.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#replace-blank-penetrator-with-locator-a1-penetrator","title":"Replace blank penetrator with Locator-A1 penetrator","text":"<p>To remove a blank penetrator and install the cable of the Locator-A1 into the end cap, you will need the following parts and tools:</p> <ul> <li>Locator-A1</li> <li>M10-6.5mm-LC WetLink Penetrator from Blue Robotics</li> <li>Silicone Grease</li> <li>Isopropyl Alcohol Wipe</li> <li>WetLink Bulkhead Wrench M10 from Blue Robotics</li> <li>WetLink Penetrator Assembly Block and a vice to secure it (optional)</li> <li>WetLink Penetrator Plug Wrench 14mm and a A 1/4 inch (6.3mm) square drive ratchet or torque wrench (optional)</li> <li>Cable jacket stripper, a utility knife, or a sharp blade</li> <li>Cutting pliers</li> </ul> <p>Remove the blank penetrator as pictured from the 4\u201d End Cap with the penetrator bulkhead wrench.</p> <p></p> <p>Cut the cable of the Locator-A1 to the correct length with cutting pliers considering that about 15 cm of cable are needed inside the enclosure. For the recommended mounting position you need a length of around 70 cm. Double check that this is sufficient for your mounting position.</p> <p>Remove 10 cm of the cable jacket using a cable jacket stripper, a utility knife, or a sharp blade. Cut off everything except the twisted pair of wires using cutting pliers.</p> <p>Follow the Blue Robotics WetLink Penetrator Assembly Guide and install the WetLink penetrator onto the Locator-A1 cable.</p> <p>Wipe the exterior surface of the electronics enclosure end cap clean with an isopropyl alcohol wipe, and make sure it is free of any particles in the areas where the penetrator O-ring will sit.</p> <p>Remove the O-ring from the bag and apply silicone grease to it.</p> <p></p> <p>Install the O-ring onto the WetLink penetrator.</p> <p>Install the WetLink penetrator with the Locator-A1 cable onto the end cap in the hole you previously removed a blank penetrator from. Tighten to finger tight, then use the bulkhead wrench to tighten it an additional ~1/16 of a turn. If you can\u2019t loosen it with your fingers, it is tight enough.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#connect-locator-a1-wires-to-rov-tether","title":"Connect Locator-A1 wires to ROV tether","text":"<p>One pair of twisted wires from the Locator-A1 (blue/white) must be connected to a spare twisted pair on the BlueROV2 tether. To solder the wires together you will need:</p> <ul> <li>A soldering iron and solder</li> <li>A utility knife, or a sharp blade</li> <li>Heat shrink tube</li> <li>Hot air gun (optional)</li> </ul> <p>Note</p> <p>Alternatively to soldering you can use your favorite headers to establish an electrical connection.</p> <p>Remove 5mm wire insulation on both the tether wires and the locator wires with a knife.</p> <p>Put heat shrink tube onto the wires before soldering.</p> <p>Connect the Locator-A1 wires (blue/white) to a spare twisted pair of the tether (recommended: green/white) by soldering.</p> <p>Pull the the heat shrink tube over the solder-connection and shrink it with a hot air gun or alternatively with your soldering iron turned to low.</p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#reassemble-bluerov2-electronics-enclosure","title":"Reassemble BlueROV2 Electronics Enclosure","text":"<p>To reassemble your BlueROV2 Electronics Enclosure, you will need the following parts and tools:</p> <ul> <li>M3x16 screws that were placed off to the side during disassembly (number depends on your BlueROV version)</li> <li>Silicone Grease</li> <li>2.5 mm hex key</li> </ul> <p>Reinstall 4\u201d Watertight Enclosure onto ROV with the following steps:</p> <p>Apply silicone grease to the two radial O-rings on the O-Ring Flange (4\u201d Series) that is attached to the Electronics Tray. Then slide the Watertight Enclosure (4\u201d Series) with installed Dome End Cap over the electronics tray and the O-Ring Flange (4\u201d Series) while trying to align the clips for the screws in the front and back.</p> <p>Mount the Electronics Enclosure to the frame using the M3x16 screws so that the dome is on the same side as the front center panels (the center panels without the 3 large holes). Install the M3x16 screws through the clips and into the Enclosure Cradle (4\u201d Series). It is easier to install these screws if the clips are not fully tightened until all screws are through the clips and threading into the Enclosure Cradle (4\u201d Series). This allows clips to rotate so you can find the threaded hole in the Enclosure Cradle (4\u201d Series) easily.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#mount-the-locator-a1-to-the-bluerov2-frame","title":"Mount the Locator-A1 to the BlueROV2 frame","text":"<p>To mount the Locator-A1 to the BlueROV2 frame, you will need the following parts and tools:</p> <ul> <li>Locator-A1 mounting bracket (included in the BlueROV2 Integration Kit)</li> <li>rubber pad (included in the BlueROV2 Integration Kit)</li> <li>2 M4x35 Socket head cap screws (included in the BlueROV2 Integration Kit)</li> <li>2 M4 Lock Nuts (included in the BlueROV2 Integration Kit)</li> <li>3 mm hex key</li> <li>7 mm spanner or wrench</li> <li>4 mm drill bit</li> </ul> <p>Route the locator cable to one side of the ROV.</p> <p>The below picture illustrates the recommended mounting position. Your mounting bracket might look differently.</p> <p></p> <p>Find an appropriate spot to attach the Locator-A1 mounting bracket to the frame of the BlueROV2. Drill out two holes spaced 49.25 mm apart using a 4 mm drill bit.</p> <p></p> <p>Wrap the locator in the rubber pad before inserting into the mounting bracket.</p> <p>Attach the Locator-A1 to the Locator-A1 mounting bracket, and secure the bracket to the BlueROV2 using the M4x35 Socket head cap screws and lock nuts.</p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modifications-to-the-ugps-topside","title":"Modifications to the UGPS Topside","text":"<p>In the following steps you will upgrade your UGPS G2 Topside with Powerline communication (PLC) capabilities to communicate directly with the BlueROV2. In order to do that, you will need the following parts and tools:</p> <ul> <li>UGPS G2 Topside</li> <li>Ethernet cable (included in the BlueROV2 Integration Kit)</li> <li>Powerline communication (PLC) module LX200V30 (included in the BlueROV2 Integration Kit)</li> <li>Soldering iron</li> </ul>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#connect-ethernet-cable","title":"Connect Ethernet cable","text":"<p>Locate the ethernet ports on the Interface Electronics board and the Master Electronics board.</p> <p></p> <p>Connect the included Ethernet cable to the two ports.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#install-the-plc-module","title":"Install the PLC module","text":"<p>In this step the the Powerline communication (PLC) module is installed on the Interface Electronics board.</p> What do the LEDs on the PLC module mean? <p></p> LED Definition Function 1 Power Lights when the PLC module has power 2 Ethernet Flashes when there is data flow from Master Electronics 3 PLC Lights when a link is established with FXTI or BlueROV2 <p>Locate the socket for the PLC module on the Interface board.</p> <p></p> <p>Press the PLC module into the socket, making sure that the press-fit standoffs latch into the holes in the Interface Electronics board.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modify-interface-electronics","title":"Modify Interface Electronics","text":"<p>Note</p> <p>This step is only necessary for Underwater GPS G2 bought before June 2021. For units produced after June 2021, this step is not necessary.</p> <p>Warning</p> <p>Skipping this step leaves a regulated 12V power source from the Underwater GPS on the PLC lines (pins 1 (GND) and 2 (12V) on the Locator bulkhead connector). Connecting non-isolated equipment to the PLC lines may damage the Underwater GPS or any external equipment.</p> <p>Note</p> <p>Locator-D1 cannot be used unless the resistors are soldered back on to the Interface Electronics.</p> <p>The Interface Electronics board in the Underwater GPS housing comes with resistors R2 and R3 which put GND on pin 1 and 12V on pin 2 of the bulkhead connector with the label \u201cLocator\u201d. The configuration of the FXTI, BlueROV2 and the Underwater GPS G2 are affected by leaving these resistors on the board, so they must be removed for normal operation.</p> <p>Remove the resistors with a soldering iron.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modifications-to-the-fxti","title":"Modifications to the FXTI","text":"<p>In this step the FXTI will be modified to firstly connect the analog signal of the Locator-A1 between the ROV tether and the UGPS Topside. Secondly the UGPS Topside is connected to the existing communication wires between the BlueROV and the FXTI electronics (Powerline Ethernet signals). A high level diagram of how this will look is shown below.</p> <p></p> <p>In order to make these connections, you will need the following parts and tools:</p> <ul> <li>Binder-connector-pigtail-assembly (included in the BlueROV2 Integration Kit)</li> <li>A female-to-female jumper wire, white/green (included in the BlueROV2 Integration Kit)</li> <li>2 mm hex key</li> </ul> <p>Unscrew the connector panel from the FXTI with the hex key and remove one of the black plastic plugs from one of the auxiliary ports.</p> <p></p> <p>Thread the Binder-connector-pigtail-assembly into the open port and secure in place with the included bulkhead nut.</p> <p></p> <p>Connect the green and white twisted pair of the tether connector to the brown and brown/white pair on the new Binder-connector-pigtail-assembly with the included female-to-female jumper wire.</p> <p></p> <p>Connect the blue and white twisted pair of the Binder-connector-pigtail-assembly to the FXTI Tether Connection PCB, matching the orientation of the pre-installed blue and white wire connections.</p> <p></p> <p>Reassemble the FXTI box.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#establish-a-network-connection-between-ugps-topside-bluerov2-and-topside-computer","title":"Establish a network connection between UGPS Topside, BlueROV2 and topside computer","text":"<p>Now that all hardware modifications are done, you will connect UGPS Topside, FXTI/BlueROV2 and topside computer and test the network connection.</p> <ul> <li>Power up the BlueROV. Connect the BlueROV with the tether to the FXTI. Connect the FXTI with the USB-cable to the computer.</li> </ul> <p>FXTI USB port</p> <p>Your topside computer may have a USB port which permits higher than default (which is 500mA) current. Such ports are typically marked with a lightning or battery symbol. Also USB 3.0 ports (blue plastic) provide higher current. If available, we recommend use of one of these for plugging in the FXTI, as this can improve performance.</p> <ul> <li> <p>Set your topside computer to have a static IP address of 192.168.2.1 with subnet mask 255.255.255.0. The BlueROV2 typically has IP address 192.168.2.2, so you probably already have this set up. Make sure your firewall allows QGroundControl to communicate with the network. Look at the Network Setup steps at Blue Robotics if you need more details.</p> </li> <li> <p>Set the IP switch inside the UGPS Topside unit to <code>192.168.2.94</code> (the down position). This equips the G2 topside unit with the static IP address 192.168.2.94.</p> </li> <li> <p>Connect the Binder-connector named \"Locator\" at the UGPS Topside with the newly installed Binder-connector at the FXTI using the deck extension cable, which came with the BlueROV integration kit. (Power up the UGPS Topside)[https://waterlinked.github.io/underwater-gps/power-supply/]. It is on when the power button is lit.</p> </li> </ul> <p>You should now be able to access both the BlueROV by typing <code>192.168.2.2</code> in your browser address line and UGPS Topside by typing <code>192.168.2.94</code>. Both have to be turned on.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration-a1/#final-steps-of-integration","title":"Final steps of integration","text":"<p>When you have successfully established a network connection and can access both BlueROV2 and UGPS Topside, you can continue with Final steps of integration independent of Locator.</p>"},{"location":"underwater-gps/integration/bluerov-integration-u1/","title":"Installation of Locator-U1 on BlueROV2","text":"<p>This guide contains instructions for installation of the Locator-U1 to a BlueROV2. The first part describes the mechanical installation and the second part describes how to establish a network bridge between UGPS Topside and FXTI/BlueROV2.</p>"},{"location":"underwater-gps/integration/bluerov-integration-u1/#mount-the-locator-u1-to-the-bluerov2-frame","title":"Mount the Locator-U1 to the BlueROV2 frame","text":"<p>Attach the Locator-U1 to the BlueROV2 for example by using zip ties. Make sure the Locator-U1 has free line-of-sight towards the antenna/receivers near the surface.</p> <p></p> <p>See the general Locator-U instructions for daily operation (charging, powering on, etc.).</p>"},{"location":"underwater-gps/integration/bluerov-integration-u1/#establish-a-network-connection-between-ugps-topside-bluerov2-and-topside-computer","title":"Establish a network connection between UGPS Topside, BlueROV2 and topside computer","text":"<p>In this guide it is described how to establish a network connection between UGPS Topside, FXTI/BlueROV2 and topside computer without hardware modifications to the UGPS Topside. This is opposed to the method used with the BlueROV integration kit for Locator-A1. To put it short, the connection between the three devices is established with a network bridge and a static IP address of 192.168.2.1 (subnet mask 255.255.255.0) for your computer.</p> <ol> <li> <p>Set the IP switch inside the UGPS G2 topside unit to <code>192.168.2.94</code> (the down position). This equips the G2 topside unit with the static IP address 192.168.2.94.</p> </li> <li> <p>Connect power to the UGPS Topside and switch on the power, resulting in the power switch lighting up.</p> </li> <li> <p>Connect an Ethernet cable to the UGPS Topside.</p> </li> <li> <p>Connect the BlueROV with the tether to the FXTI and plug the USB-cable into the FXTI. Power up the BlueROV.</p> </li> <li> <p>Establish a network bridge on your computer. This depends on your operating system:</p> </li> </ol> Windows <p>To create a network bridge between the FXTI/BlueROV2 and the UGPS Topside in Microsoft Windows, open the \"Control Panel\" by searching for it in the start menu. Open \"Network and Internet\".</p> <p></p> <p>Open \"Network and Sharing Center\".</p> <p></p> <p>Click \"Change adapter settings\" in the sidebar.</p> <p></p> <p>The \"Network Connections\" window (see below) shows all network adapters connected to your computer. The number and name of adapters shown depends on your computer hardware.</p> <p></p> <p>Now identify the adapter for the FXTI by connecting its USB-cable to the computer. Unplug and replug the cable if you plugged it in before. A new adapter should show up, which is called \"Realtek USB...\" in the gray subtitle. Note its name. In the example there are two adapters in the picture below starting with \"Realtek USB\", one additional by a docking station. So you can identify the correct adapter best by comparing which one is new, it is \"Ethernet 4\".</p> <p>Do the same with the UGPS Topside, connect its ethernet cable to the computer. In the shown example the red cross for adapter \"Ethernet\" vanishes, indicating that a device is connected to the network adapter. So in the shown example \"Ethernet\" is the UGPS Topside and \"Ethernet 4\" is the FXTI.</p> <p></p> <p>Create a network bridge between the two adapters identified in the previous step by selecting both with the help of the \"Ctrl\"-key. Then right click on one of them and select \"Bridge Connections\".</p> <p></p> <p>A new adapter called \"Network Bridge\" should appear. Right-click on it and select \"Properties\".</p> <p></p> <p>In the window \"Network Bridge Properties\" scroll through the lower list and select \"Internet Protocol Version 4 (TCP/IPv4)\". Click on the button \"Properties\".</p> <p></p> <p>In the window \"Internet Protocol Version 4 (TCP/IPv4)\" select \"Use the following IP address\" and type in the IP address \"192.168.2.1\" and Subnet mask \"255.255.255.0\". Click OK to close the window and also close the previous window \"Network Bridge Properties\" with OK.</p> <p></p> <p>You should now be able to access both the BlueROV by typing 192.168.2.2 in your browser address line and UGPS Topside by typing 192.168.2.94. Both have to be turned on.</p> <p></p> <p>If you do not need the network bridge anymore, you can delete it by navigating to \"Change Adapter Settings\" as described above, right-clicking on the Network Bridge and then clicking \"Disable\".</p> Linux <p>On Linux the instructions at the Arch Linux wiki, in the section 'With iproute2', should work.</p> <p>Note</p> <p>Unfortunately these instructions do not work for Ubuntu.</p> MacOS <p>On a Mac, the instructions at the Arch Linux wiki should work if the package <code>iproute2mac</code> is installed, providing an analogue of the <code>ip</code> package. Alternatively, essentially the same procedure can be followed using <code>ifconfig</code>, which should be available on a Mac, instead of <code>ip</code>.</p>"},{"location":"underwater-gps/integration/bluerov-integration-u1/#final-steps-of-integration","title":"Final steps of integration","text":"<p>When you have successfully established a network bridge and can access both BlueROV2 and UGPS Topside, you can continue with Final steps of integration independent of Locator.</p>"},{"location":"underwater-gps/integration/bluerov-integration/","title":"Overview BlueROV2 integration","text":"<p>The Water Linked Underwater GPS G2 (from now UGPS) system can be integrated with a BlueROV2 from Blue Robotics in different ways, depending upon the choice of locator.</p>"},{"location":"underwater-gps/integration/bluerov-integration/#most-common-integration-methods","title":"Most common integration methods","text":"<ul> <li> <p>We recommend you to use the Locator-A1 together with the BlueROV2 Integration Kit when integrating the UGPS system with the BlueROV2. The integration steps are described in BlueROV2 Integration Locator-A1. Hardware modification must be carried out on the ROV, FXTI and UGPS Topside which serve two purposes: Firstly, a spare twisted wire pair in the tether is used to connect the Locator-A1 to the UGPS Topside. Secondly, the UGPS Topside is modified to connect directly to the communication between ROV and topside computer. The advantage of integrating using this method is that there is no additional topside computer configuration required, which can be challenging with different operating systems (i.e. Linux, iOS). </p> </li> <li> <p>If you wish to avoid carrying out hardware changes to the ROV, as they are required to integrate the A1-Locator, then we recommend you to use the Locator-U1. The locator can simply be attached to the BlueROV2 in any convenient way. However some configuration steps in the topside computer are required to establish a network bridge, so the position calculated by the UGPS Topside is available in QGroundControl. These steps are described in BlueROV2 Integration Locator-U1. Be aware that setting up a network bridge in operating systems other than Windows can be challenging.</p> </li> </ul>"},{"location":"underwater-gps/integration/bluerov-integration/#alternative-integration-methods","title":"Alternative integration methods","text":"<ul> <li> <p>If you wish to use a Locator-A1, however you wish to avoid purchasing the full integration kit then this can be done. The Locator-A1 must be installed on the ROV and connected to the G2 Topside and then it is necessary to set-up a network bridge. The steps in these sections are relevant</p> <ul> <li>Modifications to the BlueROV2</li> <li>Modifications to the FXTI with the deviation that the blue/white twisted pair between Tether Connection PCB and Binder-connector-pigtail-assembly does not need to be connected.</li> <li>Establish a network connection with a network bridge</li> <li>Final steps</li> </ul> </li> <li> <p>If you wish to use the Locator-U1, however you wish to avoid the complication in setting up a network bridge, it is possible to integrate by using the BlueROV2 Integration Kit. The steps in these sections are relevant</p> <ul> <li>Mount the Locator-U1 to the BlueROV2 frame</li> <li>Modifications to the UGPS Topside</li> <li>Modifications to the FXTI with the deviation that the green/white twisted pair between tether and Binder-connector-pigtail-assembly does not need to be connected.</li> <li>Establish a network connection with powerline communication</li> <li>Final steps</li> </ul> </li> <li> <p>If using a Locator-D1, use the D1's cable and attach the D1 locator to the BlueROV2 in any convenient way. No further hardware integration is then required. As with the Locator-U1,</p> <ul> <li>Establish a network connection with a network bridge</li> <li>and follow the final steps</li> </ul> </li> </ul>"},{"location":"underwater-gps/integration/bluerov-integration/#final-steps-of-integration-independent-of-locator","title":"Final steps of integration independent of Locator","text":"<p>If you have successfully installed a Locator with one of the above linked guides, these are the final configuration steps to be performed.</p>"},{"location":"underwater-gps/integration/bluerov-integration/#bluerov-software-update-and-ugps-extension","title":"BlueROV Software Update and UGPS extension","text":"Your BlueROV2 runs BlueOS <p>This section is for the R4 version of the BlueROV2 that uses the Navigator Flight Controller or ROVs that have been upgraded to BlueOS software.</p> <p>Info</p> <p>If you have an older R1, R2, or R3 version of the BlueROV2 that uses a Pixhawk autopilot and you want to upgrade to using BlueOS, you can either carry out a software upgrade only (described here) or upgrade the hardware from Pixhawk to Navigator flight controller and the software (described here).</p> <p>The Water Linked UGPS system requires an extension in BlueOS to be able to communicate with the autopilot (Pixhawk or Navigator flight controller). BlueOS has to be updated to BlueOS 1.1.0 or newer to assure that extensions are supported sufficiently. Follow the Update Software section of the BlueROV Software Setup guide</p> <p>To enable the UGPS extension navigate to \"Extensions\", that should show up in the side bar after the above described BlueOS update.</p> <p>Click on the \"Water Linked UGPS\" extension.</p> <p></p> <p>In the pop-up make sure the latest version (&gt; 1.0.4) is selected and click \"Install\".</p> <p></p> <p>The extension should show up in the \"Installed\" tab.</p> <p></p> Your BlueROV2 runs Ardusub Companion <p>This section is for older R1, R2, or R3 versions of the BlueROV2 that use a Pixhawk autopilot and Companion software.</p> <p>To work properly, the Water Linked UGPS system requires ArduSub Companion image version 0.0.21 or newer and the most recent stable release of QGroundControl for your operating system. If your Companion image is out of date, please follow the BlueROV2 Software Update procedures.</p> <p>Note</p> <p>No special extension for the UGPS system is necessary in Companion OS. It is natively supported.</p>"},{"location":"underwater-gps/integration/bluerov-integration/#checking-ugps-to-autopilot-connection-on-land","title":"Checking UGPS to autopilot connection on land","text":"<p>If you open QGroundControl you should be able to establish a connection to the ROV as before UGPS integration. Furthermore you should be able to see messages of type <code>GPS_INPUT</code> in the MAVLink Inspector (click on Q-logo, then Analyze Tools, then MAVLink Inspector in sidebar). This is the MAVLink message that is provided by the UGPS BlueROV Extension to the autopilot (Pixhawk or Navigator flight controller). For detailed information about the extension see the BlueOS Extension for UGPS GitHub page.</p>"},{"location":"underwater-gps/integration/bluerov-integration/#daily-operation","title":"Daily operation","text":"<p>This section will help you if a UGPS system was already integrated with the BlueROV2 and you want to use and not also install it.</p> <ol> <li>Follow the instructions of the UGPS Quickstart-Guide from the Water Linked Documentation for antenna or loose receivers deployment.</li> <li>Connect BlueROV2, FXTI, topside computer and UGPS Topside and assure the network connection is working:<ul> <li>For the Locator-A1, follow this section</li> <li>For the Locator-U1, follow this section. In addition, note the channel setting in the Locator-U1 and close the lid to power it up.</li> </ul> </li> <li>Follow the steps of the Quickstart-Guide from the Water Linked Documentation for:<ul> <li>Selecting the locator in the GUI</li> <li>Configuring antenna/receiver placement and search range.</li> <li>Setting of heading.</li> </ul> </li> <li>Start QGroundControl and verify the connection to the BlueROV2. Even if the ROV can not have a location fix above water it should now receive data from the UGPS system. See Checking UGPS to autopilot connection on land</li> <li>Dive the BlueROV2 so the Locator is submerged a few centimeters below the surface.</li> </ol> <p>If everything is operating correctly, you should now find a ROV position on the map in QGroundControl. The ROV position is indicated by a BlueROV2 image. The position of the surface vessel or Water Linked UGPS Topside housing is indicated by a red arrow or Q-symbol depending of QGroundControl version. The small \u2018H\u2019 icon indicates the \u2018home position\u2019, the location of the ROV\u2019s first GPS lock.</p> <p>UGPS Topside position</p> <p>The UGPS topside position is not shown reliably on all systems. It is sent as NMEA to UDP port 14401, so check your configuration in QGroundControl.</p> <p></p>"},{"location":"underwater-gps/integration/bluerov-integration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"underwater-gps/integration/bluerov-integration/#no-external-depth-error-in-ugps-topside-gui-or-qgroundcontrol-connection-issues-for-ardusub-companion","title":"'No External Depth' error in UGPS Topside GUI, or QGroundControl connection issues (for Ardusub Companion)","text":"<p>This almost certainly means that the network between the UGPS G2 topside and the BlueROV2 has not been successfully established. First carry out the following steps:</p> <ol> <li>Ensure you are using the latest versions of ArduSub Companion and QGroundControl: Update Software</li> <li>In the Companion Web Interface, go to the MAVProxy page: http://192.168.2.2:2770/mavproxy</li> <li>Click on the \u201cRestore Default Options\u201d button.</li> <li>Power cycle the BlueROV2.</li> <li>Check the PLC LED (3) on the PLC module (see box \"What do the LEDs on the PLC module mean?\")</li> </ol> <p>If the issue persists, if you are using the FXTI approach to the networking, you may wish to try the network bridge approach, as the FTXI sometimes fails to handle the connections satisfactorily. In addition, double-check that you did not skip the Modifications to the FXTI.</p> <p>If none of this solves the problem, you are very welcome to contact us, and we will be happy to support you.</p>"},{"location":"underwater-gps/integration/bluerov-integration/#connection-to-bluerov2-lost-when-connecting-underwater-gps-to-fxti","title":"Connection to BlueROV2 lost when connecting Underwater GPS to FXTI","text":"<p>The current draw by the FXTI can exceed 500 mA when connecting the Underwater GPS to the PLC network. This can then cause the FXTI to become unstable if it's connected to a standard USB 2.0 port on the computer since USB 2.0 allows for a maximum of 500 mA current draw. There are two known solutions:</p> <ol> <li> <p>Connect the USB cable of the FXTI to a USB 3.0/3.1 compatible USB-A port. USB 3.0/3.1 allows for a maximum of 900 mA current draw. A USB 3.0/3.1 compatible USB-A port should be recognized by its blue plastic parts.</p> </li> <li> <p>Add a separate power source to the Fathom-X inside the FXTI. The Fathom-X board has screw terminals marked BATT which can attach to a 7-28V DC power source.</p> </li> </ol>"},{"location":"underwater-gps/integration/bluerov-integration/#water-linked-software-updates","title":"Water Linked software updates","text":"<p>Keep the Water Linked software up to date. The GUI should notify when an update is available, but the current version can also be checked at 192.168.2.94/#/about.</p>"},{"location":"underwater-gps/integration/external-gps/","title":"How to implement external GPS compass data in the UGPS","text":"<p>In very dynamic conditions with rapid changes in angles, the IMU will drift too much to provide sufficient heading accuracy. In this case it is recommended to implement an external compass to provide updated heading information.</p>"},{"location":"underwater-gps/integration/external-gps/#which-compass-to-use","title":"Which compass to use","text":"<p>If the UGPS is permanently installed on a boat, the simple solution is to use the boats compass, if it provides the possibility to output NMEA data. Otherwise it is possible to use any portable compass that provide NMEA0185 or NMEA2000 information.</p>"},{"location":"underwater-gps/integration/external-gps/#external-compass-on-the-ugps","title":"External compass on the UGPS:","text":"<p>To use an external compass with the UGPS it has to be integrated in the software on your computer. As for now there are no direct hardware connection available. The needed firmware can be installed by following this procedure:</p> <p>Note</p> <p>This is valid only for compasses that provides NMEA0183</p> <ul> <li>Go to: https://github.com/waterlinked/ugps-nmea-go under \u201cReadme\u201d and \u201cInstallation\u201d and \u201cDownload the application\u201d, choose v.1.8.0 </li> <li>Download the .zip-file.</li> <li>In windows: run the file. Follow the instructions you get. (It is advisable to create a folder on your computer specifically for this configuration)</li> <li>In linux, in the directory you saved the file in: use chmod +x  (It is advisable to create a folder on your computer specifically for this configuration) <li>Go back to the \u201cugps-nmea-go\u201d repository and download the file: \u201cconfig-example.yml\u201d, save it in the same folder as the application and rename it to config.yml.</li> <li>Open the file and make sure you have the correct com or tty-port on \u201cdevice\u201d and the correct position sentence. If you are uncertain, check the gps manual. The baudrate is usually 9600. If you still are uncertain of the baudrate, open the device with a serial program like putty or minicom and connect to the compass. Try different baudrates and see which one that gives you sensible data. -Save the changes you made to the config.yml file.</li> <li>Connect the UGPS topside to your computer and turn it on.</li> <li>Run the application from a terminal. To do this, navigate to the correct folder with \u201ccd /\u201d (in your terminal) and run the application with ./nmea_ugps_linux_amd64 or ./nmea_ugps_windows_amd64.exe <li>In the UGPS GUI, go to Configuration -&gt; Topside setup and choose \u201cexternal\u201d compass.</li> <p>Note</p> <p>The UGPS do still need GPS lock to synchronize time with the locator, but as long as the UGPS has access to a GPS signal (is outside) you do not have to worry about it. </p>"},{"location":"underwater-gps/integration/external-gps/#if-you-have-an-nmea2000-gps-compass","title":"If you have an NMEA2000 GPS compass","text":"<p>In this case you will need an NMEA0183 to NMEA2000 converter. Below are link's to converters that can be used for the purpose:</p> <p>https://www.mrad.co.za/wp-content/uploads/2019/09/ngw-1-user-manual.pdf</p> <p>https://actisense.com/products/nmea-2000-gateway-ngw-1/</p>"},{"location":"underwater-gps/interface/ugps-gui/","title":"UGPS GUI","text":"<p>The UGPS comes with an easy to use Graphical User Interface that can easily be reached via wifi or ethernet. See Networking for details on how to connect to the UGPS's GUI.</p> <p>The Underwater GPS GUI is web based. Using your favorite web browser, go the IP address as defined here. We currently support and recommend Chrome, Firefox, Safari and Edge.</p> <p>Attention</p> <p>Internet Explorer is not supported as of now.</p> <p>Tip</p> <p>We offer a live demo of the GUI of the UGPS G2 system. It runs on simulated data, designed to illustrate various GUI features; this data is not necessarily realistic in all aspects!</p> <p>The system does not need to be fully set up to access the user interface. Only the topside needs to be powered on. You will however get some status warnings as long as the topside is not able to detect any locator. </p> <p>The first thing you see when opening up the GUI is the Position window with the relative position view, and the status warnings.  To the left there is a menu bar where you can access all features and settings.</p> <p></p> <p>Note</p> <p>For more information about the warnings, see: warnings</p>"},{"location":"underwater-gps/interface/ugps-gui/#position","title":"Position","text":"<p>This window shows you the werabouts of the locator in relation to the topside. You can switch between relative position and map position. </p> <p>Note</p> <p>You will need internet access on the computer that are showing the GUI, if you also want to see the map and not only the relative position of the locator. This is because the map is fetched from the internet. </p>"},{"location":"underwater-gps/interface/ugps-gui/#relative-position","title":"Relative position","text":"<p>The relative position view shows you the location of the locator in relation to the UGPS topside box.</p>"},{"location":"underwater-gps/interface/ugps-gui/#map-position","title":"Map position","text":"<p>To be able to get a map position view, your computer must have internet access, as the map is downloaded from the internet. The map view gives you the position and heading of the topside and the position of the locator. </p> <p></p> <p>In this view you can also mark your own points of interests, either if you know the latitude and longitude of the destination you seek, or if you want to mark a point you pass along the route so that you can go back later.</p>"},{"location":"underwater-gps/interface/ugps-gui/#baseline","title":"Baseline","text":"<p>The baseline is the configuration of your systems settings based on your hardware setup. In this window you select your baseline setup, whether you are using an antenna or loose receivers, and their placement with regard to the topside. </p> <p></p> <p>In the tab at the top select antenna or receivers according to whether an antenna or loose receivers are used, and enter your systems baseline configurations. See System configurations for details on how to configure your systems baseline in the GUI.</p>"},{"location":"underwater-gps/interface/ugps-gui/#settings","title":"Settings","text":"<p>In Settings, you configure which locator you are using and if your topside is statically mounted on a dock or if it is onboard a boat. If you are using a locator-U1, you need to configure which channel the locator is on. </p> <p>If the topside is mounted in a dynamic environment, you will get the option to set your systems heading. In this case you must use a good compass and enter the heading into your system regularly. The compass of a mobile phone is not accurate enough.</p> <p>You can also choose if you want to use metric or imperial units.</p> <p>In the advanced settings option you can choose your preferred connection method.</p> <p>Note</p> <p>Remeber that the locator channel has to be set both in the settings menu, and also physically on the locator-U1.</p> <p>See System configurations for details on how to configure your systems settings in the GUI.</p> <p></p>"},{"location":"underwater-gps/interface/ugps-gui/#diagnostics","title":"Diagnostics","text":"<p>In the Diagnostic window you can see the locator position in numbers, together with a graphical view of the signal strength and system noise. This allows you to analyse your systems performance. </p> <p></p> <p>In the diagnostic plot you should see the signal from all 4 Receivers. The signals should be well above the noise floor.</p>"},{"location":"underwater-gps/interface/ugps-gui/#interference","title":"Interference","text":"<p>Acoustic interference can be observed in the diagnostic plot. Echo sounders from your boat or nearby boats typically appears like burst noise.</p> <p></p> <p>If it is coming from your boat, try to turn off the echo sounder to improve position accuracy. In case of interference from other acoustic sources, use the GUI to try other channels to avoid the interference.</p> <p>Tip</p> <p>Typically, NSD (Noise spectral density) is around -100 dBm (in the units of version 3.3.0 or later of the software; 15 nV/sqrt(Hz) in the units of earlier software versions), or a little higher or lower. If it is much higher than this, it is likely that there is acoustic interference in the chosen channel, and a different channel should be tried.</p> <p>Note in particular that acoustic devices quite commonly operate at frequencies lying in Channel 1.</p> <p>Tip</p> <p>If the NSD values are normal, signal quality is mainly indicated by the RSSI values (_Received signal strength indicator). As long as the RSSI values are not too far below the NSD values, the signal strength should be at usable levels.</p> <p>The UGPS system uses advanced signal processing techniques and can work even with rather weak signals, but an RSSI of -125 dBm or so (in the units of version 3.3.0 or later of the software; -45 dBnW in the units of earlier software versions) is around the lowest possible for an NSD of roughly -100 dBm.</p> <p>Typically one can expect a decrease in signal strength of around 6 dB for each doubling of distance due to spherical spreading, plus a little more due to additional absorption.</p>"},{"location":"underwater-gps/interface/ugps-gui/#diagnostic-report","title":"Diagnostic report","text":"<p>At the bottom of the page there is an option that allows you to record a diagnostic report.  If you are experienceing any issues with your system, record a diagnostic logfile. The file should preferably be recorded in the moment as your system is failing. Then contact Waterlinkeds technical support through the support portal. Attach the diagnostic report file you recorded to your request. The file contains valuable information that will help the support team analyse your system. </p> <p>Note</p> <p>The logfile must be downloaded to your computer and sent to customer support as an email attachment.</p>"},{"location":"underwater-gps/interface/ugps-gui/#about","title":"About","text":"<p>The about page tells you which software version that is currently running on your system. If there is a new update available you can easily download and install from this page. But the topside must be turned on and connected to the internet for this option to be available. If not you will have to do a manual upgrade. See Software update for details on how to do this. </p> <p>It is always recommended to use the latest sw update.</p> <p>Tip</p> <p>If a new software update is available, an exclamation mark will be visible next to the Waterlinked logo in the GUI. </p>"},{"location":"underwater-gps/interface/ugps-led/","title":"LED Indicators","text":"<p>Only the topside box and the Locator U1 has LED indicators.</p>"},{"location":"underwater-gps/interface/ugps-led/#topside","title":"Topside","text":"LED name Description Power Solid green: Topside has power Ready Solid Green: Topside has booted successfully GPS Blinking green: Searching for GPS lock, solid green: Topside has GPS lock LED 1 Solid green: Firmware successfully loaded LED 2 Not in use Locator Solid green: Locator D1 is connected Receiver 1 Solid green: Receiver 1 connected Receiver 2 Solid green: Receiver 2 connected Receiver 3 Solid green: Receiver 3 connected Receiver 4 Solid green: Receiver 4 connected <p>Note</p> <p>There is No indication when the Antenna is connected.</p> <p>Note</p> <p>NC: Not Connected.</p> <p>DNC: Do Not Connect, pins used for production.</p> <p>GND: Boldface indicate power lines (12 V, 3.3 V, VIN, GND).</p>"},{"location":"underwater-gps/interface/ugps-led/#locator-u1","title":"Locator-U1","text":"<ul> <li> <p>No green light   Power is off; the Locator-U1 is not ready for diving.</p> </li> <li> <p>Flashing green light (once per second)   The Locator-U1 is searching for GPS lock and is not ready to dive.</p> </li> <li> <p>Fixed green light   The Locator-U1 has GPS lock and is ready to dive.</p> </li> <li> <p>Flashing green light (slow)   The Locator-U1 previously had GPS lock but lost it. It is still ready to dive.</p> </li> <li> <p>Fast flashing green light (multiple times per second)   Error indication. The Locator-U1 is not ready to dive. This often happens if the device has exceeded its dive time and the pressure sensor requires drying, or if the battery power is very low. Charging the Locator helps to dry the sensor more quickly.</p> </li> </ul> <p>Note</p> <p>The LED does not say anything about the battery status of the Locator-U1. The locator always needs to be charged for at least 7 hours with a proper 5V/2A charger befor use.</p>"},{"location":"underwater-gps/interface/ugps-wiring/","title":"UGPS Wiring","text":"<p>The UGPS system consistes of several hardware units. For wiring details on each unit, see Hardware setup/Components/</p> <p>Power supply Topside Receivers Antenna Locator-A1 Locator-D1 </p> <p></p> <p>Note</p> <p>Locator-U1 is a wireless unit and does not have any wiring details</p>"},{"location":"underwater-gps/interface/warnings/","title":"Warnings","text":"<p>Warnings that you might experience while using the UGPS.</p> Message Solution No external depth received. Is it being sent correctly? The Underwater GPS is not receiving the depth of the Locator from the ROV. This normally means software on the ROV is not working correctly. Depth is sent to the system through the API. No signal from Locator-U1. Have you selected the correct channel? Verify that the Locator-U1 is powered on and that it has GPS lock (See LED signals ). Verify that the same channel is selected on the settings page and the Locator rotary switch. Verify that the Locator and Receivers are in the water Missing GPS lock/position. Please provide me with an unobstructed view of the sky The Underwater GPS needs GPS lock for time sync purposes. Move the Topside to another location where it has better view of the sky. Locator-D1 not detected. Please verify connection. Locator-D1 selected but not detected by the Master-D1. Verify connection. Receiver N not detected. Please verify connection. Receiver N is not detected by the Master-D1. Verify connection. External satellite position is required but not received. External position is selected, but not received via the API. Typically this is an external software not started or not working. External orientation is required but not received. External orientation is selected, but not received via the API. Typically this is an external software not started or not working. IMU is not calibrated: position will not be accurate. Please rotate the kit to calibrate or use external orientation source. See IMU calibration for details on how calibrate. GPS has no position, please provide me with an unobstructed view of the sky. The Underwater GPS needs GPS lock for time sync proposes. Move the Topside to another location where it has better view of the sky."},{"location":"underwater-gps/locators/locator-a1/","title":"Locator-A1","text":"<p>Buy Locator-A1 here!</p>"},{"location":"underwater-gps/locators/locator-a1/#description","title":"Description","text":"<p>The Locator-A1 has the smallest physical footprint in our series of locators. It can be integrated into even the most compact ROVs. The Locator-A1 does not carry its own depth sensor, so the UGPS G2 system requires that the depth be provided from your underwater vehicle (ROV, etc.) This can achieved by means of the UGPS API.</p>"},{"location":"underwater-gps/locators/locator-a1/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the A1 interface connectors.</p> <p></p>"},{"location":"underwater-gps/locators/locator-a1/#dimensions","title":"Dimensions","text":""},{"location":"underwater-gps/locators/locator-a1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"underwater-gps/locators/locator-d1/","title":"Locator-D1","text":"<p>Buy Locator-D1 here!</p>"},{"location":"underwater-gps/locators/locator-d1/#description","title":"Description","text":"<p>The Locator-D1 carries its own depth sensor and can therefore operate fully stand-alone and independent of the device you want to position.</p> <p>Warning</p> <p>The Locator-D1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings.</p>"},{"location":"underwater-gps/locators/locator-d1/#wiring-interface","title":"Wiring interface","text":"<p>The tables below shows the pinning of the D1 interface connectors.</p> <p></p> <p></p>"},{"location":"underwater-gps/locators/locator-d1/#dimensions","title":"Dimensions","text":""},{"location":"underwater-gps/locators/locator-d1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"},{"location":"underwater-gps/locators/locator-u1/","title":"Locator-U1","text":"<p>Buy Locator-U1 here!</p>"},{"location":"underwater-gps/locators/locator-u1/#description","title":"Description","text":"<p>The Locator-U1 is a battery-powered, digital hydroacoustic locator device. It includes an internal GPS-based time-sync module, eliminating the need for a tether. This makes it ideal for divers, ROVs lacking convenient power sources, or other underwater applications.</p> <p>Before deployment, the Locator-U1 must obtain a GPS lock. The integrated status LED indicates the lock status. Once locked, the Locator-U1 can operate for around 6 hours before it needs to resync with GPS.</p> <p>A rotary switch is located inside the cap, allowing you to select the channel on which the Locator transmits. The same channel must be set in the Water Linked Underwater GPS GUI. Each side of the Locator has three M3 mounting holes, and a standard bracket is included.</p> <p>Note</p> <p>You will need GPS lock on the topside as well when using the U1. This is for timing purposes, it will not help to use only external GPS position as this can not be used for time synchronization. It is not enough to only have GPS lock on the U1.</p>"},{"location":"underwater-gps/locators/locator-u1/#charging","title":"Charging","text":"<p>The Locator-U1 has an internal rechargeable battery. Use the included USB-C cable and a 5\u202fV / 2\u202fA (or higher) wall adapter to charge it. The U1 will require to be fully charged before each operation as it will discharge over time when left with the cap off. Depending on the age of the U1 and the temperature in the environment the discharging effect will be worse. </p> <p>Note</p> <p>Do not use your computer to charge the locator, the computers USB port does not supply enough power to charge the locator. Charge for at least 7 hours. Note that a steady green light only indicates gps lock, and has nothing to do with the charging status. </p> <p>1) Insert the USB-C cable    Plug one end of the cable into the Locator-U1\u2019s charging port.</p> <p>2) Connect to a suitable power source    Attach the other end of the cable to a wall adapter providing at least 5V/2A.    Avoid charging from a computer USB port.</p> <p>3) Charge for 7 hours    Leave the Locator-U1 connected for a full 7 hours to ensure a complete charge. You can then disconnect the cable and use the Locator-U1. Charging overnight the night before use is a recommended routine.</p>"},{"location":"underwater-gps/locators/locator-u1/#led-behavior-while-charging","title":"LED Behavior While Charging","text":"<p>When the Locator-U1 is connected to a charger, the LED does not indicate charging progress. You may see:</p> <p>1) Blinking green LED    The Locator-U1 is powered on and functioning normally (such as searching for GPS). This does not reflect charging status.</p> <p>2) No LED (off)    The battery is too low to power on, but the device is still charging. Once it has enough power, the LED will start blinking.</p> <p>3) Solid green LED    The Locator-U1 is powered on and has a GPS lock (see LED Signals). This does not mean it is fully charged. Keep charging for the full 7-hour period.</p> <p>Warning</p> <p>Do not charge the Locator-U1 using a computer USB port.</p>"},{"location":"underwater-gps/locators/locator-u1/#powering-on-and-off","title":"Powering On and Off","text":"<ul> <li> <p>To power on the Locator-U1, securely tighten the lid over the charging port. The LED will begin blinking to indicate that it is searching for a GPS lock. Once the LED stops blinking and becomes solid, the Locator-U1 has acquired a GPS lock and is ready for use.   Ensure the O-ring on the lid is undamaged before submerging the device.</p> </li> <li> <p>To power off the Locator-U1, unscrew the back lid until the LED turns off.</p> </li> </ul>"},{"location":"underwater-gps/locators/locator-u1/#led-signals","title":"LED Signals","text":"<ul> <li> <p>No green light   Power is off; the Locator-U1 is not ready for diving.</p> </li> <li> <p>Flashing green light (once per second)   The Locator-U1 is searching for a GPS lock and is not ready to dive.</p> </li> <li> <p>Fixed green light   The Locator-U1 has a GPS lock and is ready to dive.</p> </li> <li> <p>Flashing green light (slow)   The Locator-U1 previously had a GPS lock but lost it. It is still ready to dive.</p> </li> <li> <p>Fast flashing green light (multiple times per second)   Error indication. The Locator-U1 is not ready to dive. This often happens if the device has exceeded its dive time and the pressure sensor requires drying, or if the battery power is very low. Charging the Locator helps to dry the sensor more quickly.</p> </li> </ul> <p>Warning</p> <p>The Locator-U1 can only be submerged for about 6 hours. It then requires charging and time to dry the pressure sensor in order to provide accurate depth readings.</p>"},{"location":"underwater-gps/locators/locator-u1/#wiring-interface","title":"Wiring Interface","text":"<p>Since the Locator-U1 is battery powered, its only interface is the charging port, which is a standard USB-C connector.</p>"},{"location":"underwater-gps/locators/locator-u1/#included-in-package","title":"Included in Package","text":"<ul> <li>Locator-U1  </li> <li>USB-C charging cable  </li> <li>Mounting bracket  </li> </ul>"},{"location":"underwater-gps/locators/locator-u1/#dimensions","title":"Dimensions","text":""},{"location":"underwater-gps/locators/locator-u1/#datasheet","title":"Datasheet","text":"<p>Datasheet</p>"}]}